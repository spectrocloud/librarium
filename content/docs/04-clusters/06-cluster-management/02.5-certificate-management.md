---
title: "Certificate Management"
metaTitle: "Certificate Management"
metaDescription: "Learn how to manage the cluster certificates through Palette."
hideToC: false
fullWidth: false
---

import Tabs from 'shared/components/ui/Tabs';
import WarningBox from 'shared/components/WarningBox';
import InfoBox from 'shared/components/InfoBox';


# Overview

Palette installs Kubernetes through the [kubeadm](https://kubernetes.io/docs/reference/setup-tools/kubeadm). As a result, all deployed clusters are, by default deployed with all the auto-generated Public Key Infrastructure (PKI) certificates created by kubeadm. We recommend you review the [PKI certificates and requirement](https://kubernetes.io/docs/setup/best-practices/certificates) documentation from the official Kubernetes documentation to learn more about the auto-generated certificates and to better understand their purpose.

This reference page focuses on how to renew the PKI certificates through Palette. You have two options for how you can renew the cluster PKI certificates:

  <br />

  * Automatic Certificate Renewal


  * Manual Certificate Renewal



<InfoBox>

Certificates created by kubeadm expire after 365 days. The Root Certificate Authority (CA) is valid for 3652 days or ten years.

</InfoBox>


You can learn more about each option in the following sections. 



# Automatic Certificate Renewal

When you upgrade the control plane on a cluster, the PKI certificates are automatically updated. Upgrading a cluster's Kubernetes version, whether a minor patch or a major release, results in renewed PKI certificates. This is the method that requires the least user actions when it comes to renewing PKI certificates. We recommend regularly updating your clusters to stay up-to-date with security fixes and best practices. By keeping your host cluster up-to-date, you prevent the scenario of PKI certificates from reaching their one-year expiration date.

<br />

<InfoBox>

You can upgrade the Kubernetes version of a cluster by updating the Kubernetes layer of the [cluster profile](/cluster-profiles).

</InfoBox>


# Manual Certificate Renewal

You can renew the cluster PKI certificates on-demand using the Palette API or the Palette User Interface (UI). When you manually trigger a certificate renewal action, the action will result in cluster nodes becoming repaved. Palette will scale up the cluster control plane nodes count and deploy new nodes with new PKI certificates auto-generated by kubeadm. Once the new control plane nodes are active and available, Palette will remove the previous control plane nodes. The worker nodes are renewed once the control plane nodes are updated and available.

<br />

<WarningBox>

A manual renewal of cluster PKI certificates will result in all cluster nodes becoming repaved.

</WarningBox>


Review the following sections to learn more about manually renewing the cluster PKI certificates. Choose the preferred update method, API, or through the Palette UI.



<br />

<Tabs>


<Tabs.TabPane tab="UI" key="ui">


To update the cluster PKI certificates through the Palette UI, use the following steps.


## Prerequisites

- A host cluster deployed.


- Access to the host cluster.

## Renew Cluster Certificate

1. Log in to [Palette](https://console.spectrocloud.com).


2. Navigate to the left **Main Menu** and select **Clusters**.


3. Select the host cluster you would like to renew the PKI certificates.


4. From the cluster details page, click on **View K8s Certificates**.

  <br />

  ![A view of the Palette UI with an arrow pointing to the k8s certificate button.](/clusters_cluster-management_certificate-management_cluster-details-page.png)


5. Next, select **Renew All** to start the renewal operation.

  <br />

  ![A view of the cluster certificates displaying the expiration date](/clusters_cluster-management_certificate-management_certificate-renew-page.png)

The renewal process may take several minutes depending on the number of cluster nodes.
## Validate

You can validate that the cluster's PKI certificates are renewed by using the following steps.

<br />

1. Log in to [Palette](https://console.spectrocloud.com).


2. Navigate to the left **Main Menu** and select **Clusters**.


3. Select the host cluster you would like to renew the PKI certificates.


4. From the cluster details page, click on **View K8s Certificates**.


5. Review the expiration date for each component. Each component's expiration date will have a status of **365d** with a date that is one year away. 


</Tabs.TabPane>
<Tabs.TabPane tab="API" key="api">


To update the cluster PKI certificates through the Palette API, use the following steps.


## Prerequisites

- A Palette API key. You can learn how to create a Palette API key by reviewing the [API Key](/user-management/user-authentication/) documentation.


## Renew Cluster Certificate


1. Set your Palette API key as an environment variable. Replace the placeholder `REPLACE_ME` with your actual API key.

  <br />

  ```shell
  export API_KEY=REPLACE_ME
  ```

2. Use the Palette API endpoint `https://api.spectrocloud.com/v1/spectroclusters/{uid}/k8certificates/renew` to renew a cluster's PKI certificates. The endpoint accepts the HTTP method `PATCH` and the only required parameter is the ID of the cluster. Using `curl`, replace the `uid` with your cluster ID and replace `API_KEY

  <br />

  ```shell
  curl --request PATCH \
    --url  'https://api.spectrocloud.com/v1/spectroclusters/{uid}/k8certificates/renew' \
    --header 'Content-Type: application/json' \
    --header 'Accept: application/json' \
    --header "ApiKey: $API_KEY"
  ```

3. No output is returned and an HTTP status `204` is expected.




## Validate



</Tabs.TabPane>
</Tabs>

<br />

# Advanced - Only Renew Control Plane Nodes