# Page snapshot

```yaml
- generic [active] [ref=e1]:
  - generic [ref=e2]:
    - region "Skip to main content":
      - link "Skip to main content" [ref=e3] [cursor=pointer]:
        - /url: "#__docusaurus_skipToContent_fallback"
    - navigation "Main" [ref=e4]:
      - generic [ref=e5]:
        - generic [ref=e6]:
          - link "Spectro cloud logo" [ref=e7] [cursor=pointer]:
            - /url: /
            - img "Spectro cloud logo" [ref=e9]
          - link "Docs" [ref=e10] [cursor=pointer]:
            - /url: /release-notes/
          - link "Tutorials" [ref=e11] [cursor=pointer]:
            - /url: /tutorials/
          - link "Downloads" [ref=e12] [cursor=pointer]:
            - /url: /downloads/
          - link "API" [ref=e13] [cursor=pointer]:
            - /url: /api/introduction/
          - button "latest" [ref=e15] [cursor=pointer]
        - generic [ref=e16]:
          - link "GitHub repository" [ref=e17] [cursor=pointer]:
            - /url: https://github.com/spectrocloud/librarium
          - button "Switch between dark and light mode (currently system mode)" [ref=e19] [cursor=pointer]:
            - img [ref=e20]
          - button "Search (Control+k)" [ref=e23] [cursor=pointer]:
            - generic [ref=e24]:
              - img [ref=e25]
              - generic [ref=e28]: Search
    - generic [ref=e32]:
      - complementary [ref=e33]:
        - generic [ref=e35]:
          - link "Spectro cloud logo" [ref=e36] [cursor=pointer]:
            - /url: /
            - img "Spectro cloud logo" [ref=e37]
          - navigation "Docs sidebar" [ref=e38]:
            - list [ref=e39]:
              - listitem [ref=e40]:
                - generic [ref=e41]:
                  - link "Release Notes" [ref=e42] [cursor=pointer]:
                    - /url: /release-notes/
                    - img [ref=e44]
                    - text: Release Notes
                  - button "Toggle the collapsible sidebar category 'Release Notes'" [ref=e46] [cursor=pointer]
              - listitem [ref=e47]:
                - generic [ref=e48]:
                  - link "Security Bulletins" [ref=e49] [cursor=pointer]:
                    - /url: /security-bulletins/
                    - img [ref=e51]
                    - text: Security Bulletins
                  - button "Toggle the collapsible sidebar category 'Security Bulletins'" [ref=e53] [cursor=pointer]
              - listitem [ref=e54]:
                - generic [ref=e55]:
                  - link "What is Palette?" [ref=e56] [cursor=pointer]:
                    - /url: /
                    - img [ref=e58]
                    - text: What is Palette?
                  - button "Toggle the collapsible sidebar category 'What is Palette?'" [ref=e60] [cursor=pointer]
              - listitem [ref=e61]:
                - link "Getting Started" [ref=e62] [cursor=pointer]:
                  - /url: /getting-started/
                  - img [ref=e64]
                  - text: Getting Started
              - listitem [ref=e66]:
                - generic [ref=e67]:
                  - link "Architecture" [ref=e68] [cursor=pointer]:
                    - /url: /architecture/
                    - img [ref=e70]
                    - text: Architecture
                  - button "Toggle the collapsible sidebar category 'Architecture'" [ref=e72] [cursor=pointer]
              - listitem [ref=e73]:
                - generic [ref=e74]:
                  - link "Profiles" [ref=e75] [cursor=pointer]:
                    - /url: /profiles/
                    - img [ref=e77]
                    - text: Profiles
                  - button "Toggle the collapsible sidebar category 'Profiles'" [ref=e81] [cursor=pointer]
              - listitem [ref=e82]:
                - generic [ref=e83]:
                  - link "Cluster Templates" [ref=e84] [cursor=pointer]:
                    - /url: /cluster-templates/
                    - img [ref=e86]
                    - text: Cluster Templates
                  - button "Toggle the collapsible sidebar category 'Cluster Templates'" [ref=e88] [cursor=pointer]
              - listitem [ref=e89]:
                - generic [ref=e90]:
                  - link "Deployment Modes" [ref=e91] [cursor=pointer]:
                    - /url: /deployment-modes/
                    - img [ref=e93]
                    - text: Deployment Modes
                  - button "Toggle the collapsible sidebar category 'Deployment Modes'" [ref=e95] [cursor=pointer]
              - listitem [ref=e96]:
                - generic [ref=e97]:
                  - link "Clusters" [expanded] [ref=e98] [cursor=pointer]:
                    - /url: /clusters/
                    - img [ref=e100]
                    - text: Clusters
                  - button "Toggle the collapsible sidebar category 'Clusters'" [ref=e106] [cursor=pointer]
                - list [ref=e107]:
                  - listitem [ref=e108]:
                    - generic [ref=e109]:
                      - link "Public Cloud Clusters" [expanded] [ref=e110] [cursor=pointer]:
                        - /url: /clusters/public-cloud/
                        - img [ref=e112]
                        - text: Public Cloud Clusters
                      - button "Toggle the collapsible sidebar category 'Public Cloud Clusters'" [ref=e114] [cursor=pointer]
                    - list [ref=e115]:
                      - listitem [ref=e116]:
                        - generic [ref=e117]:
                          - link "AWS" [expanded] [ref=e118] [cursor=pointer]:
                            - /url: /clusters/public-cloud/aws/
                          - button "Toggle the collapsible sidebar category 'AWS'" [ref=e119] [cursor=pointer]
                        - list [ref=e120]:
                          - listitem [ref=e121]:
                            - link "Architecture" [ref=e122] [cursor=pointer]:
                              - /url: /clusters/public-cloud/aws/architecture/
                          - listitem [ref=e123]:
                            - link "Register and Manage AWS Accounts" [ref=e124] [cursor=pointer]:
                              - /url: /clusters/public-cloud/aws/add-aws-accounts/
                          - listitem [ref=e125]:
                            - link "Create and Manage AWS IaaS Cluster" [ref=e126] [cursor=pointer]:
                              - /url: /clusters/public-cloud/aws/create-cluster/
                          - listitem [ref=e127]:
                            - link "Create and Manage AWS EKS Cluster" [ref=e128] [cursor=pointer]:
                              - /url: /clusters/public-cloud/aws/eks/
                          - listitem [ref=e129]:
                            - generic [ref=e130]:
                              - link "EKS Hybrid Nodes" [ref=e131] [cursor=pointer]:
                                - /url: /clusters/public-cloud/aws/eks-hybrid-nodes/
                              - button "Toggle the collapsible sidebar category 'EKS Hybrid Nodes'" [ref=e132] [cursor=pointer]
                          - listitem [ref=e133]:
                            - link "Enable Secrets Encryption for EKS Cluster" [ref=e134] [cursor=pointer]:
                              - /url: /clusters/public-cloud/aws/enable-secrets-encryption-kms-key/
                          - listitem [ref=e135]:
                            - link "Enable Disk Encryption for EKS Cluster" [ref=e136] [cursor=pointer]:
                              - /url: /clusters/public-cloud/aws/enable-disk-encryption-eks-cluster/
                          - listitem [ref=e137]:
                            - link "Configure Karpenter for EKS Clusters" [ref=e138] [cursor=pointer]:
                              - /url: /clusters/public-cloud/aws/configure-karpenter-eks-clusters/
                          - listitem [ref=e139]:
                            - link "Required IAM Policies" [ref=e140] [cursor=pointer]:
                              - /url: /clusters/public-cloud/aws/required-iam-policies/
                      - listitem [ref=e141]:
                        - generic [ref=e142]:
                          - link "Azure" [ref=e143] [cursor=pointer]:
                            - /url: /clusters/public-cloud/azure/
                          - button "Toggle the collapsible sidebar category 'Azure'" [ref=e144] [cursor=pointer]
                      - listitem [ref=e145]:
                        - generic [ref=e146]:
                          - link "GCP" [ref=e147] [cursor=pointer]:
                            - /url: /clusters/public-cloud/gcp/
                          - button "Toggle the collapsible sidebar category 'GCP'" [ref=e148] [cursor=pointer]
                  - listitem [ref=e149]:
                    - generic [ref=e150]:
                      - link "Data Center Clusters" [ref=e151] [cursor=pointer]:
                        - /url: /clusters/data-center/
                        - img [ref=e153]
                        - text: Data Center Clusters
                      - button "Toggle the collapsible sidebar category 'Data Center Clusters'" [ref=e155] [cursor=pointer]
                  - listitem [ref=e156]:
                    - generic [ref=e157]:
                      - link "Edge" [ref=e158] [cursor=pointer]:
                        - /url: /clusters/edge/
                        - img [ref=e160]
                        - text: Edge
                      - button "Toggle the collapsible sidebar category 'Edge'" [ref=e162] [cursor=pointer]
                  - listitem [ref=e163]:
                    - generic [ref=e164]:
                      - link "Palette Virtual Clusters" [ref=e165] [cursor=pointer]:
                        - /url: /clusters/palette-virtual-clusters/
                        - img [ref=e167]
                        - text: Palette Virtual Clusters
                      - button "Toggle the collapsible sidebar category 'Palette Virtual Clusters'" [ref=e169] [cursor=pointer]
                  - listitem [ref=e170]:
                    - generic [ref=e171]:
                      - link "Imported Clusters" [ref=e172] [cursor=pointer]:
                        - /url: /clusters/imported-clusters/
                        - img [ref=e174]
                        - text: Imported Clusters
                      - button "Toggle the collapsible sidebar category 'Imported Clusters'" [ref=e176] [cursor=pointer]
                  - listitem [ref=e177]:
                    - generic [ref=e178]:
                      - link "Manage Clusters" [ref=e179] [cursor=pointer]:
                        - /url: /clusters/cluster-management/
                        - img [ref=e181]
                        - text: Manage Clusters
                      - button "Toggle the collapsible sidebar category 'Manage Clusters'" [ref=e183] [cursor=pointer]
                  - listitem [ref=e184]:
                    - generic [ref=e185]:
                      - link "Cluster Groups" [ref=e186] [cursor=pointer]:
                        - /url: /clusters/cluster-groups/
                        - img [ref=e188]
                        - text: Cluster Groups
                      - button "Toggle the collapsible sidebar category 'Cluster Groups'" [ref=e190] [cursor=pointer]
                  - listitem [ref=e191]:
                    - generic [ref=e192]:
                      - link "Private Cloud Gateway" [ref=e193] [cursor=pointer]:
                        - /url: /clusters/pcg/
                        - img [ref=e195]
                        - text: Private Cloud Gateway
                      - button "Toggle the collapsible sidebar category 'Private Cloud Gateway'" [ref=e197] [cursor=pointer]
              - listitem [ref=e198]:
                - generic [ref=e199]:
                  - link "Bring Your Own OS (BYOOS)" [ref=e200] [cursor=pointer]:
                    - /url: /byoos/
                    - img [ref=e202]
                    - text: Bring Your Own OS (BYOOS)
                  - button "Toggle the collapsible sidebar category 'Bring Your Own OS (BYOOS)'" [ref=e204] [cursor=pointer]
              - listitem [ref=e205]:
                - generic [ref=e206]:
                  - link "Palette Dev Engine" [ref=e207] [cursor=pointer]:
                    - /url: /devx/
                    - img [ref=e209]
                    - text: Palette Dev Engine
                  - button "Toggle the collapsible sidebar category 'Palette Dev Engine'" [ref=e211] [cursor=pointer]
              - listitem [ref=e212]:
                - generic [ref=e213]:
                  - link "Virtual Machine Orchestrator" [ref=e214] [cursor=pointer]:
                    - /url: /vm-management/
                    - img [ref=e216]
                    - text: Virtual Machine Orchestrator
                  - button "Toggle the collapsible sidebar category 'Virtual Machine Orchestrator'" [ref=e218] [cursor=pointer]
              - listitem [ref=e219]:
                - generic [ref=e220]:
                  - link "Workspaces" [ref=e221] [cursor=pointer]:
                    - /url: /workspace/
                    - img [ref=e223]
                    - text: Workspaces
                  - button "Toggle the collapsible sidebar category 'Workspaces'" [ref=e225] [cursor=pointer]
              - listitem [ref=e226]:
                - generic [ref=e227]:
                  - link "Packs List" [ref=e228] [cursor=pointer]:
                    - /url: /integrations/
                    - img [ref=e230]
                    - text: Packs List
                  - button "Toggle the collapsible sidebar category 'Packs List'" [ref=e232] [cursor=pointer]
              - listitem [ref=e233]:
                - generic [ref=e234]:
                  - link "User & Role Management" [ref=e235] [cursor=pointer]:
                    - /url: /user-management/
                    - img [ref=e237]
                    - text: User & Role Management
                  - button "Toggle the collapsible sidebar category 'User & Role Management'" [ref=e239] [cursor=pointer]
              - listitem [ref=e240]:
                - generic [ref=e241]:
                  - link "Registries and Packs" [ref=e242] [cursor=pointer]:
                    - /url: /registries-and-packs/
                    - img [ref=e244]
                    - text: Registries and Packs
                  - button "Toggle the collapsible sidebar category 'Registries and Packs'" [ref=e246] [cursor=pointer]
              - listitem [ref=e247]:
                - generic [ref=e248]:
                  - link "Security" [ref=e249] [cursor=pointer]:
                    - /url: /security/
                    - img [ref=e251]
                    - text: Security
                  - button "Toggle the collapsible sidebar category 'Security'" [ref=e253] [cursor=pointer]
              - listitem [ref=e254]:
                - generic [ref=e255]:
                  - link "Audit Logs" [ref=e256] [cursor=pointer]:
                    - /url: /audit-logs/
                    - img [ref=e258]
                    - text: Audit Logs
                  - button "Toggle the collapsible sidebar category 'Audit Logs'" [ref=e260] [cursor=pointer]
              - listitem [ref=e261]:
                - generic [ref=e262]:
                  - link "Self-Hosted Palette" [ref=e263] [cursor=pointer]:
                    - /url: /enterprise-version/
                    - img [ref=e265]
                    - text: Self-Hosted Palette
                  - button "Toggle the collapsible sidebar category 'Self-Hosted Palette'" [ref=e267] [cursor=pointer]
              - listitem [ref=e268]:
                - generic [ref=e269]:
                  - link "Palette VerteX" [ref=e270] [cursor=pointer]:
                    - /url: /vertex/
                    - img [ref=e272]
                    - text: Palette VerteX
                  - button "Toggle the collapsible sidebar category 'Palette VerteX'" [ref=e274] [cursor=pointer]
              - listitem [ref=e275]:
                - generic [ref=e276]:
                  - link "Tenant Administration" [ref=e277] [cursor=pointer]:
                    - /url: /tenant-settings/
                    - img [ref=e279]
                    - text: Tenant Administration
                  - button "Toggle the collapsible sidebar category 'Tenant Administration'" [ref=e281] [cursor=pointer]
              - listitem [ref=e282]:
                - generic [ref=e283]:
                  - link "Automation" [ref=e284] [cursor=pointer]:
                    - /url: /automation/
                    - img [ref=e286]
                    - text: Automation
                  - button "Toggle the collapsible sidebar category 'Automation'" [ref=e288] [cursor=pointer]
              - listitem [ref=e289]:
                - generic [ref=e290]:
                  - link "Troubleshooting" [ref=e291] [cursor=pointer]:
                    - /url: /troubleshooting/
                    - img [ref=e293]
                    - text: Troubleshooting
                  - button "Toggle the collapsible sidebar category 'Troubleshooting'" [ref=e295] [cursor=pointer]
              - listitem [ref=e296]:
                - link "Glossary" [ref=e297] [cursor=pointer]:
                  - /url: /glossary-all/
                  - img [ref=e299]
                  - text: Glossary
              - listitem [ref=e301]:
                - generic [ref=e302]:
                  - link "Compliance & Legal" [ref=e303] [cursor=pointer]:
                    - /url: /legal-licenses/
                    - img [ref=e305]
                    - text: Compliance & Legal
                  - button "Toggle the collapsible sidebar category 'Compliance & Legal'" [ref=e307] [cursor=pointer]
              - listitem [ref=e308]:
                - button "Privacy Settings" [ref=e309] [cursor=pointer]:
                  - img [ref=e310]
                  - text: Privacy Settings
      - main [ref=e312]:
        - generic [ref=e314]:
          - generic [ref=e316]:
            - article [ref=e317]:
              - navigation "Breadcrumbs" [ref=e318]:
                - list [ref=e319]:
                  - listitem [ref=e320]:
                    - link "Home page" [ref=e321] [cursor=pointer]:
                      - /url: /
                      - img [ref=e322]
                  - listitem [ref=e324]:
                    - link "Clusters" [ref=e325] [cursor=pointer]:
                      - /url: /clusters/
                  - listitem [ref=e326]:
                    - link "Public Cloud Clusters" [ref=e327] [cursor=pointer]:
                      - /url: /clusters/public-cloud/
                  - listitem [ref=e328]:
                    - link "AWS" [ref=e329] [cursor=pointer]:
                      - /url: /clusters/public-cloud/aws/
                  - listitem [ref=e330]:
                    - generic [ref=e331]: Configure Karpenter for EKS Clusters
              - generic [ref=e332]:
                - heading "Configure Karpenter for EKS Clusters" [level=1] [ref=e334]
                - paragraph [ref=e335]:
                  - text: The
                  - link "Karpenter" [ref=e336] [cursor=pointer]:
                    - /url: /integrations/packs/?pack=karpenter
                  - text: pack can be installed on Amazon EKS clusters for enhanced node provisioning.
                - paragraph [ref=e337]: Karpenter analyzes pending pods and launches the most efficient Amazon Elastic Compute Cloud (EC2) capacity across instance types, sizes, Availability Zones, and more. As demand falls, it gracefully drains and removes underutilized nodes to reduce waste, whilst respecting any scheduling rules in place (labels, taints, and affinities).
                - heading "Install the Karpenter PackDirect link to Install the Karpenter Pack" [level=2] [ref=e338]:
                  - text: Install the Karpenter Pack
                  - link "Direct link to Install the Karpenter Pack" [ref=e339] [cursor=pointer]:
                    - /url: "#install-the-karpenter-pack"
                    - text: "#"
                - paragraph [ref=e340]: The following section outlines the prerequisites and steps to install the Karpenter pack on an existing EKS cluster managed by Palette.
                - heading "PrerequisitesDirect link to Prerequisites" [level=3] [ref=e341]:
                  - text: Prerequisites
                  - link "Direct link to Prerequisites" [ref=e342] [cursor=pointer]:
                    - /url: "#prerequisites"
                    - text: "#"
                - list [ref=e343]:
                  - listitem [ref=e344]:
                    - paragraph [ref=e345]:
                      - text: An existing EKS cluster managed by Palette. Refer to
                      - link "Create and Manage EKS Cluster" [ref=e346] [cursor=pointer]:
                        - /url: /clusters/public-cloud/aws/eks/
                      - text: for guidance on creating an EKS cluster with Palette.
                  - listitem [ref=e347]:
                    - paragraph [ref=e348]:
                      - text: Your Palette account must have the Cluster Profile Editor and Cluster Editor permissions to install the Karpenter pack. Refer to our
                      - link "Cluster Profile" [ref=e349] [cursor=pointer]:
                        - /url: /user-management/palette-rbac/project-scope-roles-permissions/#cluster-profile
                      - text: and
                      - link "Cluster" [ref=e350] [cursor=pointer]:
                        - /url: /user-management/palette-rbac/project-scope-roles-permissions/#cluster
                      - text: role reference guides for more information about roles and permissions.
                  - listitem [ref=e351]:
                    - paragraph [ref=e352]:
                      - text: An Identity and Access Management (IAM) policy must be created using the following JSON template. This policy grants Karpenter the necessary permissions to manage EC2 instances and interact with the EKS cluster. When following the
                      - link "Enablement Steps" [ref=e353] [cursor=pointer]:
                        - /url: "#enablement-steps"
                      - text: section, you will reference this policy when configuring the Karpenter controller role in the cluster profile. For the sake of simplicity, the policy is named
                      - code [ref=e354]: karpenterControllerPolicy
                      - text: . If you choose a different name, ensure you reference that name in the
                      - link "Enablement Steps" [ref=e355] [cursor=pointer]:
                        - /url: "#enablement-steps"
                      - text: section.
                    - paragraph [ref=e356]: "Replace the following placeholders in the policy template:"
                    - list [ref=e357]:
                      - listitem [ref=e358]:
                        - code [ref=e359]: <aws-partition>
                        - text: "- The AWS partition. This is usually"
                        - code [ref=e360]: aws
                        - text: for commercial regions,
                        - code [ref=e361]: aws-cn
                        - text: for China regions, or
                        - code [ref=e362]: aws-us-gov
                        - text: for GovCloud.
                      - listitem [ref=e363]:
                        - code [ref=e364]: <aws-account-id>
                        - text: "- Your AWS account ID."
                      - listitem [ref=e365]:
                        - code [ref=e366]: <eks-cluster-name>
                        - text: "- The name of your EKS cluster."
                      - listitem [ref=e367]:
                        - code [ref=e368]: <aws-region>
                        - text: "- The AWS region where your EKS cluster is located."
                    - generic [ref=e369]:
                      - generic [ref=e370]: Policy template
                      - generic [ref=e371]:
                        - code [ref=e373]:
                          - generic [ref=e374]: "{"
                          - generic [ref=e375]: "\"Version\": \"2012-10-17\","
                          - generic [ref=e376]: "\"Statement\": ["
                          - generic [ref=e377]: "{"
                          - generic [ref=e378]: "\"Action\": ["
                          - generic [ref=e379]: "\"ssm:GetParameter\","
                          - generic [ref=e380]: "\"ec2:DescribeImages\","
                          - generic [ref=e381]: "\"ec2:RunInstances\","
                          - generic [ref=e382]: "\"ec2:DescribeSubnets\","
                          - generic [ref=e383]: "\"ec2:DescribeSecurityGroups\","
                          - generic [ref=e384]: "\"ec2:DescribeLaunchTemplates\","
                          - generic [ref=e385]: "\"ec2:DescribeInstances\","
                          - generic [ref=e386]: "\"ec2:DescribeInstanceTypes\","
                          - generic [ref=e387]: "\"ec2:DescribeInstanceTypeOfferings\","
                          - generic [ref=e388]: "\"ec2:DeleteLaunchTemplate\","
                          - generic [ref=e389]: "\"ec2:CreateTags\","
                          - generic [ref=e390]: "\"ec2:CreateLaunchTemplate\","
                          - generic [ref=e391]: "\"ec2:CreateFleet\","
                          - generic [ref=e392]: "\"ec2:DescribeSpotPriceHistory\","
                          - generic [ref=e393]: "\"pricing:GetProducts\""
                          - generic [ref=e394]: "],"
                          - generic [ref=e395]: "\"Effect\": \"Allow\","
                          - generic [ref=e396]: "\"Resource\": \"*\","
                          - generic [ref=e397]: "\"Sid\": \"Karpenter\""
                          - generic [ref=e398]: "},"
                          - generic [ref=e399]: "{"
                          - generic [ref=e400]: "\"Action\": \"ec2:TerminateInstances\","
                          - generic [ref=e401]: "\"Condition\": {"
                          - generic [ref=e402]: "\"StringLike\": {"
                          - generic [ref=e403]: "\"ec2:ResourceTag/karpenter.sh/nodepool\": \"*\""
                          - generic [ref=e404]: "}"
                          - generic [ref=e405]: "},"
                          - generic [ref=e406]: "\"Effect\": \"Allow\","
                          - generic [ref=e407]: "\"Resource\": \"*\","
                          - generic [ref=e408]: "\"Sid\": \"ConditionalEC2Termination\""
                          - generic [ref=e409]: "},"
                          - generic [ref=e410]: "{"
                          - generic [ref=e411]: "\"Effect\": \"Allow\","
                          - generic [ref=e412]: "\"Action\": \"iam:PassRole\","
                          - generic [ref=e413]: "\"Resource\": \"arn:<aws-partition>:iam::<aws-account-id>:role/KarpenterNodeRole-<eks-cluster-name>\","
                          - generic [ref=e414]: "\"Sid\": \"PassNodeIAMRole\""
                          - generic [ref=e415]: "},"
                          - generic [ref=e416]: "{"
                          - generic [ref=e417]: "\"Effect\": \"Allow\","
                          - generic [ref=e418]: "\"Action\": \"eks:DescribeCluster\","
                          - generic [ref=e419]: "\"Resource\": \"arn:<aws-partition>:eks:<aws-region>:<aws-account-id>:cluster/<eks-cluster-name>\","
                          - generic [ref=e420]: "\"Sid\": \"EKSClusterEndpointLookup\""
                          - generic [ref=e421]: "},"
                          - generic [ref=e422]: "{"
                          - generic [ref=e423]: "\"Sid\": \"AllowScopedInstanceProfileCreationActions\","
                          - generic [ref=e424]: "\"Effect\": \"Allow\","
                          - generic [ref=e425]: "\"Resource\": \"*\","
                          - generic [ref=e426]: "\"Action\": [\"iam:CreateInstanceProfile\"],"
                          - generic [ref=e427]: "\"Condition\": {"
                          - generic [ref=e428]: "\"StringEquals\": {"
                          - generic [ref=e429]: "\"aws:RequestTag/kubernetes.io/cluster/<eks-cluster-name>\": \"owned\","
                          - generic [ref=e430]: "\"aws:RequestTag/topology.kubernetes.io/region\": \"<aws-region>\""
                          - generic [ref=e431]: "},"
                          - generic [ref=e432]: "\"StringLike\": {"
                          - generic [ref=e433]: "\"aws:RequestTag/karpenter.k8s.aws/ec2nodeclass\": \"*\""
                          - generic [ref=e434]: "}"
                          - generic [ref=e435]: "}"
                          - generic [ref=e436]: "},"
                          - generic [ref=e437]: "{"
                          - generic [ref=e438]: "\"Sid\": \"AllowScopedInstanceProfileTagActions\","
                          - generic [ref=e439]: "\"Effect\": \"Allow\","
                          - generic [ref=e440]: "\"Resource\": \"*\","
                          - generic [ref=e441]: "\"Action\": [\"iam:TagInstanceProfile\"],"
                          - generic [ref=e442]: "\"Condition\": {"
                          - generic [ref=e443]: "\"StringEquals\": {"
                          - generic [ref=e444]: "\"aws:ResourceTag/kubernetes.io/cluster/<eks-cluster-name>\": \"owned\","
                          - generic [ref=e445]: "\"aws:ResourceTag/topology.kubernetes.io/region\": \"<aws-region>\","
                          - generic [ref=e446]: "\"aws:RequestTag/kubernetes.io/cluster/<eks-cluster-name>\": \"owned\","
                          - generic [ref=e447]: "\"aws:RequestTag/topology.kubernetes.io/region\": \"<aws-region>\""
                          - generic [ref=e448]: "},"
                          - generic [ref=e449]: "\"StringLike\": {"
                          - generic [ref=e450]: "\"aws:ResourceTag/karpenter.k8s.aws/ec2nodeclass\": \"*\","
                          - generic [ref=e451]: "\"aws:RequestTag/karpenter.k8s.aws/ec2nodeclass\": \"*\""
                          - generic [ref=e452]: "}"
                          - generic [ref=e453]: "}"
                          - generic [ref=e454]: "},"
                          - generic [ref=e455]: "{"
                          - generic [ref=e456]: "\"Sid\": \"AllowScopedInstanceProfileActions\","
                          - generic [ref=e457]: "\"Effect\": \"Allow\","
                          - generic [ref=e458]: "\"Resource\": \"*\","
                          - generic [ref=e459]: "\"Action\": [\"iam:AddRoleToInstanceProfile\", \"iam:RemoveRoleFromInstanceProfile\", \"iam:DeleteInstanceProfile\"],"
                          - generic [ref=e460]: "\"Condition\": {"
                          - generic [ref=e461]: "\"StringEquals\": {"
                          - generic [ref=e462]: "\"aws:ResourceTag/kubernetes.io/cluster/<eks-cluster-name>\": \"owned\","
                          - generic [ref=e463]: "\"aws:ResourceTag/topology.kubernetes.io/region\": \"<aws-region>\""
                          - generic [ref=e464]: "},"
                          - generic [ref=e465]: "\"StringLike\": {"
                          - generic [ref=e466]: "\"aws:ResourceTag/karpenter.k8s.aws/ec2nodeclass\": \"*\""
                          - generic [ref=e467]: "}"
                          - generic [ref=e468]: "}"
                          - generic [ref=e469]: "},"
                          - generic [ref=e470]: "{"
                          - generic [ref=e471]: "\"Sid\": \"AllowInstanceProfileReadActions\","
                          - generic [ref=e472]: "\"Effect\": \"Allow\","
                          - generic [ref=e473]: "\"Resource\": \"*\","
                          - generic [ref=e474]: "\"Action\": \"iam:GetInstanceProfile\""
                          - generic [ref=e475]: "},"
                          - generic [ref=e476]: "{"
                          - generic [ref=e477]: "\"Sid\": \"AllowUnscopedInstanceProfileListAction\","
                          - generic [ref=e478]: "\"Effect\": \"Allow\","
                          - generic [ref=e479]: "\"Resource\": \"*\","
                          - generic [ref=e480]: "\"Action\": \"iam:ListInstanceProfiles\""
                          - generic [ref=e481]: "}"
                          - generic [ref=e482]: "]"
                          - generic [ref=e483]: "}"
                        - generic [ref=e484]:
                          - button "Toggle word wrap" [ref=e485] [cursor=pointer]:
                            - img [ref=e486]
                          - button "Copy code to clipboard" [ref=e488] [cursor=pointer]:
                            - generic [ref=e489]:
                              - img [ref=e490]
                              - img [ref=e492]
                    - group [ref=e494]:
                      - generic "Click to display an example policy with placeholders replaced" [ref=e495] [cursor=pointer]
                  - listitem [ref=e496]:
                    - paragraph [ref=e497]:
                      - text: The subnets and security groups associated with your EKS cluster must be tagged appropriately to allow Karpenter to discover and use them. The exception to this is the
                      - link "default cluster security group" [ref=e498] [cursor=pointer]:
                        - /url: https://docs.aws.amazon.com/eks/latest/userguide/sec-group-reqs.html#security-group-default-rules
                      - text: as Amazon EKS automatically removes any user-defined tags when the cluster is updated.
                    - paragraph [ref=e499]:
                      - text: Ensure the following tag is applied to both the subnets and security groups associated with the EKS cluster. Replace
                      - code [ref=e500]: <eks-cluster-name>
                      - text: with the name of your EKS cluster.
                    - generic [ref=e502]:
                      - code [ref=e504]:
                        - generic [ref=e505]: Key=karpenter.sh/discovery,Value=<eks-cluster-name>
                      - button "Copy code to clipboard" [ref=e507] [cursor=pointer]:
                        - generic [ref=e508]:
                          - img [ref=e509]
                          - img [ref=e511]
                    - generic [ref=e513]:
                      - generic [ref=e514]:
                        - img [ref=e516]
                        - text: tip
                      - generic [ref=e518]:
                        - paragraph [ref=e519]:
                          - text: The Karpenter documentation provides an efficient method to tag the subnets and security groups using the AWS CLI. You can find this method in the
                          - link "Karpenter documentation" [ref=e520] [cursor=pointer]:
                            - /url: https://karpenter.sh/docs/getting-started/migrating-from-cas/#add-tags-to-subnets-and-security-groups
                          - text: .
                        - paragraph [ref=e521]: "If using this method, note the following:"
                        - list [ref=e522]:
                          - listitem [ref=e523]:
                            - paragraph [ref=e524]: The command to tag the subnets uses the existing node groups in the cluster to identify the subnets. If your node groups are only assigned to use a subset of the cluster's subnets, you may need to manually tag any additional subnets not associated with the node groups.
                          - listitem [ref=e525]:
                            - paragraph [ref=e526]:
                              - text: If you are using a Z shell (ZSH), the final command to tag the security groups needs to be modified slightly. Change
                              - code [ref=e527]: "--resources \"${SECURITY_GROUPS}\""
                              - text: to
                              - code [ref=e528]: "--resources \"${=SECURITY_GROUPS}\""
                              - text: to ensure proper execution in ZSH. This is only required if you have more than one security group to tag.
                - heading "Enablement StepsDirect link to Enablement Steps" [level=3] [ref=e529]:
                  - text: Enablement Steps
                  - link "Direct link to Enablement Steps" [ref=e530] [cursor=pointer]:
                    - /url: "#enablement-steps"
                    - text: "#"
                - list [ref=e531]:
                  - listitem [ref=e532]:
                    - paragraph [ref=e533]:
                      - text: Log in to
                      - link "Palette" [ref=e534] [cursor=pointer]:
                        - /url: https://console.spectrocloud.com
                      - text: .
                  - listitem [ref=e535]:
                    - paragraph [ref=e536]:
                      - text: From the left main menu, select
                      - strong [ref=e537]: Profiles
                      - text: .
                  - listitem [ref=e538]:
                    - paragraph [ref=e539]: Select the profile associated with your EKS cluster.
                  - listitem [ref=e540]:
                    - paragraph [ref=e541]:
                      - text: Click on the version drop-down and select
                      - strong [ref=e542]: Create new version
                      - text: .
                  - listitem [ref=e543]:
                    - paragraph [ref=e544]:
                      - text: Create a new version of the profile. For more information, refer to
                      - link "Version a Cluster Profile" [ref=e545] [cursor=pointer]:
                        - /url: /profiles/cluster-profiles/modify-cluster-profiles/version-cluster-profile/
                      - text: .
                  - listitem [ref=e546]:
                    - paragraph [ref=e547]:
                      - text: Click on the
                      - strong [ref=e548]: Kubernetes
                      - text: layer to edit the configuration.
                  - listitem [ref=e549]:
                    - paragraph [ref=e550]:
                      - text: In
                      - strong [ref=e551]: Pack Details
                      - text: ", select the"
                      - strong [ref=e552]: Values
                      - text: option.
                  - listitem [ref=e553]:
                    - paragraph [ref=e554]:
                      - text: In the YAML editor, add an entry to the
                      - code [ref=e555]: managedControlPlane.irsaRoles
                      - text: section for the Karpenter controller role. This entry references the IAM policy you created for the prerequisites. Replace
                      - code [ref=e556]: <aws-partition>
                      - text: and
                      - code [ref=e557]: <aws-account-id>
                      - text: with your AWS partition and account ID, respectively. If you named the policy something other than
                      - code [ref=e558]: karpenterControllerPolicy
                      - text: ", ensure you use that name in the ARN."
                    - generic [ref=e559]:
                      - generic [ref=e560]: Entry template
                      - generic [ref=e561]:
                        - code [ref=e563]:
                          - generic [ref=e564]: "managedControlPlane:"
                          - generic [ref=e565]: ...
                          - generic [ref=e566]: "irsaRoles:"
                          - generic [ref=e567]: ...
                          - generic [ref=e568]: "- name: \"{{.spectro.system.cluster.name}}-karpenterControllerRole\""
                          - generic [ref=e569]: "policies:"
                          - generic [ref=e570]: "- arn:<aws-partition>:iam::<aws-account-id>:policy/karpenterControllerPolicy"
                          - generic [ref=e571]: "serviceAccount:"
                          - generic [ref=e572]: "name: karpenter"
                          - generic [ref=e573]: "namespace: karpenter"
                        - generic [ref=e574]:
                          - button "Toggle word wrap" [ref=e575] [cursor=pointer]:
                            - img [ref=e576]
                          - button "Copy code to clipboard" [ref=e578] [cursor=pointer]:
                            - generic [ref=e579]:
                              - img [ref=e580]
                              - img [ref=e582]
                    - generic [ref=e584]:
                      - generic [ref=e585]: Example entry
                      - generic [ref=e586]:
                        - code [ref=e588]:
                          - generic [ref=e589]: "managedControlPlane:"
                          - generic [ref=e590]: ...
                          - generic [ref=e591]: "irsaRoles:"
                          - generic [ref=e592]: ...
                          - generic [ref=e593]: "- name: \"{{.spectro.system.cluster.name}}-karpenterControllerRole\""
                          - generic [ref=e594]: "policies:"
                          - generic [ref=e595]: "- arn:aws:iam::123456789012:policy/karpenterControllerPolicy"
                          - generic [ref=e596]: "serviceAccount:"
                          - generic [ref=e597]: "name: karpenter"
                          - generic [ref=e598]: "namespace: karpenter"
                        - button "Toggle word wrap" [ref=e600] [cursor=pointer]:
                          - img [ref=e601]
                    - paragraph [ref=e603]:
                      - text: Palette automatically creates the IAM role named
                      - code [ref=e604]: "{{.spectro.system.cluster.name}}-karpenterControllerRole"
                      - text: (for example,
                      - code [ref=e605]: my-eks-cluster-karpenterControllerRole
                      - text: ) when the Karpenter pack is deployed to your cluster.
                  - listitem [ref=e606]:
                    - paragraph [ref=e607]:
                      - text: In the YAML editor, add an entry to the
                      - code [ref=e608]: managedControlPlane.iamAuthenticatorConfig.mapRoles
                      - text: and
                      - code [ref=e609]: managedMachinePool.roleName
                      - text: sections for the IAM node role that will be used by Karpenter provisioned nodes. Replace
                      - code [ref=e610]: <aws-partition>
                      - text: ","
                      - code [ref=e611]: <aws-account-id>
                      - text: ", and"
                      - code [ref=e612]: <eks-cluster-name>
                      - text: with your AWS partition, account ID, and EKS cluster name, respectively.
                    - generic [ref=e613]:
                      - generic [ref=e614]: Entry template
                      - generic [ref=e615]:
                        - code [ref=e617]:
                          - generic [ref=e618]: "managedControlPlane:"
                          - generic [ref=e619]: ...
                          - generic [ref=e620]: "iamAuthenticatorConfig:"
                          - generic [ref=e621]: "mapRoles:"
                          - generic [ref=e622]: ...
                          - generic [ref=e623]: "- rolearn: arn:<aws-partition>:iam::<aws-account-id>:role/{{.spectro.system.cluster.name}}-nodeRole\""
                          - generic [ref=e624]: "username: system:node:{{EC2PrivateDNSName}}"
                          - generic [ref=e625]: "groups:"
                          - generic [ref=e626]: "- system:bootstrappers"
                          - generic [ref=e627]: "- system:nodes"
                          - generic [ref=e628]: ...
                          - generic [ref=e629]: "managedMachinePool:"
                          - generic [ref=e630]: "roleName: \"{{.spectro.system.cluster.name}}-nodeRole\""
                        - generic [ref=e631]:
                          - button "Toggle word wrap" [ref=e632] [cursor=pointer]:
                            - img [ref=e633]
                          - button "Copy code to clipboard" [ref=e635] [cursor=pointer]:
                            - generic [ref=e636]:
                              - img [ref=e637]
                              - img [ref=e639]
                    - generic [ref=e641]:
                      - generic [ref=e642]: Example entry
                      - generic [ref=e643]:
                        - code [ref=e645]:
                          - generic [ref=e646]: "managedControlPlane:"
                          - generic [ref=e647]: ...
                          - generic [ref=e648]: "iamAuthenticatorConfig:"
                          - generic [ref=e649]: "mapRoles:"
                          - generic [ref=e650]: ...
                          - generic [ref=e651]: "- rolearn: arn:aws:iam::123456789012:role/{{.spectro.system.cluster.name}}-nodeRole"
                          - generic [ref=e652]: "username: system:node:{{EC2PrivateDNSName}}"
                          - generic [ref=e653]: "groups:"
                          - generic [ref=e654]: "- system:bootstrappers"
                          - generic [ref=e655]: "- system:nodes"
                          - generic [ref=e656]: ...
                          - generic [ref=e657]: "managedMachinePool:"
                          - generic [ref=e658]: "roleName: \"{{.spectro.system.cluster.name}}-nodeRole\""
                        - button "Toggle word wrap" [ref=e660] [cursor=pointer]:
                          - img [ref=e661]
                    - paragraph [ref=e663]:
                      - text: Palette automatically creates the IAM role named
                      - code [ref=e664]: "{{.spectro.system.cluster.name}}-nodeRole"
                      - text: (for example,
                      - code [ref=e665]: my-eks-cluster-nodeRole
                      - text: ) when the Karpenter pack is deployed to your cluster.
                  - listitem [ref=e666]:
                    - paragraph [ref=e667]:
                      - text: Click
                      - strong [ref=e668]: Confirm Updates
                      - text: to save the changes to the Kubernetes layer.
                  - listitem [ref=e669]:
                    - paragraph [ref=e670]:
                      - text: On the cluster profile page, click
                      - strong [ref=e671]: Add New Pack
                      - text: .
                  - listitem [ref=e672]:
                    - paragraph [ref=e673]:
                      - text: Enter
                      - code [ref=e674]: Karpenter
                      - text: in the search box and select the Karpenter pack from the list.
                  - listitem [ref=e675]:
                    - paragraph [ref=e676]:
                      - text: In
                      - strong [ref=e677]: Pack Details
                      - text: ", select the"
                      - strong [ref=e678]: Values
                      - text: option.
                  - listitem [ref=e679]:
                    - paragraph [ref=e680]:
                      - text: In the YAML editor, add your AWS Account ID to the
                      - code [ref=e681]: awsAccountNumber
                      - text: field.
                    - generic [ref=e682]:
                      - generic [ref=e683]: Example entry
                      - code [ref=e686]:
                        - generic [ref=e687]: "awsAccountNumber: \"123456789012\""
                  - listitem [ref=e688]:
                    - paragraph [ref=e689]:
                      - text: Click
                      - strong [ref=e690]: Confirm & Create
                      - text: .
                  - listitem [ref=e691]:
                    - paragraph [ref=e692]:
                      - text: Click
                      - strong [ref=e693]: Save Changes
                      - text: to save the new profile version.
                  - listitem [ref=e694]:
                    - paragraph [ref=e695]:
                      - text: From the left main menu, select
                      - strong [ref=e696]: Clusters
                      - text: and select your EKS cluster from the list.
                  - listitem [ref=e697]:
                    - paragraph [ref=e698]:
                      - text: Select the
                      - strong [ref=e699]: Profile
                      - text: tab.
                  - listitem [ref=e700]:
                    - paragraph [ref=e701]:
                      - text: Click the version drop-down for the
                      - strong [ref=e702]: INFRASTRUCTURE LAYERS
                      - text: and select the new profile version you created. The Karpenter pack then appears under the
                      - strong [ref=e703]: ADDON LAYERS
                      - text: section.
                  - listitem [ref=e704]:
                    - paragraph [ref=e705]:
                      - text: Click
                      - strong [ref=e706]: Review & Save
                      - text: ", followed by"
                      - strong [ref=e707]: Review changes in Editor
                      - text: in the pop-up window.
                  - listitem [ref=e708]:
                    - paragraph [ref=e709]:
                      - text: Review the changes and click
                      - strong [ref=e710]: Update
                      - text: to apply the new profile version to your cluster.
                    - generic [ref=e711]:
                      - generic [ref=e712]:
                        - img [ref=e714]
                        - text: caution
                      - paragraph [ref=e717]:
                        - text: A
                        - link "Full cluster repave" [ref=e718] [cursor=pointer]:
                          - /url: /clusters/cluster-management/node-pool/#repave-behavior-and-configuration
                          - strong [ref=e719]: Full cluster repave
                        - text: is required to apply the changes, which can affect cluster availability. Ensure you plan accordingly.
                  - listitem [ref=e720]:
                    - paragraph [ref=e721]: Wait for the cluster repave to complete and the Karpenter pack to be deployed. This may take up to 10 minutes or more depending on the amount of worker nodes in your cluster.
                - heading "ValidateDirect link to Validate" [level=3] [ref=e722]:
                  - text: Validate
                  - link "Direct link to Validate" [ref=e723] [cursor=pointer]:
                    - /url: "#validate"
                    - text: "#"
                - list [ref=e724]:
                  - listitem [ref=e725]:
                    - paragraph [ref=e726]:
                      - text: Log in to
                      - link "Palette" [ref=e727] [cursor=pointer]:
                        - /url: https://console.spectrocloud.com
                      - text: .
                  - listitem [ref=e728]:
                    - paragraph [ref=e729]:
                      - text: From the left main menu, select
                      - strong [ref=e730]: Clusters
                      - text: and select your EKS cluster from the list.
                  - listitem [ref=e731]:
                    - paragraph [ref=e732]:
                      - text: On the
                      - strong [ref=e733]: Overview
                      - text: tab, check that the
                      - strong [ref=e734]: Cluster Status
                      - text: is
                      - strong [ref=e735]: Running
                      - text: without a loading icon and the
                      - strong [ref=e736]: Health
                      - text: shows
                      - strong [ref=e737]: Healthy
                      - text: .
                  - listitem [ref=e738]:
                    - paragraph [ref=e739]:
                      - text: Verify that the Karpenter pack is listed under the
                      - strong [ref=e740]: Cluster Profiles
                      - text: section with a green circle indicating that it is successfully deployed.
                - heading "Configure Karpenter NodePoolsDirect link to Configure Karpenter NodePools" [level=2] [ref=e741]:
                  - text: Configure Karpenter NodePools
                  - link "Direct link to Configure Karpenter NodePools" [ref=e742] [cursor=pointer]:
                    - /url: "#configure-karpenter-nodepools"
                    - text: "#"
                - paragraph [ref=e743]:
                  - text: The following steps show how to configure
                  - link "Karpenter NodePools" [ref=e744] [cursor=pointer]:
                    - /url: https://karpenter.sh/docs/concepts/nodepools/
                  - text: for your Amazon EKS cluster. NodePools define provisioning constraints, while the associated
                  - link "NodeClass" [ref=e745] [cursor=pointer]:
                    - /url: https://karpenter.sh/docs/concepts/nodeclasses/
                  - text: specifies cloud settings such as the Amazon Machine Image (AMI), subnets, and security groups.
                - paragraph [ref=e746]: These steps show you how to create a default NodePool, but you can create multiple NodePools to meet your specific requirements.
                - heading "PrerequisitesDirect link to Prerequisites" [level=3] [ref=e747]:
                  - text: Prerequisites
                  - link "Direct link to Prerequisites" [ref=e748] [cursor=pointer]:
                    - /url: "#prerequisites-1"
                    - text: "#"
                - list [ref=e749]:
                  - listitem [ref=e750]:
                    - text: Your Palette account must have the Cluster Profile Editor and Cluster Editor permissions to configure Karpenter NodePools. Refer to our
                    - link "Cluster Profile" [ref=e751] [cursor=pointer]:
                      - /url: /user-management/palette-rbac/project-scope-roles-permissions/#cluster-profile
                    - text: and
                    - link "Cluster" [ref=e752] [cursor=pointer]:
                      - /url: /user-management/palette-rbac/project-scope-roles-permissions/#cluster
                    - text: role reference guides for more information about roles and permissions.
                - heading "Enablement StepsDirect link to Enablement Steps" [level=3] [ref=e753]:
                  - text: Enablement Steps
                  - link "Direct link to Enablement Steps" [ref=e754] [cursor=pointer]:
                    - /url: "#enablement-steps-1"
                    - text: "#"
                - list [ref=e755]:
                  - listitem [ref=e756]:
                    - paragraph [ref=e757]:
                      - text: Log in to
                      - link "Palette" [ref=e758] [cursor=pointer]:
                        - /url: https://console.spectrocloud.com
                      - text: .
                  - listitem [ref=e759]:
                    - paragraph [ref=e760]:
                      - text: From the left main menu, select
                      - strong [ref=e761]: Profiles
                      - text: .
                  - listitem [ref=e762]:
                    - paragraph [ref=e763]:
                      - text: Click
                      - strong [ref=e764]: Add Cluster Profile
                      - text: .
                  - listitem [ref=e765]:
                    - paragraph [ref=e766]:
                      - text: Fill in the basic information for the new profile and ensure the
                      - strong [ref=e767]: Type
                      - text: is set to
                      - strong [ref=e768]: Add-on
                      - text: .
                    - paragraph [ref=e769]:
                      - text: The profile name should reflect its purpose, for example,
                      - code [ref=e770]: karpenter-node-pool-my-eks-cluster
                      - text: .
                  - listitem [ref=e771]:
                    - paragraph [ref=e772]:
                      - text: After you fill out the required information, click
                      - strong [ref=e773]: Next
                      - text: .
                  - listitem [ref=e774]:
                    - paragraph [ref=e775]:
                      - text: Click
                      - strong [ref=e776]: Add Manifest
                      - text: .
                  - listitem [ref=e777]:
                    - paragraph [ref=e778]:
                      - text: Provide a name for the manifest layer, such as
                      - code [ref=e779]: karpenter-nodepool-layer
                      - text: .
                  - listitem [ref=e780]:
                    - paragraph [ref=e781]:
                      - text: Click the
                      - strong [ref=e782]: New manifest
                      - text: option and provide a name for the manifest, such as
                      - code [ref=e783]: karpenter-nodepool-manifest
                      - text: . Click the tick icon to save the name.
                  - listitem [ref=e784]:
                    - paragraph [ref=e785]:
                      - text: In the YAML editor, add a Karpenter NodePool configuration. You can customize this configuration to meet your specific requirements. The
                      - link "Karpenter documentation" [ref=e786] [cursor=pointer]:
                        - /url: https://karpenter.sh/docs/concepts/
                      - text: provides comprehensive information on the various configuration options. Refer to the
                      - link "Karpenter NodePool examples" [ref=e787] [cursor=pointer]:
                        - /url: https://github.com/aws/karpenter-provider-aws/tree/main/examples/v1
                      - text: for configuration samples covering a variety of use cases.
                    - paragraph [ref=e788]:
                      - text: In the following example, we create a NodePool named
                      - code [ref=e789]: default
                      - text: that provisions on-demand instances of the
                      - code [ref=e790]: c
                      - text: ","
                      - code [ref=e791]: m
                      - text: ", and"
                      - code [ref=e792]: r
                      - link "instance series" [ref=e793] [cursor=pointer]:
                        - /url: https://docs.aws.amazon.com/ec2/latest/instancetypes/instance-type-names.html
                      - text: . The instance generation is set to greater than
                      - code [ref=e794]: "2"
                      - text: . The NodePool uses a NodeClass named
                      - code [ref=e795]: al2023-20250920
                      - text: that references the Amazon Linux 2023 AMI alias of
                      - code [ref=e796]: al2023@v20250920
                      - text: .
                    - paragraph [ref=e797]: "There are three important aspects to note in this configuration:"
                    - list [ref=e798]:
                      - listitem [ref=e799]:
                        - text: The
                        - code [ref=e800]: spec.role
                        - text: field in the NodeClass must match the node role created in the Kubernetes layer under
                        - code [ref=e801]: managedMachinePool.roleName
                        - text: . This ensures that the nodes provisioned by Karpenter have the correct IAM role associated with them.
                      - listitem [ref=e802]:
                        - text: The
                        - code [ref=e803]: subnetSelectorTerms
                        - text: and
                        - code [ref=e804]: securityGroupSelectorTerms
                        - text: in the NodeClass use tags to discover the subnets and security groups associated with the EKS cluster. Ensure these resources are tagged appropriately as outlined in the
                        - link "Prerequisites" [ref=e805] [cursor=pointer]:
                          - /url: "#prerequisites"
                        - text: section for installing the Karpenter pack.
                      - listitem [ref=e806]:
                        - text: Some instance types will not be displayed in the
                        - strong [ref=e807]: Nodes
                        - text: tab for the cluster in Palette. Refer to
                        - link "Karpenter Support - Known Limitations" [ref=e808] [cursor=pointer]:
                          - /url: /clusters/public-cloud/aws/architecture/#known-limitations
                        - text: for a list of unsupported instance types.
                    - generic [ref=e809]:
                      - generic [ref=e810]: Default NodePool example
                      - generic [ref=e811]:
                        - code [ref=e813]:
                          - generic [ref=e814]: "apiVersion: karpenter.sh/v1"
                          - generic [ref=e815]: "kind: NodePool"
                          - generic [ref=e816]: "metadata:"
                          - generic [ref=e817]: "name: default"
                          - generic [ref=e818]: "spec:"
                          - generic [ref=e819]: "template:"
                          - generic [ref=e820]: "spec:"
                          - generic [ref=e821]: "requirements:"
                          - generic [ref=e822]: "- key: kubernetes.io/arch"
                          - generic [ref=e823]: "operator: In"
                          - generic [ref=e824]: "values: [\"amd64\"]"
                          - generic [ref=e825]: "- key: kubernetes.io/os"
                          - generic [ref=e826]: "operator: In"
                          - generic [ref=e827]: "values: [\"linux\"]"
                          - generic [ref=e828]: "- key: karpenter.sh/capacity-type"
                          - generic [ref=e829]: "operator: In"
                          - generic [ref=e830]: "values: [\"on-demand\"]"
                          - generic [ref=e831]: "- key: karpenter.k8s.aws/instance-category"
                          - generic [ref=e832]: "operator: In"
                          - generic [ref=e833]: "values: [\"c\", \"m\", \"r\"]"
                          - generic [ref=e834]: "- key: karpenter.k8s.aws/instance-generation"
                          - generic [ref=e835]: "operator: Gt"
                          - generic [ref=e836]: "values: [\"2\"]"
                          - generic [ref=e837]: "nodeClassRef:"
                          - generic [ref=e838]: "group: karpenter.k8s.aws"
                          - generic [ref=e839]: "kind: EC2NodeClass"
                          - generic [ref=e840]: "name: al2023-20250920"
                          - generic [ref=e841]: "disruption:"
                          - generic [ref=e842]: "consolidationPolicy: WhenEmptyOrUnderutilized"
                          - generic [ref=e843]: "consolidateAfter: 1m"
                          - generic [ref=e844]: "---"
                          - generic [ref=e845]: "apiVersion: karpenter.k8s.aws/v1"
                          - generic [ref=e846]: "kind: EC2NodeClass"
                          - generic [ref=e847]: "metadata:"
                          - generic [ref=e848]: "name: al2023-20250920"
                          - generic [ref=e849]: "annotations:"
                          - generic [ref=e850]: "kubernetes.io/description: \"General purpose EC2NodeClass for running Amazon Linux 2023@20250920 AMI nodes\""
                          - generic [ref=e851]: "spec:"
                          - generic [ref=e852]: "role: \"{{.spectro.system.cluster.name}}-nodeRole\" # Must match the node role created in the Kubernetes layer under managedMachinePool.roleName."
                          - generic [ref=e853]: "amiSelectorTerms:"
                          - generic [ref=e854]: "- alias: \"al2023@v20250920\""
                          - generic [ref=e855]: "subnetSelectorTerms:"
                          - generic [ref=e856]: "- tags:"
                          - generic [ref=e857]: "karpenter.sh/discovery: \"{{.spectro.system.cluster.name}}\""
                          - generic [ref=e858]: "securityGroupSelectorTerms:"
                          - generic [ref=e859]: "- tags:"
                          - generic [ref=e860]: "karpenter.sh/discovery: \"{{.spectro.system.cluster.name}}\""
                        - generic [ref=e861]:
                          - button "Toggle word wrap" [ref=e862] [cursor=pointer]:
                            - img [ref=e863]
                          - button "Copy code to clipboard" [ref=e865] [cursor=pointer]:
                            - generic [ref=e866]:
                              - img [ref=e867]
                              - img [ref=e869]
                  - listitem [ref=e871]:
                    - paragraph [ref=e872]:
                      - text: Click
                      - strong [ref=e873]: Confirm & Create
                      - text: .
                  - listitem [ref=e874]:
                    - paragraph [ref=e875]:
                      - text: Click
                      - strong [ref=e876]: Next
                      - text: ", followed by"
                      - strong [ref=e877]: Finish Configuration
                      - text: to create the new profile.
                  - listitem [ref=e878]:
                    - paragraph [ref=e879]:
                      - text: From the left main menu, select
                      - strong [ref=e880]: Clusters
                      - text: and select your EKS cluster from the list.
                  - listitem [ref=e881]:
                    - paragraph [ref=e882]:
                      - text: Select the
                      - strong [ref=e883]: Profile
                      - text: tab.
                  - listitem [ref=e884]:
                    - paragraph [ref=e885]:
                      - text: Click the plus icon next to
                      - strong [ref=e886]: ADDON LAYERS
                      - text: to add an add-on profile.
                  - listitem [ref=e887]:
                    - paragraph [ref=e888]:
                      - text: Select the new add-on profile you created for the default Karpenter NodePool and click
                      - strong [ref=e889]: Confirm
                      - text: .
                  - listitem [ref=e890]:
                    - paragraph [ref=e891]:
                      - text: Click
                      - strong [ref=e892]: Save
                      - text: to apply the NodePool configuration to your cluster.
                - heading "ValidateDirect link to Validate" [level=3] [ref=e893]:
                  - text: Validate
                  - link "Direct link to Validate" [ref=e894] [cursor=pointer]:
                    - /url: "#validate-1"
                    - text: "#"
                - list [ref=e895]:
                  - listitem [ref=e896]:
                    - paragraph [ref=e897]:
                      - text: Log in to
                      - link "Palette" [ref=e898] [cursor=pointer]:
                        - /url: https://console.spectrocloud.com
                      - text: .
                  - listitem [ref=e899]:
                    - paragraph [ref=e900]:
                      - text: From the left main menu, select
                      - strong [ref=e901]: Clusters
                      - text: and select your EKS cluster from the list.
                  - listitem [ref=e902]:
                    - paragraph [ref=e903]:
                      - text: In the
                      - strong [ref=e904]: Overview
                      - text: tab, verify that the Karpenter NodePool profile is listed under the
                      - strong [ref=e905]: Cluster Profiles
                      - text: section with a green circle indicating that it is successfully deployed.
                - heading "Test Karpenter Node ProvisioningDirect link to Test Karpenter Node Provisioning" [level=2] [ref=e906]:
                  - text: Test Karpenter Node Provisioning
                  - link "Direct link to Test Karpenter Node Provisioning" [ref=e907] [cursor=pointer]:
                    - /url: "#test-karpenter-node-provisioning"
                    - text: "#"
                - paragraph [ref=e908]: To test Karpenter's ability to provision nodes based on workload demands, deploy a sample application and manually scale the number of replicas for the deployment. This creates pending pods that trigger Karpenter to provision new nodes, then gracefully drain and remove idle nodes when they are no longer needed.
                - heading "PrerequisitesDirect link to Prerequisites" [level=3] [ref=e909]:
                  - text: Prerequisites
                  - link "Direct link to Prerequisites" [ref=e910] [cursor=pointer]:
                    - /url: "#prerequisites-2"
                    - text: "#"
                - list [ref=e911]:
                  - listitem [ref=e912]:
                    - paragraph [ref=e913]:
                      - text: Your Palette account must have the Cluster Profile Editor and Cluster Editor permissions to configure Karpenter NodePools. Refer to our
                      - link "Cluster Profile" [ref=e914] [cursor=pointer]:
                        - /url: /user-management/palette-rbac/project-scope-roles-permissions/#cluster-profile
                      - text: and
                      - link "Cluster" [ref=e915] [cursor=pointer]:
                        - /url: /user-management/palette-rbac/project-scope-roles-permissions/#cluster
                      - text: role reference guides for more information about roles and permissions.
                  - listitem [ref=e916]:
                    - paragraph [ref=e917]:
                      - text: AWS CLI must be installed and configured with the necessary permissions to
                      - link "obtain the kubeconfig file" [ref=e918] [cursor=pointer]:
                        - /url: https://docs.aws.amazon.com/eks/latest/userguide/create-kubeconfig.html
                      - text: for your EKS cluster. Refer to
                      - link "AWS CLI install and update instructions" [ref=e919] [cursor=pointer]:
                        - /url: https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html#getting-started-install-instructions
                      - text: for installation instructions and
                      - link "Configuring settings for the AWS CLI" [ref=e920] [cursor=pointer]:
                        - /url: https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html
                      - text: for configuration guidance.
                  - listitem [ref=e921]:
                    - paragraph [ref=e922]:
                      - text: Kubectl must be installed. Refer to
                      - link "Install or update kubectl" [ref=e923] [cursor=pointer]:
                        - /url: https://docs.aws.amazon.com/eks/latest/userguide/install-kubectl.html#kubectl-install-update
                      - text: for instructions.
                - heading "Enablement StepsDirect link to Enablement Steps" [level=3] [ref=e924]:
                  - text: Enablement Steps
                  - link "Direct link to Enablement Steps" [ref=e925] [cursor=pointer]:
                    - /url: "#enablement-steps-2"
                    - text: "#"
                - list [ref=e926]:
                  - listitem [ref=e927]:
                    - paragraph [ref=e928]:
                      - text: Log in to
                      - link "Palette" [ref=e929] [cursor=pointer]:
                        - /url: https://console.spectrocloud.com
                      - text: .
                  - listitem [ref=e930]:
                    - paragraph [ref=e931]:
                      - text: From the left main menu, select
                      - strong [ref=e932]: Profiles
                      - text: .
                  - listitem [ref=e933]:
                    - paragraph [ref=e934]:
                      - text: Click
                      - strong [ref=e935]: Add Cluster Profile
                      - text: .
                  - listitem [ref=e936]:
                    - paragraph [ref=e937]:
                      - text: Fill in the basic information for the new profile and ensure the
                      - strong [ref=e938]: Type
                      - text: is set to
                      - strong [ref=e939]: Add-on
                      - text: .
                    - paragraph [ref=e940]:
                      - text: The profile name should reflect its purpose, for example,
                      - code [ref=e941]: karpenter-test-deployment-my-eks-cluster
                      - text: .
                  - listitem [ref=e942]:
                    - paragraph [ref=e943]:
                      - text: After you fill out the required information, click
                      - strong [ref=e944]: Next
                  - listitem [ref=e945]:
                    - paragraph [ref=e946]:
                      - text: Click
                      - strong [ref=e947]: Add Manifest
                      - text: .
                  - listitem [ref=e948]:
                    - paragraph [ref=e949]:
                      - text: Provide a name for the manifest layer, such as
                      - code [ref=e950]: karpenter-test-deployment-layer
                      - text: .
                  - listitem [ref=e951]:
                    - paragraph [ref=e952]:
                      - text: Select the
                      - strong [ref=e953]: Enter layer values
                      - text: option and copy the following values into the YAML editor.
                    - generic [ref=e954]:
                      - generic [ref=e955]: Layer values
                      - generic [ref=e956]:
                        - code [ref=e958]:
                          - generic [ref=e959]: "pack:"
                          - generic [ref=e960]: "spectrocloud.com/install-priority: \"0\""
                          - generic [ref=e961]: "namespace: inflate"
                        - button "Copy code to clipboard" [ref=e963] [cursor=pointer]:
                          - generic [ref=e964]:
                            - img [ref=e965]
                            - img [ref=e967]
                  - listitem [ref=e969]:
                    - paragraph [ref=e970]:
                      - text: Click the
                      - strong [ref=e971]: New manifest
                      - text: option and provide a name for the manifest, such as
                      - code [ref=e972]: karpenter-test-deployment
                      - text: . Click the tick icon to save the name.
                  - listitem [ref=e973]:
                    - paragraph [ref=e974]:
                      - text: In the YAML editor, add a sample deployment configuration. This example creates a deployment named
                      - code [ref=e975]: inflate
                      - text: with 0 replicas of the
                      - link "pause" [ref=e976] [cursor=pointer]:
                        - /url: https://gallery.ecr.aws/eks-distro/kubernetes/pause
                      - text: container.
                    - generic [ref=e977]:
                      - generic [ref=e978]: Sample deployment
                      - generic [ref=e979]:
                        - code [ref=e981]:
                          - generic [ref=e982]: "apiVersion: apps/v1"
                          - generic [ref=e983]: "kind: Deployment"
                          - generic [ref=e984]: "metadata:"
                          - generic [ref=e985]: "name: inflate"
                          - generic [ref=e986]: "spec:"
                          - generic [ref=e987]: "replicas: 0"
                          - generic [ref=e988]: "selector:"
                          - generic [ref=e989]: "matchLabels:"
                          - generic [ref=e990]: "app: inflate"
                          - generic [ref=e991]: "template:"
                          - generic [ref=e992]: "metadata:"
                          - generic [ref=e993]: "labels:"
                          - generic [ref=e994]: "app: inflate"
                          - generic [ref=e995]: "spec:"
                          - generic [ref=e996]: "terminationGracePeriodSeconds: 0"
                          - generic [ref=e997]: "securityContext:"
                          - generic [ref=e998]: "runAsUser: 1000"
                          - generic [ref=e999]: "runAsGroup: 3000"
                          - generic [ref=e1000]: "fsGroup: 2000"
                          - generic [ref=e1001]: "containers:"
                          - generic [ref=e1002]: "- name: inflate"
                          - generic [ref=e1003]: "image: public.ecr.aws/eks-distro/kubernetes/pause:3.7"
                          - generic [ref=e1004]: "resources:"
                          - generic [ref=e1005]: "requests:"
                          - generic [ref=e1006]: "cpu: 1"
                          - generic [ref=e1007]: "securityContext:"
                          - generic [ref=e1008]: "allowPrivilegeEscalation: false"
                        - button "Copy code to clipboard" [ref=e1010] [cursor=pointer]:
                          - generic [ref=e1011]:
                            - img [ref=e1012]
                            - img [ref=e1014]
                  - listitem [ref=e1016]:
                    - paragraph [ref=e1017]:
                      - text: Click
                      - strong [ref=e1018]: Confirm & Create
                      - text: .
                  - listitem [ref=e1019]:
                    - paragraph [ref=e1020]:
                      - text: From the left main menu, select
                      - strong [ref=e1021]: Clusters
                      - text: and select your EKS cluster from the list.
                  - listitem [ref=e1022]:
                    - paragraph [ref=e1023]:
                      - text: Select the
                      - strong [ref=e1024]: Profile
                      - text: tab.
                  - listitem [ref=e1025]:
                    - paragraph [ref=e1026]:
                      - text: Click the plus icon next to
                      - strong [ref=e1027]: ADDON LAYERS
                      - text: to add an add-on profile.
                  - listitem [ref=e1028]:
                    - paragraph [ref=e1029]:
                      - text: Select the new add-on profile you created for the test deployment. Click
                      - strong [ref=e1030]: Confirm
                      - text: once selected.
                  - listitem [ref=e1031]:
                    - paragraph [ref=e1032]:
                      - text: Click
                      - strong [ref=e1033]: Save
                      - text: to apply the test deployment to your cluster.
                    - paragraph [ref=e1034]:
                      - text: Wait for the deployment to be applied. This may take a few minutes. Under the
                      - strong [ref=e1035]: Cluster Profiles
                      - text: section in the
                      - strong [ref=e1036]: Overview
                      - text: tab, the test deployment will have a green circle indicating that it is successfully deployed.
                - heading "ValidateDirect link to Validate" [level=3] [ref=e1037]:
                  - text: Validate
                  - link "Direct link to Validate" [ref=e1038] [cursor=pointer]:
                    - /url: "#validate-2"
                    - text: "#"
                - list [ref=e1039]:
                  - listitem [ref=e1040]:
                    - paragraph [ref=e1041]:
                      - text: Open a terminal session and issue the following command to connect to your EKS cluster. Replace
                      - code [ref=e1042]: <eks-cluster-name>
                      - text: with the name of your EKS cluster and
                      - code [ref=e1043]: <aws-region>
                      - text: with the AWS region where your cluster is located.
                    - generic [ref=e1045]:
                      - code [ref=e1047]:
                        - generic [ref=e1048]: aws eks update-kubeconfig --name <eks-cluster-name> --region <aws-region>
                      - generic [ref=e1049]:
                        - button "Toggle word wrap" [ref=e1050] [cursor=pointer]:
                          - img [ref=e1051]
                        - button "Copy code to clipboard" [ref=e1053] [cursor=pointer]:
                          - generic [ref=e1054]:
                            - img [ref=e1055]
                            - img [ref=e1057]
                  - listitem [ref=e1059]:
                    - paragraph [ref=e1060]:
                      - text: Issue the following command to scale the deployment to 10 replicas. The replica count of 10 was tested on an EKS cluster with two worker nodes of an instance type
                      - link "t3.xlarge" [ref=e1061] [cursor=pointer]:
                        - /url: https://aws.amazon.com/ec2/instance-types/t3/
                        - code [ref=e1062]: t3.xlarge
                      - text: in a single node group. You may need to increase or decrease the number of replicas depending on the current capacity of your cluster node groups.
                    - generic [ref=e1064]:
                      - code [ref=e1066]:
                        - generic [ref=e1067]: kubectl scale deployment inflate --namespace inflate --replicas 10
                      - generic [ref=e1068]:
                        - button "Toggle word wrap" [ref=e1069] [cursor=pointer]:
                          - img [ref=e1070]
                        - button "Copy code to clipboard" [ref=e1072] [cursor=pointer]:
                          - generic [ref=e1073]:
                            - img [ref=e1074]
                            - img [ref=e1076]
                    - generic [ref=e1078]:
                      - generic [ref=e1079]: Expected output
                      - code [ref=e1082]:
                        - generic [ref=e1083]: deployment.apps/inflate scaled
                  - listitem [ref=e1084]:
                    - paragraph [ref=e1085]: Monitor the Karpenter controller logs to observe the node provisioning activity. Issue the following command to display the logs.
                    - generic [ref=e1087]:
                      - code [ref=e1089]:
                        - generic [ref=e1090]: kubectl logs --follow --namespace karpenter --selector app.kubernetes.io/name=karpenter --container controller
                      - generic [ref=e1091]:
                        - button "Toggle word wrap" [ref=e1092] [cursor=pointer]:
                          - img [ref=e1093]
                        - button "Copy code to clipboard" [ref=e1095] [cursor=pointer]:
                          - generic [ref=e1096]:
                            - img [ref=e1097]
                            - img [ref=e1099]
                    - paragraph [ref=e1101]: You can monitor log entries that indicate Karpenter is provisioning new nodes to accommodate the increased workload.
                    - generic [ref=e1102]:
                      - generic [ref=e1103]: Example Karpenter controller logs
                      - generic [ref=e1104]:
                        - code [ref=e1106]:
                          - generic [ref=e1107]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T16:57:03.613Z\",\"logger\":\"controller\",\"message\":\"found provisionable pod(s)\",\"commit\":\"4ff8cfe\",\"controller\":\"provisioner\",\"namespace\":\"\",\"name\":\"\",\"reconcileID\":\"a47f6276-1e00-4315-aba5-faaddae6e59f\",\"Pods\":\"inflate/inflate-5c5f75666d-gkvwm, inflate/inflate-5c5f75666d-vnglw, inflate/inflate-5c5f75666d-pxzxt, inflate/inflate-5c5f75666d-5gnpz, inflate/inflate-5c5f75666d-vtmcn\",\"duration\":\"97.580831ms\"}"
                          - generic [ref=e1108]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T16:57:03.613Z\",\"logger\":\"controller\",\"message\":\"computed new nodeclaim(s) to fit pod(s)\",\"commit\":\"4ff8cfe\",\"controller\":\"provisioner\",\"namespace\":\"\",\"name\":\"\",\"reconcileID\":\"a47f6276-1e00-4315-aba5-faaddae6e59f\",\"nodeclaims\":1,\"pods\":5}"
                          - generic [ref=e1109]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T16:57:03.632Z\",\"logger\":\"controller\",\"message\":\"created nodeclaim\",\"commit\":\"4ff8cfe\",\"controller\":\"provisioner\",\"namespace\":\"\",\"name\":\"\",\"reconcileID\":\"a47f6276-1e00-4315-aba5-faaddae6e59f\",\"NodePool\":{\"name\":\"default\"},\"NodeClaim\":{\"name\":\"default-c54z5\"},\"requests\":{\"cpu\":\"5180m\",\"memory\":\"120Mi\",\"pods\":\"8\"},\"instance-types\":\"c3.2xlarge, c4.2xlarge, c5.2xlarge, c5.4xlarge, c5a.2xlarge and 55 other(s)\"}"
                          - generic [ref=e1110]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T16:57:06.354Z\",\"logger\":\"controller\",\"message\":\"launched nodeclaim\",\"commit\":\"4ff8cfe\",\"controller\":\"nodeclaim.lifecycle\",\"controllerGroup\":\"karpenter.sh\",\"controllerKind\":\"NodeClaim\",\"NodeClaim\":{\"name\":\"default-c54z5\"},\"namespace\":\"\",\"name\":\"default-c54z5\",\"reconcileID\":\"09d9e180-2d05-42ea-a55e-ab7b4614d589\",\"provider-id\":\"aws:///us-east-1a/i-08d0c987a45fcdecd\",\"instance-type\":\"c6a.2xlarge\",\"zone\":\"us-east-1a\",\"capacity-type\":\"on-demand\",\"allocatable\":{\"cpu\":\"7910m\",\"ephemeral-storage\":\"17Gi\",\"memory\":\"14967996Ki\",\"pods\":\"58\",\"vpc.amazonaws.com/pod-eni\":\"38\"}}"
                          - generic [ref=e1111]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T16:57:30.894Z\",\"logger\":\"controller\",\"message\":\"registered nodeclaim\",\"commit\":\"4ff8cfe\",\"controller\":\"nodeclaim.lifecycle\",\"controllerGroup\":\"karpenter.sh\",\"controllerKind\":\"NodeClaim\",\"NodeClaim\":{\"name\":\"default-c54z5\"},\"namespace\":\"\",\"name\":\"default-c54z5\",\"reconcileID\":\"77c703e0-391a-4368-a391-7166e0459493\",\"provider-id\":\"aws:///us-east-1a/i-08d0c987a45fcdecd\",\"Node\":{\"name\":\"ip-10-11-12-13.ec2.internal\"}}"
                          - generic [ref=e1112]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T16:57:43.744Z\",\"logger\":\"controller\",\"message\":\"initialized nodeclaim\",\"commit\":\"4ff8cfe\",\"controller\":\"nodeclaim.lifecycle\",\"controllerGroup\":\"karpenter.sh\",\"controllerKind\":\"NodeClaim\",\"NodeClaim\":{\"name\":\"default-c54z5\"},\"namespace\":\"\",\"name\":\"default-c54z5\",\"reconcileID\":\"b0182dc3-a210-406e-8781-576ef5cb0e82\",\"provider-id\":\"aws:///us-east-1a/i-08d0c987a45fcdecd\",\"Node\":{\"name\":\"ip-10-11-12-13.ec2.internal\"},\"allocatable\":{\"cpu\":\"7910m\",\"ephemeral-storage\":\"18181869946\",\"hugepages-1Gi\":\"0\",\"hugepages-2Mi\":\"0\",\"memory\":\"14967996Ki\",\"pods\":\"58\"}}"
                        - button "Toggle word wrap" [ref=e1114] [cursor=pointer]:
                          - img [ref=e1115]
                  - listitem [ref=e1117]:
                    - paragraph [ref=e1118]:
                      - text: Back in Palette, select the
                      - strong [ref=e1119]: Nodes
                      - text: tab for your EKS cluster. You can monitor new nodes being added to the cluster as Karpenter provisions them to accommodate the increased workload. You may need to refresh your browser to display the new nodes. The Karpenter-provisioned node pools will have the
                      - strong [ref=e1120]: Managed by Karpenter
                      - text: banner.
                    - paragraph [ref=e1121]: Alternatively, you can issue the following command in your terminal to display the nodes in your cluster.
                    - generic [ref=e1123]:
                      - code [ref=e1125]:
                        - generic [ref=e1126]: kubectl get nodes
                      - button "Copy code to clipboard" [ref=e1128] [cursor=pointer]:
                        - generic [ref=e1129]:
                          - img [ref=e1130]
                          - img [ref=e1132]
                    - paragraph [ref=e1134]: The output should be similar to the following, showing the nodes in your cluster, including those provisioned by Karpenter.
                    - generic [ref=e1136]:
                      - code [ref=e1138]:
                        - generic [ref=e1139]: NAME STATUS ROLES AGE VERSION
                        - generic [ref=e1140]: ip-10-11-12-13.ec2.internal Ready <none> 5m v1.32.9-eks-113cf36
                        - generic [ref=e1141]: ip-11-12-13-14.ec2.internal Ready <none> 13h v1.32.9-eks-113cf36
                        - generic [ref=e1142]: ip-12-13-14-15.ec2.internal Ready <none> 13h v1.32.9-eks-113cf36
                      - button "Toggle word wrap" [ref=e1144] [cursor=pointer]:
                        - img [ref=e1145]
                  - listitem [ref=e1147]:
                    - paragraph [ref=e1148]: Issue the following command to scale down the deployment to 0 replicas. This triggers Karpenter to terminate the nodes that were provisioned for the deployment.
                    - generic [ref=e1150]:
                      - code [ref=e1152]:
                        - generic [ref=e1153]: kubectl scale deployment inflate --namespace inflate --replicas 0
                      - generic [ref=e1154]:
                        - button "Toggle word wrap" [ref=e1155] [cursor=pointer]:
                          - img [ref=e1156]
                        - button "Copy code to clipboard" [ref=e1158] [cursor=pointer]:
                          - generic [ref=e1159]:
                            - img [ref=e1160]
                            - img [ref=e1162]
                    - generic [ref=e1164]:
                      - generic [ref=e1165]: Expected output
                      - code [ref=e1168]:
                        - generic [ref=e1169]: deployment.apps/inflate scaled
                  - listitem [ref=e1170]:
                    - paragraph [ref=e1171]: Monitor the Karpenter controller logs to observe the node termination activity.
                    - generic [ref=e1173]:
                      - code [ref=e1175]:
                        - generic [ref=e1176]: kubectl logs --follow --namespace karpenter --selector app.kubernetes.io/name=karpenter --container controller
                      - generic [ref=e1177]:
                        - button "Toggle word wrap" [ref=e1178] [cursor=pointer]:
                          - img [ref=e1179]
                        - button "Copy code to clipboard" [ref=e1181] [cursor=pointer]:
                          - generic [ref=e1182]:
                            - img [ref=e1183]
                            - img [ref=e1185]
                    - paragraph [ref=e1187]: You can monitor log entries that indicate Karpenter is terminating nodes that are no longer needed and creating new nodes if necessary.
                    - generic [ref=e1188]:
                      - generic [ref=e1189]: Example Karpenter controller logs
                      - generic [ref=e1190]:
                        - code [ref=e1192]:
                          - generic [ref=e1193]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T17:25:47.232Z\",\"logger\":\"controller\",\"message\":\"disrupting node(s)\",\"commit\":\"4ff8cfe\",\"controller\":\"disruption\",\"namespace\":\"\",\"name\":\"\",\"reconcileID\":\"0725c95c-43f8-40f7-b1db-c405b731ef06\",\"command-id\":\"856c6beb-eb53-4ac3-ab3d-5b6760b3378f\",\"reason\":\"underutilized\",\"decision\":\"replace\",\"disrupted-node-count\":1,\"replacement-node-count\":1,\"pod-count\":1,\"disrupted-nodes\":[{\"Node\":{\"name\":\"ip-10-11-12-13.ec2.internal\"},\"NodeClaim\":{\"name\":\"default-c54z5\"},\"capacity-type\":\"on-demand\",\"instance-type\":\"c6a.2xlarge\"}],\"replacement-nodes\":[{\"capacity-type\":\"on-demand\",\"instance-types\":\"c7a.medium, m7a.medium, m3.medium, r7a.medium, c6a.large and 55 other(s)\"}]}"
                          - generic [ref=e1194]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T17:25:47.285Z\",\"logger\":\"controller\",\"message\":\"created nodeclaim\",\"commit\":\"4ff8cfe\",\"controller\":\"disruption\",\"namespace\":\"\",\"name\":\"\",\"reconcileID\":\"0725c95c-43f8-40f7-b1db-c405b731ef06\",\"NodePool\":{\"name\":\"default\"},\"NodeClaim\":{\"name\":\"default-nc2x2\"},\"requests\":{\"cpu\":\"280m\",\"ephemeral-storage\":\"256Mi\",\"memory\":\"220Mi\",\"pods\":\"4\"},\"instance-types\":\"c3.large, c4.large, c5.large, c5.xlarge, c5a.large and 55 other(s)\"}"
                          - generic [ref=e1195]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T17:25:50.661Z\",\"logger\":\"controller\",\"message\":\"launched nodeclaim\",\"commit\":\"4ff8cfe\",\"controller\":\"nodeclaim.lifecycle\",\"controllerGroup\":\"karpenter.sh\",\"controllerKind\":\"NodeClaim\",\"NodeClaim\":{\"name\":\"default-nc2x2\"},\"namespace\":\"\",\"name\":\"default-nc2x2\",\"reconcileID\":\"cd1e21f8-8ddb-4f86-a173-e17fa9c1953d\",\"provider-id\":\"aws:///us-east-1a/i-0d1f6ea8255fa6496\",\"instance-type\":\"c7a.medium\",\"zone\":\"us-east-1a\",\"capacity-type\":\"on-demand\",\"allocatable\":{\"cpu\":\"940m\",\"ephemeral-storage\":\"17Gi\",\"memory\":\"1471060Ki\",\"pods\":\"8\",\"vpc.amazonaws.com/pod-eni\":\"4\"}}"
                          - generic [ref=e1196]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T17:26:11.794Z\",\"logger\":\"controller\",\"message\":\"registered nodeclaim\",\"commit\":\"4ff8cfe\",\"controller\":\"nodeclaim.lifecycle\",\"controllerGroup\":\"karpenter.sh\",\"controllerKind\":\"NodeClaim\",\"NodeClaim\":{\"name\":\"default-nc2x2\"},\"namespace\":\"\",\"name\":\"default-nc2x2\",\"reconcileID\":\"0f2e7c4f-d175-49ce-9816-b20dd9148d1f\",\"provider-id\":\"aws:///us-east-1a/i-0d1f6ea8255fa6496\",\"Node\":{\"name\":\"ip-13-14-15-16.ec2.internal\"}}"
                          - generic [ref=e1197]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T17:26:25.483Z\",\"logger\":\"controller\",\"message\":\"initialized nodeclaim\",\"commit\":\"4ff8cfe\",\"controller\":\"nodeclaim.lifecycle\",\"controllerGroup\":\"karpenter.sh\",\"controllerKind\":\"NodeClaim\",\"NodeClaim\":{\"name\":\"default-nc2x2\"},\"namespace\":\"\",\"name\":\"default-nc2x2\",\"reconcileID\":\"39205e7b-082c-4bbe-870c-ea1c637f6ca0\",\"provider-id\":\"aws:///us-east-1a/i-0d1f6ea8255fa6496\",\"Node\":{\"name\":\"ip-13-14-15-16.ec2.internal\"},\"allocatable\":{\"cpu\":\"940m\",\"ephemeral-storage\":\"18181869946\",\"hugepages-1Gi\":\"0\",\"hugepages-2Mi\":\"0\",\"memory\":\"1471060Ki\",\"pods\":\"8\"}}"
                          - generic [ref=e1198]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T17:26:26.374Z\",\"logger\":\"controller\",\"message\":\"tainted node\",\"commit\":\"4ff8cfe\",\"controller\":\"node.termination\",\"controllerGroup\":\"\",\"controllerKind\":\"Node\",\"Node\":{\"name\":\"ip-10-11-12-13.ec2.internal\"},\"namespace\":\"\",\"name\":\"ip-10-11-12-13.ec2.internal\",\"reconcileID\":\"7839593c-867f-4e54-9648-50805470c1ac\",\"NodeClaim\":{\"name\":\"default-c54z5\"},\"taint.Key\":\"karpenter.sh/disrupted\",\"taint.Value\":\"\",\"taint.Effect\":\"NoSchedule\"}"
                          - generic [ref=e1199]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T17:27:25.574Z\",\"logger\":\"controller\",\"message\":\"deleted node\",\"commit\":\"4ff8cfe\",\"controller\":\"node.termination\",\"controllerGroup\":\"\",\"controllerKind\":\"Node\",\"Node\":{\"name\":\"ip-10-11-12-13.ec2.internal\"},\"namespace\":\"\",\"name\":\"ip-10-11-12-13.ec2.internal\",\"reconcileID\":\"09ebd74f-0806-4265-a8d6-ba3806073430\",\"NodeClaim\":{\"name\":\"default-c54z5\"}}"
                          - generic [ref=e1200]: "{\"level\":\"INFO\",\"time\":\"2025-10-08T17:27:25.838Z\",\"logger\":\"controller\",\"message\":\"deleted nodeclaim\",\"commit\":\"4ff8cfe\",\"controller\":\"nodeclaim.lifecycle\",\"controllerGroup\":\"karpenter.sh\",\"controllerKind\":\"NodeClaim\",\"NodeClaim\":{\"name\":\"default-c54z5\"},\"namespace\":\"\",\"name\":\"default-c54z5\",\"reconcileID\":\"c033c44e-c1bb-4be8-99de-23c28b2419cd\",\"provider-id\":\"aws:///us-east-1a/i-08d0c987a45fcdecd\",\"Node\":{\"name\":\"ip-10-11-12-13.ec2.internal\"}}"
                        - button "Toggle word wrap" [ref=e1202] [cursor=pointer]:
                          - img [ref=e1203]
                  - listitem [ref=e1205]:
                    - paragraph [ref=e1206]:
                      - text: Back in Palette, select the
                      - strong [ref=e1207]: Nodes
                      - text: tab for your EKS cluster. You can monitor nodes being removed from the cluster or replaced with smaller instances as Karpenter scales down the node pool. You may need to refresh your browser to display the updated node list.
                    - paragraph [ref=e1208]: Issue the following command to view the nodes in your cluster. Note that the nodes provisioned by Karpenter have been terminated and removed from the cluster.
                    - generic [ref=e1210]:
                      - code [ref=e1212]:
                        - generic [ref=e1213]: kubectl get nodes
                      - button "Copy code to clipboard" [ref=e1215] [cursor=pointer]:
                        - generic [ref=e1216]:
                          - img [ref=e1217]
                          - img [ref=e1219]
                    - paragraph [ref=e1221]: The output should be similar to the following, showing either the original nodes or new nodes if Karpenter replaced them with smaller instances.
                    - generic [ref=e1223]:
                      - code [ref=e1225]:
                        - generic [ref=e1226]: NAME STATUS ROLES AGE VERSION
                        - generic [ref=e1227]: ip-13-14-15-16.ec2.internal Ready <none> 7m41s v1.32.9-eks-113cf36
                        - generic [ref=e1228]: ip-11-12-13-14.ec2.internal Ready <none> 14h v1.32.9-eks-113cf36
                        - generic [ref=e1229]: ip-12-13-14-15.ec2.internal Ready <none> 14h v1.32.9-eks-113cf36
                      - button "Toggle word wrap" [ref=e1231] [cursor=pointer]:
                        - img [ref=e1232]
                - heading "(Optional) Set Node Affinity for Karpenter and Critical WorkloadsDirect link to (Optional) Set Node Affinity for Karpenter and Critical Workloads" [level=2] [ref=e1234]:
                  - text: (Optional) Set Node Affinity for Karpenter and Critical Workloads
                  - link "Direct link to (Optional) Set Node Affinity for Karpenter and Critical Workloads" [ref=e1235] [cursor=pointer]:
                    - /url: "#optional-set-node-affinity-for-karpenter-and-critical-workloads"
                    - text: "#"
                - paragraph [ref=e1236]:
                  - text: Karpenter
                  - link "recommends" [ref=e1237] [cursor=pointer]:
                    - /url: https://karpenter.sh/docs/getting-started/migrating-from-cas/#set-node-affinity
                  - text: configuring Karpenter to run on existing EKS node groups by using a
                  - link "Node Affinity" [ref=e1238] [cursor=pointer]:
                    - /url: https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes-using-node-affinity/
                  - text: rule. This ensures Karpenter is not provisioned on nodes it manages.
                - paragraph [ref=e1239]:
                  - text: Additionally, you may want to configure
                  - link "critical workloads" [ref=e1240] [cursor=pointer]:
                    - /url: https://karpenter.sh/docs/getting-started/migrating-from-cas/#set-nodeaffinity-for-critical-workloads-optional
                  - text: (such as
                  - code [ref=e1241]: coredns
                  - text: and
                  - code [ref=e1242]: metrics-server
                  - text: ) to run on the existing node groups to ensure they are not disrupted by Karpenter's consolidation and scaling activities.
                - generic [ref=e1243]:
                  - generic [ref=e1244]:
                    - img [ref=e1246]
                    - text: caution
                  - paragraph [ref=e1249]: If a cluster repave occurs and the existing node groups are removed, you must update the Node Affinity rules to reference the new node groups. If this is not done, Karpenter and critical workloads will not be scheduled.
                - heading "PrerequisitesDirect link to Prerequisites" [level=3] [ref=e1250]:
                  - text: Prerequisites
                  - link "Direct link to Prerequisites" [ref=e1251] [cursor=pointer]:
                    - /url: "#prerequisites-3"
                    - text: "#"
                - list [ref=e1252]:
                  - listitem [ref=e1253]:
                    - paragraph [ref=e1254]:
                      - text: Your Palette account must have the Cluster Profile Editor and Cluster Editor permissions to configure Karpenter NodePools. Refer to our
                      - link "Cluster Profile" [ref=e1255] [cursor=pointer]:
                        - /url: /user-management/palette-rbac/project-scope-roles-permissions/#cluster-profile
                      - text: and
                      - link "Cluster" [ref=e1256] [cursor=pointer]:
                        - /url: /user-management/palette-rbac/project-scope-roles-permissions/#cluster
                      - text: role reference guides for more information about roles and permissions.
                  - listitem [ref=e1257]:
                    - paragraph [ref=e1258]:
                      - text: AWS CLI must be installed and configured with the necessary permissions to
                      - link "obtain the kubeconfig file" [ref=e1259] [cursor=pointer]:
                        - /url: https://docs.aws.amazon.com/eks/latest/userguide/create-kubeconfig.html
                      - text: for your EKS cluster. Refer to
                      - link "AWS CLI install and update instructions" [ref=e1260] [cursor=pointer]:
                        - /url: https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html#getting-started-install-instructions
                      - text: for installation instructions and
                      - link "Configuring settings for the AWS CLI" [ref=e1261] [cursor=pointer]:
                        - /url: https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html
                      - text: for configuration guidance.
                  - listitem [ref=e1262]:
                    - paragraph [ref=e1263]:
                      - text: Kubectl must be installed. Refer to
                      - link "Install or update kubectl" [ref=e1264] [cursor=pointer]:
                        - /url: https://docs.aws.amazon.com/eks/latest/userguide/install-kubectl.html#kubectl-install-update
                      - text: for instructions.
                - heading "Enablement StepsDirect link to Enablement Steps" [level=3] [ref=e1265]:
                  - text: Enablement Steps
                  - link "Direct link to Enablement Steps" [ref=e1266] [cursor=pointer]:
                    - /url: "#enablement-steps-3"
                    - text: "#"
                - list [ref=e1267]:
                  - listitem [ref=e1268]:
                    - paragraph [ref=e1269]:
                      - text: Issue the following command to connect to your EKS cluster. Replace
                      - code [ref=e1270]: <eks-cluster-name>
                      - text: with the name of your EKS cluster and
                      - code [ref=e1271]: <aws-region>
                      - text: with the AWS region where your cluster is located.
                    - generic [ref=e1273]:
                      - code [ref=e1275]:
                        - generic [ref=e1276]: aws eks update-kubeconfig --name <eks-cluster-name> --region <aws-region>
                      - generic [ref=e1277]:
                        - button "Toggle word wrap" [ref=e1278] [cursor=pointer]:
                          - img [ref=e1279]
                        - button "Copy code to clipboard" [ref=e1281] [cursor=pointer]:
                          - generic [ref=e1282]:
                            - img [ref=e1283]
                            - img [ref=e1285]
                  - listitem [ref=e1287]:
                    - paragraph [ref=e1288]:
                      - text: Issue the following command to list node groups in your EKS cluster. Identify the node groups you want Karpenter and critical workloads to run on. Replace
                      - code [ref=e1289]: <eks-cluster-name>
                      - text: with the name of your EKS cluster.
                    - generic [ref=e1291]:
                      - code [ref=e1293]:
                        - generic [ref=e1294]: NODEGROUP=$(aws eks list-nodegroups --cluster-name "<eks-cluster-name>" --query 'nodegroups' --output text | tee /dev/tty)
                      - generic [ref=e1295]:
                        - button "Toggle word wrap" [ref=e1296] [cursor=pointer]:
                          - img [ref=e1297]
                        - button "Copy code to clipboard" [ref=e1299] [cursor=pointer]:
                          - generic [ref=e1300]:
                            - img [ref=e1301]
                            - img [ref=e1303]
                    - generic [ref=e1305]:
                      - generic [ref=e1306]: Example output
                      - code [ref=e1309]:
                        - generic [ref=e1310]: new-worker--abcd worker-pool-efgh
                  - listitem [ref=e1311]:
                    - paragraph [ref=e1312]:
                      - text: Log in to
                      - link "Palette" [ref=e1313] [cursor=pointer]:
                        - /url: https://console.spectrocloud.com
                      - text: .
                  - listitem [ref=e1314]:
                    - paragraph [ref=e1315]:
                      - text: From the left main menu, select
                      - strong [ref=e1316]: Profiles
                      - text: .
                  - listitem [ref=e1317]:
                    - paragraph [ref=e1318]: Select the profile associated with your EKS cluster.
                  - listitem [ref=e1319]:
                    - paragraph [ref=e1320]:
                      - text: Create a new version of the profile. For more information, refer to
                      - link "Version a Cluster Profile" [ref=e1321] [cursor=pointer]:
                        - /url: /profiles/cluster-profiles/modify-cluster-profiles/version-cluster-profile/
                      - text: .
                  - listitem [ref=e1322]:
                    - paragraph [ref=e1323]:
                      - text: Click on the
                      - strong [ref=e1324]: karpenter
                      - text: layer to edit the configuration.
                  - listitem [ref=e1325]:
                    - paragraph [ref=e1326]:
                      - text: In
                      - strong [ref=e1327]: Pack Details
                      - text: ", select the"
                      - strong [ref=e1328]: Values
                      - text: option.
                  - listitem [ref=e1329]:
                    - paragraph [ref=e1330]:
                      - text: In the YAML editor, add a
                      - code [ref=e1331]: nodeAffinity
                      - text: rule to the
                      - code [ref=e1332]: spec.template.spec
                      - text: section of the Karpenter deployment. This rule ensures that Karpenter is scheduled only on nodes that belong to the specified node groups. Replace
                      - code [ref=e1333]: <node-group-1>
                      - text: and
                      - code [ref=e1334]: <node-group-2>
                      - text: with the names of your node groups.
                    - generic [ref=e1335]:
                      - generic [ref=e1336]: Template for adding Node Affinity to Karpenter
                      - generic [ref=e1337]:
                        - code [ref=e1339]:
                          - generic [ref=e1340]: "charts:"
                          - generic [ref=e1341]: ...
                          - generic [ref=e1342]: "karpenter:"
                          - generic [ref=e1343]: ...
                          - generic [ref=e1344]: "affinity:"
                          - generic [ref=e1345]: "nodeAffinity:"
                          - generic [ref=e1346]: "requiredDuringSchedulingIgnoredDuringExecution:"
                          - generic [ref=e1347]: "nodeSelectorTerms:"
                          - generic [ref=e1348]: "- matchExpressions:"
                          - generic [ref=e1349]: "- key: karpenter.sh/nodepool"
                          - generic [ref=e1350]: "operator: DoesNotExist"
                          - generic [ref=e1351]: "- key: eks.amazonaws.com/nodegroup"
                          - generic [ref=e1352]: "operator: In"
                          - generic [ref=e1353]: "values:"
                          - generic [ref=e1354]: "- <node-group-1>"
                          - generic [ref=e1355]: "- <node-group-2>"
                        - button "Copy code to clipboard" [ref=e1357] [cursor=pointer]:
                          - generic [ref=e1358]:
                            - img [ref=e1359]
                            - img [ref=e1361]
                    - group [ref=e1363]:
                      - generic "Click to display an example Node Affinity configuration for Karpenter" [ref=e1364] [cursor=pointer]
                  - listitem [ref=e1365]:
                    - paragraph [ref=e1366]:
                      - text: Click
                      - strong [ref=e1367]: Confirm Updates
                      - text: ", followed by"
                      - strong [ref=e1368]: Save Changes
                      - text: in the cluster profile view.
                  - listitem [ref=e1369]:
                    - paragraph [ref=e1370]:
                      - text: From the left main menu, select
                      - strong [ref=e1371]: Clusters
                      - text: and select your EKS cluster from the list.
                  - listitem [ref=e1372]:
                    - paragraph [ref=e1373]:
                      - text: Select the
                      - strong [ref=e1374]: Profile
                      - text: tab.
                  - listitem [ref=e1375]:
                    - paragraph [ref=e1376]:
                      - text: Click the version drop-down for the
                      - strong [ref=e1377]: INFRASTRUCTURE LAYERS
                      - text: or
                      - strong [ref=e1378]: ADDON LAYERS
                      - text: and select the new profile version you created.
                  - listitem [ref=e1379]:
                    - paragraph [ref=e1380]:
                      - text: Click
                      - strong [ref=e1381]: Review & Save
                      - text: ", followed by"
                      - strong [ref=e1382]: Review changes in Editor
                      - text: in the pop-up window.
                  - listitem [ref=e1383]:
                    - paragraph [ref=e1384]:
                      - text: Click
                      - strong [ref=e1385]: Apply Changes
                      - text: to update the cluster with the new profile version.
                  - listitem [ref=e1386]:
                    - paragraph [ref=e1387]: You can also configure critical workloads to run on the existing node groups by adding a Node Affinity rule to their deployments. The following example shows how to add a Node Affinity rule to the CoreDNS deployment.
                    - generic [ref=e1388]:
                      - generic [ref=e1389]:
                        - img [ref=e1391]
                        - text: caution
                      - paragraph [ref=e1394]: Modifying critical workloads can affect cluster availability. Ensure you plan accordingly.
                    - group [ref=e1395]:
                      - generic "Click to display example steps to add Node Affinity configuration for CoreDNS" [ref=e1396] [cursor=pointer]
                - heading "ValidateDirect link to Validate" [level=3] [ref=e1397]:
                  - text: Validate
                  - link "Direct link to Validate" [ref=e1398] [cursor=pointer]:
                    - /url: "#validate-3"
                    - text: "#"
                - list [ref=e1399]:
                  - listitem [ref=e1400]:
                    - paragraph [ref=e1401]:
                      - text: Log in to
                      - link "Palette" [ref=e1402] [cursor=pointer]:
                        - /url: https://console.spectrocloud.com
                      - text: .
                  - listitem [ref=e1403]:
                    - paragraph [ref=e1404]:
                      - text: From the left main menu, select
                      - strong [ref=e1405]: Clusters
                      - text: and select your EKS cluster from the list.
                  - listitem [ref=e1406]:
                    - paragraph [ref=e1407]:
                      - text: In the
                      - strong [ref=e1408]: Overview
                      - text: tab, verify that the
                      - strong [ref=e1409]: Cluster Status
                      - text: is
                      - strong [ref=e1410]: Running
                      - text: without a loading icon and the
                      - strong [ref=e1411]: Health
                      - text: shows
                      - strong [ref=e1412]: Healthy
                      - text: .
                  - listitem [ref=e1413]:
                    - paragraph [ref=e1414]:
                      - text: Verify that the Karpenter pack is listed under the
                      - strong [ref=e1415]: Cluster Profiles
                      - text: section with a green circle indicating that it is successfully updated.
                - heading "ResourcesDirect link to Resources" [level=2] [ref=e1416]:
                  - text: Resources
                  - link "Direct link to Resources" [ref=e1417] [cursor=pointer]:
                    - /url: "#resources"
                    - text: "#"
                - list [ref=e1418]:
                  - listitem [ref=e1419]:
                    - link "Karpenter Documentation" [ref=e1420] [cursor=pointer]:
                      - /url: https://karpenter.sh/docs/
                  - listitem [ref=e1421]:
                    - link "Karpenter NodePool examples" [ref=e1422] [cursor=pointer]:
                      - /url: https://github.com/aws/karpenter-provider-aws/tree/main/examples/v1
                  - listitem [ref=e1423]:
                    - link "Karpenter Best Practices for Amazon EKS" [ref=e1424] [cursor=pointer]:
                      - /url: https://docs.aws.amazon.com/eks/latest/best-practices/karpenter.html
              - generic [ref=e1425]:
                - generic [ref=e1427]:
                  - text: "Tags:"
                  - list [ref=e1428]:
                    - listitem [ref=e1429]:
                      - link "public cloud" [ref=e1430] [cursor=pointer]:
                        - /url: /tags/public-cloud/
                    - listitem [ref=e1431]:
                      - link "aws" [ref=e1432] [cursor=pointer]:
                        - /url: /tags/aws/
                    - listitem [ref=e1433]:
                      - link "eks" [ref=e1434] [cursor=pointer]:
                        - /url: /tags/eks/
                    - listitem [ref=e1435]:
                      - link "karpenter" [ref=e1436] [cursor=pointer]:
                        - /url: /tags/karpenter/
                - link "Edit this page" [ref=e1439] [cursor=pointer]:
                  - /url: https://github.com/spectrocloud/librarium/blob/master/docs/docs-content/clusters/public-cloud/aws/configure-karpenter-eks-clusters.md
                  - img [ref=e1440]
                  - text: Edit this page
            - navigation "Docs pages" [ref=e1444]:
              - link "Previous  Enable Disk Encryption for EKS Cluster" [ref=e1445] [cursor=pointer]:
                - /url: /clusters/public-cloud/aws/enable-disk-encryption-eks-cluster/
                - generic [ref=e1446]: Previous
                - generic [ref=e1447]:  Enable Disk Encryption for EKS Cluster
              - link "Next Required IAM Policies " [ref=e1448] [cursor=pointer]:
                - /url: /clusters/public-cloud/aws/required-iam-policies/
                - generic [ref=e1449]: Next
                - generic [ref=e1450]: Required IAM Policies 
          - list [ref=e1453]:
            - listitem [ref=e1454]:
              - link "Install the Karpenter Pack" [ref=e1455] [cursor=pointer]:
                - /url: "#install-the-karpenter-pack"
              - list [ref=e1456]:
                - listitem [ref=e1457]:
                  - link "Prerequisites" [ref=e1458] [cursor=pointer]:
                    - /url: "#prerequisites"
                - listitem [ref=e1459]:
                  - link "Enablement Steps" [ref=e1460] [cursor=pointer]:
                    - /url: "#enablement-steps"
                - listitem [ref=e1461]:
                  - link "Validate" [ref=e1462] [cursor=pointer]:
                    - /url: "#validate"
            - listitem [ref=e1463]:
              - link "Configure Karpenter NodePools" [ref=e1464] [cursor=pointer]:
                - /url: "#configure-karpenter-nodepools"
              - list [ref=e1465]:
                - listitem [ref=e1466]:
                  - link "Prerequisites" [ref=e1467] [cursor=pointer]:
                    - /url: "#prerequisites-1"
                - listitem [ref=e1468]:
                  - link "Enablement Steps" [ref=e1469] [cursor=pointer]:
                    - /url: "#enablement-steps-1"
                - listitem [ref=e1470]:
                  - link "Validate" [ref=e1471] [cursor=pointer]:
                    - /url: "#validate-1"
            - listitem [ref=e1472]:
              - link "Test Karpenter Node Provisioning" [ref=e1473] [cursor=pointer]:
                - /url: "#test-karpenter-node-provisioning"
              - list [ref=e1474]:
                - listitem [ref=e1475]:
                  - link "Prerequisites" [ref=e1476] [cursor=pointer]:
                    - /url: "#prerequisites-2"
                - listitem [ref=e1477]:
                  - link "Enablement Steps" [ref=e1478] [cursor=pointer]:
                    - /url: "#enablement-steps-2"
                - listitem [ref=e1479]:
                  - link "Validate" [ref=e1480] [cursor=pointer]:
                    - /url: "#validate-2"
            - listitem [ref=e1481]:
              - link "(Optional) Set Node Affinity for Karpenter and Critical Workloads" [ref=e1482] [cursor=pointer]:
                - /url: "#optional-set-node-affinity-for-karpenter-and-critical-workloads"
              - list [ref=e1483]:
                - listitem [ref=e1484]:
                  - link "Prerequisites" [ref=e1485] [cursor=pointer]:
                    - /url: "#prerequisites-3"
                - listitem [ref=e1486]:
                  - link "Enablement Steps" [ref=e1487] [cursor=pointer]:
                    - /url: "#enablement-steps-3"
                - listitem [ref=e1488]:
                  - link "Validate" [ref=e1489] [cursor=pointer]:
                    - /url: "#validate-3"
            - listitem [ref=e1490]:
              - link "Resources" [ref=e1491] [cursor=pointer]:
                - /url: "#resources"
  - button "Project Logo Ask AI" [ref=e1492] [cursor=pointer]:
    - generic [ref=e1495]:
      - img "Project Logo" [ref=e1496]
      - paragraph [ref=e1497]: Ask AI
```