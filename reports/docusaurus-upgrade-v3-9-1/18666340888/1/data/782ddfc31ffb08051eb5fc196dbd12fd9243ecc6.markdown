# Page snapshot

```yaml
- generic [active] [ref=e1]:
  - generic [ref=e2]:
    - region "Skip to main content":
      - link "Skip to main content" [ref=e3] [cursor=pointer]:
        - /url: "#__docusaurus_skipToContent_fallback"
    - navigation "Main" [ref=e4]:
      - generic [ref=e5]:
        - generic [ref=e6]:
          - link "Spectro cloud logo" [ref=e7] [cursor=pointer]:
            - /url: /
            - img "Spectro cloud logo" [ref=e9]
          - link "Docs" [ref=e10] [cursor=pointer]:
            - /url: /release-notes/
          - link "Tutorials" [ref=e11] [cursor=pointer]:
            - /url: /tutorials/
          - link "Downloads" [ref=e12] [cursor=pointer]:
            - /url: /downloads/
          - link "API" [ref=e13] [cursor=pointer]:
            - /url: /api/introduction/
          - button "latest" [ref=e15] [cursor=pointer]
        - generic [ref=e16]:
          - link "GitHub repository" [ref=e17] [cursor=pointer]:
            - /url: https://github.com/spectrocloud/librarium
          - button "Switch between dark and light mode (currently system mode)" [ref=e19] [cursor=pointer]:
            - img [ref=e20]
          - button "Search (Control+k)" [ref=e23] [cursor=pointer]:
            - generic [ref=e24]:
              - img [ref=e25]
              - generic [ref=e28]: Search
    - generic [ref=e32]:
      - complementary [ref=e33]:
        - generic [ref=e35]:
          - link "Spectro cloud logo" [ref=e36] [cursor=pointer]:
            - /url: /
            - img "Spectro cloud logo" [ref=e37]
          - navigation "Docs sidebar" [ref=e38]:
            - list [ref=e39]:
              - listitem [ref=e40]:
                - generic [ref=e41]:
                  - link "Release Notes" [ref=e42] [cursor=pointer]:
                    - /url: /release-notes/
                    - img [ref=e44]
                    - text: Release Notes
                  - button "Toggle the collapsible sidebar category 'Release Notes'" [ref=e46] [cursor=pointer]
              - listitem [ref=e47]:
                - generic [ref=e48]:
                  - link "Security Bulletins" [ref=e49] [cursor=pointer]:
                    - /url: /security-bulletins/
                    - img [ref=e51]
                    - text: Security Bulletins
                  - button "Toggle the collapsible sidebar category 'Security Bulletins'" [ref=e53] [cursor=pointer]
              - listitem [ref=e54]:
                - generic [ref=e55]:
                  - link "What is Palette?" [ref=e56] [cursor=pointer]:
                    - /url: /
                    - img [ref=e58]
                    - text: What is Palette?
                  - button "Toggle the collapsible sidebar category 'What is Palette?'" [ref=e60] [cursor=pointer]
              - listitem [ref=e61]:
                - link "Getting Started" [ref=e62] [cursor=pointer]:
                  - /url: /getting-started/
                  - img [ref=e64]
                  - text: Getting Started
              - listitem [ref=e66]:
                - generic [ref=e67]:
                  - link "Architecture" [ref=e68] [cursor=pointer]:
                    - /url: /architecture/
                    - img [ref=e70]
                    - text: Architecture
                  - button "Toggle the collapsible sidebar category 'Architecture'" [ref=e72] [cursor=pointer]
              - listitem [ref=e73]:
                - generic [ref=e74]:
                  - link "Profiles" [ref=e75] [cursor=pointer]:
                    - /url: /profiles/
                    - img [ref=e77]
                    - text: Profiles
                  - button "Toggle the collapsible sidebar category 'Profiles'" [ref=e81] [cursor=pointer]
              - listitem [ref=e82]:
                - generic [ref=e83]:
                  - link "Cluster Templates" [ref=e84] [cursor=pointer]:
                    - /url: /cluster-templates/
                    - img [ref=e86]
                    - text: Cluster Templates
                  - button "Toggle the collapsible sidebar category 'Cluster Templates'" [ref=e88] [cursor=pointer]
              - listitem [ref=e89]:
                - generic [ref=e90]:
                  - link "Deployment Modes" [ref=e91] [cursor=pointer]:
                    - /url: /deployment-modes/
                    - img [ref=e93]
                    - text: Deployment Modes
                  - button "Toggle the collapsible sidebar category 'Deployment Modes'" [ref=e95] [cursor=pointer]
              - listitem [ref=e96]:
                - generic [ref=e97]:
                  - link "Clusters" [ref=e98] [cursor=pointer]:
                    - /url: /clusters/
                    - img [ref=e100]
                    - text: Clusters
                  - button "Toggle the collapsible sidebar category 'Clusters'" [ref=e106] [cursor=pointer]
              - listitem [ref=e107]:
                - generic [ref=e108]:
                  - link "Bring Your Own OS (BYOOS)" [expanded] [ref=e109] [cursor=pointer]:
                    - /url: /byoos/
                    - img [ref=e111]
                    - text: Bring Your Own OS (BYOOS)
                  - button "Toggle the collapsible sidebar category 'Bring Your Own OS (BYOOS)'" [ref=e113] [cursor=pointer]
                - list [ref=e114]:
                  - listitem [ref=e115]:
                    - generic [ref=e116]:
                      - link "Create Images with Image Builder" [ref=e117] [cursor=pointer]:
                        - /url: /byoos/image-builder/
                      - button "Toggle the collapsible sidebar category 'Create Images with Image Builder'" [ref=e118] [cursor=pointer]
                  - listitem [ref=e119]:
                    - generic [ref=e120]:
                      - link "CAPI Image Builder" [expanded] [ref=e121] [cursor=pointer]:
                        - /url: /byoos/capi-image-builder/
                      - button "Toggle the collapsible sidebar category 'CAPI Image Builder'" [ref=e122] [cursor=pointer]
                    - list [ref=e123]:
                      - listitem [ref=e124]:
                        - generic [ref=e125]:
                          - link "Build Image for VMware vSphere" [expanded] [ref=e126] [cursor=pointer]:
                            - /url: /byoos/capi-image-builder/build-image-vmware/
                          - button "Toggle the collapsible sidebar category 'Build Image for VMware vSphere'" [ref=e127] [cursor=pointer]
                        - list [ref=e128]:
                          - listitem [ref=e129]:
                            - generic [ref=e130]:
                              - link "Non-Airgap Build" [ref=e131] [cursor=pointer]:
                                - /url: /byoos/capi-image-builder/build-image-vmware/non-airgap-build/
                              - button "Toggle the collapsible sidebar category 'Non-Airgap Build'" [ref=e132] [cursor=pointer]
                          - listitem [ref=e133]:
                            - generic [ref=e134]:
                              - link "Airgap Build" [expanded] [ref=e135] [cursor=pointer]:
                                - /url: /byoos/capi-image-builder/build-image-vmware/airgap-build/
                              - button "Toggle the collapsible sidebar category 'Airgap Build'" [ref=e136] [cursor=pointer]
                            - list [ref=e137]:
                              - listitem [ref=e138]:
                                - link "RHEL and PXK" [ref=e139] [cursor=pointer]:
                                  - /url: /byoos/capi-image-builder/build-image-vmware/airgap-build/rhel-capi-airgap/
                              - listitem [ref=e140]:
                                - link "Rocky and PXK" [ref=e141] [cursor=pointer]:
                                  - /url: /byoos/capi-image-builder/build-image-vmware/airgap-build/rocky-capi-airgap/
                      - listitem [ref=e142]:
                        - link "Configuration Reference" [ref=e143] [cursor=pointer]:
                          - /url: /byoos/capi-image-builder/config-reference/
                      - listitem [ref=e144]:
                        - link "Compatibility Matrix" [ref=e145] [cursor=pointer]:
                          - /url: /byoos/capi-image-builder/comp-matrix-capi-builder/
              - listitem [ref=e146]:
                - generic [ref=e147]:
                  - link "Palette Dev Engine" [ref=e148] [cursor=pointer]:
                    - /url: /devx/
                    - img [ref=e150]
                    - text: Palette Dev Engine
                  - button "Toggle the collapsible sidebar category 'Palette Dev Engine'" [ref=e152] [cursor=pointer]
              - listitem [ref=e153]:
                - generic [ref=e154]:
                  - link "Virtual Machine Orchestrator" [ref=e155] [cursor=pointer]:
                    - /url: /vm-management/
                    - img [ref=e157]
                    - text: Virtual Machine Orchestrator
                  - button "Toggle the collapsible sidebar category 'Virtual Machine Orchestrator'" [ref=e159] [cursor=pointer]
              - listitem [ref=e160]:
                - generic [ref=e161]:
                  - link "Workspaces" [ref=e162] [cursor=pointer]:
                    - /url: /workspace/
                    - img [ref=e164]
                    - text: Workspaces
                  - button "Toggle the collapsible sidebar category 'Workspaces'" [ref=e166] [cursor=pointer]
              - listitem [ref=e167]:
                - generic [ref=e168]:
                  - link "Packs List" [ref=e169] [cursor=pointer]:
                    - /url: /integrations/
                    - img [ref=e171]
                    - text: Packs List
                  - button "Toggle the collapsible sidebar category 'Packs List'" [ref=e173] [cursor=pointer]
              - listitem [ref=e174]:
                - generic [ref=e175]:
                  - link "User & Role Management" [ref=e176] [cursor=pointer]:
                    - /url: /user-management/
                    - img [ref=e178]
                    - text: User & Role Management
                  - button "Toggle the collapsible sidebar category 'User & Role Management'" [ref=e180] [cursor=pointer]
              - listitem [ref=e181]:
                - generic [ref=e182]:
                  - link "Registries and Packs" [ref=e183] [cursor=pointer]:
                    - /url: /registries-and-packs/
                    - img [ref=e185]
                    - text: Registries and Packs
                  - button "Toggle the collapsible sidebar category 'Registries and Packs'" [ref=e187] [cursor=pointer]
              - listitem [ref=e188]:
                - generic [ref=e189]:
                  - link "Security" [ref=e190] [cursor=pointer]:
                    - /url: /security/
                    - img [ref=e192]
                    - text: Security
                  - button "Toggle the collapsible sidebar category 'Security'" [ref=e194] [cursor=pointer]
              - listitem [ref=e195]:
                - generic [ref=e196]:
                  - link "Audit Logs" [ref=e197] [cursor=pointer]:
                    - /url: /audit-logs/
                    - img [ref=e199]
                    - text: Audit Logs
                  - button "Toggle the collapsible sidebar category 'Audit Logs'" [ref=e201] [cursor=pointer]
              - listitem [ref=e202]:
                - generic [ref=e203]:
                  - link "Self-Hosted Palette" [ref=e204] [cursor=pointer]:
                    - /url: /enterprise-version/
                    - img [ref=e206]
                    - text: Self-Hosted Palette
                  - button "Toggle the collapsible sidebar category 'Self-Hosted Palette'" [ref=e208] [cursor=pointer]
              - listitem [ref=e209]:
                - generic [ref=e210]:
                  - link "Palette VerteX" [ref=e211] [cursor=pointer]:
                    - /url: /vertex/
                    - img [ref=e213]
                    - text: Palette VerteX
                  - button "Toggle the collapsible sidebar category 'Palette VerteX'" [ref=e215] [cursor=pointer]
              - listitem [ref=e216]:
                - generic [ref=e217]:
                  - link "Tenant Administration" [ref=e218] [cursor=pointer]:
                    - /url: /tenant-settings/
                    - img [ref=e220]
                    - text: Tenant Administration
                  - button "Toggle the collapsible sidebar category 'Tenant Administration'" [ref=e222] [cursor=pointer]
              - listitem [ref=e223]:
                - generic [ref=e224]:
                  - link "Automation" [ref=e225] [cursor=pointer]:
                    - /url: /automation/
                    - img [ref=e227]
                    - text: Automation
                  - button "Toggle the collapsible sidebar category 'Automation'" [ref=e229] [cursor=pointer]
              - listitem [ref=e230]:
                - generic [ref=e231]:
                  - link "Troubleshooting" [ref=e232] [cursor=pointer]:
                    - /url: /troubleshooting/
                    - img [ref=e234]
                    - text: Troubleshooting
                  - button "Toggle the collapsible sidebar category 'Troubleshooting'" [ref=e236] [cursor=pointer]
              - listitem [ref=e237]:
                - link "Glossary" [ref=e238] [cursor=pointer]:
                  - /url: /glossary-all/
                  - img [ref=e240]
                  - text: Glossary
              - listitem [ref=e242]:
                - generic [ref=e243]:
                  - link "Compliance & Legal" [ref=e244] [cursor=pointer]:
                    - /url: /legal-licenses/
                    - img [ref=e246]
                    - text: Compliance & Legal
                  - button "Toggle the collapsible sidebar category 'Compliance & Legal'" [ref=e248] [cursor=pointer]
              - listitem [ref=e249]:
                - button "Privacy Settings" [ref=e250] [cursor=pointer]:
                  - img [ref=e251]
                  - text: Privacy Settings
      - main [ref=e253]:
        - generic [ref=e255]:
          - generic [ref=e257]:
            - article [ref=e258]:
              - navigation "Breadcrumbs" [ref=e259]:
                - list [ref=e260]:
                  - listitem [ref=e261]:
                    - link "Home page" [ref=e262] [cursor=pointer]:
                      - /url: /
                      - img [ref=e263]
                  - listitem [ref=e265]:
                    - link "Bring Your Own OS (BYOOS)" [ref=e266] [cursor=pointer]:
                      - /url: /byoos/
                  - listitem [ref=e267]:
                    - link "CAPI Image Builder" [ref=e268] [cursor=pointer]:
                      - /url: /byoos/capi-image-builder/
                  - listitem [ref=e269]:
                    - link "Build Image for VMware vSphere" [ref=e270] [cursor=pointer]:
                      - /url: /byoos/capi-image-builder/build-image-vmware/
                  - listitem [ref=e271]:
                    - link "Airgap Build" [ref=e272] [cursor=pointer]:
                      - /url: /byoos/capi-image-builder/build-image-vmware/airgap-build/
                  - listitem [ref=e273]:
                    - generic [ref=e274]: Rocky and PXK
              - generic [ref=e275]:
                - heading "Rocky and Palette eXtended Kubernetes" [level=1] [ref=e277]
                - paragraph [ref=e278]:
                  - text: This guide teaches you how to use the
                  - link "CAPI Image Builder" [ref=e279] [cursor=pointer]:
                    - /url: /byoos/capi-image-builder/
                  - text: tool in an airgapped environment to create a custom
                  - link "Rocky Linux" [ref=e280] [cursor=pointer]:
                    - /url: https://rockylinux.org/
                  - text: image with
                  - link "Palette eXtended Kubernetes (PXK)" [ref=e281] [cursor=pointer]:
                    - /url: /integrations/packs/?pack=kubernetes
                  - text: for VMware vSphere and use the image to create a cluster profile.
                - generic [ref=e282]:
                  - generic [ref=e283]:
                    - img [ref=e285]
                    - text: tech preview
                  - generic [ref=e287]: This is a Tech Preview feature and is subject to change. Do not use this feature in production workloads.
                - heading "PrerequisitesDirect link to Prerequisites" [level=2] [ref=e288]:
                  - text: Prerequisites
                  - link "Direct link to Prerequisites" [ref=e289] [cursor=pointer]:
                    - /url: "#prerequisites"
                    - text: "#"
                - list [ref=e290]:
                  - listitem [ref=e291]:
                    - paragraph [ref=e292]: Access to a VMware vSphere environment, including credentials and permission to create virtual machines.
                  - listitem [ref=e293]:
                    - paragraph [ref=e294]:
                      - text: An airgapped instance of
                      - link "Palette" [ref=e295] [cursor=pointer]:
                        - /url: /enterprise-version/install-palette/install-on-vmware/airgap-install/install/
                      - text: or
                      - link "VerteX" [ref=e296] [cursor=pointer]:
                        - /url: /vertex/install-palette-vertex/install-on-vmware/airgap-install/install/
                      - text: deployed in VMware vSphere.
                  - listitem [ref=e297]:
                    - paragraph [ref=e298]:
                      - text: SSH access to the VMware vSphere
                      - link "airgap support VM" [ref=e299] [cursor=pointer]:
                        - /url: /enterprise-version/install-palette/install-on-vmware/airgap-install/environment-setup/vmware-vsphere-airgap-instructions/
                      - text: used to deploy the airgapped instance of Palette or Vertex.
                  - listitem [ref=e300]:
                    - paragraph [ref=e301]: The following artifacts must be available in the root home directory of the airgap support VM. You can download the files on a system with internet access and then transfer them to your airgap environment.
                    - list [ref=e302]:
                      - listitem [ref=e303]:
                        - paragraph [ref=e304]: CAPI Image Builder compressed archive file. Contact your Palette support representative to obtain the latest version of the tool. This guide uses version 4.6.23 as an example.
                      - listitem [ref=e305]:
                        - paragraph [ref=e306]:
                          - link "Rocky Linux ISO" [ref=e307] [cursor=pointer]:
                            - /url: https://download.rockylinux.org/pub/rocky/8/isos/x86_64/Rocky-8-latest-x86_64-dvd.iso
                          - text: version
                          - code [ref=e308]: 8-latest
                          - text: . Ensure you download the
                          - code [ref=e309]: x86_64-dvd.iso
                          - text: file and not the
                          - code [ref=e310]: x86_64-boot.iso
                          - text: file, and make sure you have its SHA256 checksum available. This guide uses Rocky 8 as an example. Refer to the
                          - link "Configuration Reference" [ref=e311] [cursor=pointer]:
                            - /url: /byoos/capi-image-builder/config-reference/
                          - text: page for details on supported operating systems.
                      - listitem [ref=e312]:
                        - paragraph [ref=e313]:
                          - text: Airgap Kubernetes pack binary of the version for which the image will be generated. This guide uses version
                          - code [ref=e314]: 1.30.5
                          - text: as an example. Refer to the
                          - link "Additional Packs" [ref=e315] [cursor=pointer]:
                            - /url: /downloads/self-hosted-palette/additional-packs/
                          - text: page for instructions on how to download the binary. Additionally, check the supported Kubernetes versions in the
                          - link "Compatibility Matrix" [ref=e316] [cursor=pointer]:
                            - /url: /byoos/capi-image-builder/comp-matrix-capi-builder/
                          - text: .
                      - listitem [ref=e317]:
                        - paragraph [ref=e318]:
                          - text: (Optional) Any custom Bash scripts (
                          - code [ref=e319]: .sh
                          - text: files) that you want to execute when creating your Rocky image. Custom scripts are supported beginning with CAPI Image Builder version 4.6.23.
                - heading "Build Custom ImageDirect link to Build Custom Image" [level=2] [ref=e320]:
                  - text: Build Custom Image
                  - link "Direct link to Build Custom Image" [ref=e321] [cursor=pointer]:
                    - /url: "#build-custom-image"
                    - text: "#"
                - list [ref=e322]:
                  - listitem [ref=e323]:
                    - paragraph [ref=e324]:
                      - text: Open a terminal window and SSH into the airgap support VM using the command below. Replace
                      - code [ref=e325]: <path-to-private-key>
                      - text: with the path to the private SSH key,
                      - code [ref=e326]: <vm-username>
                      - text: with your airgap support VM username, and
                      - code [ref=e327]: <airgap-vm-hostname>
                      - text: with the IP address or Fully Qualified Domain Name (FQDN) of the airgap support VM (for example,
                      - code [ref=e328]: example-vm.palette.dev
                      - text: ).
                    - generic [ref=e329]:
                      - generic [ref=e330]:
                        - img [ref=e332]
                        - text: info
                      - paragraph [ref=e335]:
                        - text: Whether you use the IP address or FQDN depends on the hostname used when setting up your airgap support VM. If you used an
                        - link "existing RHEL VM" [ref=e336] [cursor=pointer]:
                          - /url: /enterprise-version/install-palette/install-on-vmware/airgap-install/environment-setup/env-setup-vm/
                        - text: to set up your VM, this is always the FQDN; if you used an
                        - link "OVA" [ref=e337] [cursor=pointer]:
                          - /url: /enterprise-version/install-palette/install-on-vmware/airgap-install/environment-setup/vmware-vsphere-airgap-instructions/
                        - text: ", it depends on the hostname used when invoking the command"
                        - code [ref=e338]: /bin/airgap-setup.sh <airgap-vm-hostname>
                        - text: .
                    - generic [ref=e340]:
                      - code [ref=e342]:
                        - generic [ref=e343]: ssh -i <path-to-private-key> <vm-username>@<airgap-vm-hostname>
                      - button "Copy code to clipboard" [ref=e345] [cursor=pointer]:
                        - generic [ref=e346]:
                          - img [ref=e347]
                          - img [ref=e349]
                  - listitem [ref=e351]:
                    - paragraph [ref=e352]:
                      - text: Switch to the
                      - code [ref=e353]: root
                      - text: user account to complete the remaining steps.
                    - generic [ref=e355]:
                      - code [ref=e357]:
                        - generic [ref=e358]: sudo --login
                      - button "Copy code to clipboard" [ref=e360] [cursor=pointer]:
                        - generic [ref=e361]:
                          - img [ref=e362]
                          - img [ref=e364]
                  - listitem [ref=e366]:
                    - paragraph [ref=e367]: Set your CAPI Image Builder version tag as a variable.
                    - generic [ref=e369]:
                      - code [ref=e371]:
                        - generic [ref=e372]: CAPI_IMAGE_BUILDER_VERSION=<capi-image-builder-version-tag>
                        - generic [ref=e373]: "echo CAPI Image Builder version: $CAPI_IMAGE_BUILDER_VERSION"
                      - button "Copy code to clipboard" [ref=e375] [cursor=pointer]:
                        - generic [ref=e376]:
                          - img [ref=e377]
                          - img [ref=e379]
                    - generic [ref=e381]:
                      - generic [ref=e382]: Example output
                      - generic [ref=e383]:
                        - code [ref=e385]:
                          - generic [ref=e386]: "CAPI Image Builder version: v4.6.23"
                        - button "Copy code to clipboard" [ref=e388] [cursor=pointer]:
                          - generic [ref=e389]:
                            - img [ref=e390]
                            - img [ref=e392]
                  - listitem [ref=e394]:
                    - paragraph [ref=e395]:
                      - text: Ensure all artifacts listed in the
                      - link "Prerequisites" [ref=e396] [cursor=pointer]:
                        - /url: "#prerequisites"
                      - text: section are available in the
                      - code [ref=e397]: root
                      - text: home directory of the airgap support VM.
                    - generic [ref=e399]:
                      - code [ref=e401]:
                        - generic [ref=e402]: ls
                      - button "Copy code to clipboard" [ref=e404] [cursor=pointer]:
                        - generic [ref=e405]:
                          - img [ref=e406]
                          - img [ref=e408]
                    - generic [ref=e410]:
                      - generic [ref=e411]: Example output
                      - generic [ref=e412]:
                        - code [ref=e414]:
                          - generic [ref=e415]: airgap-pack-kubernetes-1.30.5.bin bin capi-image-builder-v4.6.23.tgz prep
                          - generic [ref=e416]: rocky-8-latest-x86_64-dvd.iso snap
                        - button "Toggle word wrap" [ref=e418] [cursor=pointer]:
                          - img [ref=e419]
                    - generic [ref=e421]:
                      - generic [ref=e422]:
                        - img [ref=e424]
                        - text: warning
                      - paragraph [ref=e427]: The following steps use the preceding file names as an example. Adjust the commands if your artifacts have different names.
                  - listitem [ref=e428]:
                    - paragraph [ref=e429]: Extract the CAPI Image Builder file.
                    - generic [ref=e431]:
                      - code [ref=e433]:
                        - generic [ref=e434]: tar --extract --gzip --file=capi-image-builder-$CAPI_IMAGE_BUILDER_VERSION.tgz
                      - generic [ref=e435]:
                        - button "Toggle word wrap" [ref=e436] [cursor=pointer]:
                          - img [ref=e437]
                        - button "Copy code to clipboard" [ref=e439] [cursor=pointer]:
                          - generic [ref=e440]:
                            - img [ref=e441]
                            - img [ref=e443]
                    - paragraph [ref=e445]:
                      - text: The
                      - code [ref=e446]: root
                      - text: home directory of your airgap support VM should now contain the following artifacts.
                    - generic [ref=e448]:
                      - code [ref=e450]:
                        - generic [ref=e451]: ls
                      - button "Copy code to clipboard" [ref=e453] [cursor=pointer]:
                        - generic [ref=e454]:
                          - img [ref=e455]
                          - img [ref=e457]
                    - generic [ref=e459]:
                      - generic [ref=e460]: Example output
                      - generic [ref=e461]:
                        - code [ref=e463]:
                          - generic [ref=e464]: README airgap-pack-kubernetes-1.30.5.bin bin capi-builder-v4.6.23.tar
                          - generic [ref=e465]: capi-image-builder-v4.6.23.tgz kickstart output prep rocky-8-latest-x86_64-dvd.iso
                          - generic [ref=e466]: rpmrepo snap yum-repo-v1.0.0.tar
                        - button "Toggle word wrap" [ref=e468] [cursor=pointer]:
                          - img [ref=e469]
                  - listitem [ref=e471]:
                    - paragraph [ref=e472]:
                      - text: Update the permissions of the
                      - code [ref=e473]: output
                      - text: folder to allow the CAPI Builder tool to create directories and files within it.
                    - generic [ref=e475]:
                      - code [ref=e477]:
                        - generic [ref=e478]: chmod a+rwx output
                      - button "Copy code to clipboard" [ref=e480] [cursor=pointer]:
                        - generic [ref=e481]:
                          - img [ref=e482]
                          - img [ref=e484]
                  - listitem [ref=e486]:
                    - paragraph [ref=e487]:
                      - text: Move the Rocky Linux ISO file to the
                      - code [ref=e488]: output
                      - text: folder.
                    - generic [ref=e490]:
                      - code [ref=e492]:
                        - generic [ref=e493]: mv rocky-8-latest-x86_64-dvd.iso output/
                      - button "Copy code to clipboard" [ref=e495] [cursor=pointer]:
                        - generic [ref=e496]:
                          - img [ref=e497]
                          - img [ref=e499]
                  - listitem [ref=e501]:
                    - paragraph [ref=e502]:
                      - text: Copy the
                      - code [ref=e503]: ks.cfg.rocky8
                      - text: file from the
                      - code [ref=e504]: kickstart
                      - text: folder to the
                      - code [ref=e505]: output
                      - text: folder as
                      - code [ref=e506]: ks.cfg
                      - text: .
                    - generic [ref=e508]:
                      - code [ref=e510]:
                        - generic [ref=e511]: cp kickstart/ks.cfg.rocky8 output/ks.cfg
                      - button "Copy code to clipboard" [ref=e513] [cursor=pointer]:
                        - generic [ref=e514]:
                          - img [ref=e515]
                          - img [ref=e517]
                  - listitem [ref=e519]:
                    - paragraph [ref=e520]:
                      - text: Copy the
                      - code [ref=e521]: server.crt
                      - text: file from the
                      - code [ref=e522]: /opt/spectro/ssl/
                      - text: directory to the
                      - code [ref=e523]: rpmrepo
                      - text: folder.
                    - generic [ref=e525]:
                      - code [ref=e527]:
                        - generic [ref=e528]: cp /opt/spectro/ssl/server.crt rpmrepo/
                      - button "Copy code to clipboard" [ref=e530] [cursor=pointer]:
                        - generic [ref=e531]:
                          - img [ref=e532]
                          - img [ref=e534]
                  - listitem [ref=e536]:
                    - paragraph [ref=e537]:
                      - text: Open the
                      - code [ref=e538]: imageconfig
                      - text: template file in an editor of your choice and fill in the required parameters. This example uses Vi.
                    - paragraph [ref=e539]:
                      - text: The
                      - code [ref=e540]: imageconfig
                      - text: file is used to personalize the base CAPI image for your cluster, which you can alter to fit your needs. This includes specifying the OS type, Kubernetes version, whether the image should be FIPS compliant, and more.
                    - paragraph [ref=e541]:
                      - text: Use the example configuration below for building a Rocky 8 CAPI image in an airgapped environment. Replace
                      - code [ref=e542]: <iso-checksum>
                      - text: with the Rocky ISO checksum. Replace the VMware-related placeholders with the values from your VMware vSphere environment. Additionally, replace
                      - code [ref=e543]: <airgap-vm-hostname>
                      - text: with the hostname or IP address of your airgap support VM.
                    - paragraph [ref=e544]:
                      - text: For a complete list of parameters, refer to the
                      - link "Configuration Reference" [ref=e545] [cursor=pointer]:
                        - /url: /byoos/capi-image-builder/config-reference/
                      - text: page. Additionally, refer to the
                      - link "Compatibility Matrix" [ref=e546] [cursor=pointer]:
                        - /url: /byoos/capi-image-builder/comp-matrix-capi-builder/
                      - text: for a list of supported Kubernetes versions and their corresponding dependencies.
                    - generic [ref=e547]:
                      - generic [ref=e548]:
                        - img [ref=e550]
                        - text: warning
                      - paragraph [ref=e553]:
                        - text: If you used the airgap support VM hostname during the execution of the
                        - code [ref=e554]: airgap-setup.sh
                        - text: script, ensure you enter the VM hostname in the
                        - code [ref=e555]: airgap_ip
                        - text: parameter. The same applies if you used the VM IP address.
                    - generic [ref=e557]:
                      - code [ref=e559]:
                        - generic [ref=e560]: vi ./output/imageconfig
                      - button "Copy code to clipboard" [ref=e562] [cursor=pointer]:
                        - generic [ref=e563]:
                          - img [ref=e564]
                          - img [ref=e566]
                    - generic [ref=e568]:
                      - generic [ref=e569]: Example imageconfig file
                      - generic [ref=e570]:
                        - code [ref=e572]:
                          - generic [ref=e573]: "# Define the OS type and version here"
                          - generic [ref=e574]: "# os_version=rhel-8 | rhel-9 | rockylinux-8 | rockylinux-9"
                          - generic [ref=e575]: "# image_type=standard | fips"
                          - generic [ref=e576]: os_version=rockylinux-8
                          - generic [ref=e577]: image_type=standard
                          - generic [ref=e578]: "# Define the image name"
                          - generic [ref=e579]: "# image_name=<Final Image Name to create>"
                          - generic [ref=e580]: image_name=rocky-8
                          - generic [ref=e581]: "# Define the Cloud type"
                          - generic [ref=e582]: "# cloud_type=vmware"
                          - generic [ref=e583]: cloud_type=vmware
                          - generic [ref=e584]: "# Define the Component Versions"
                          - generic [ref=e585]: "#"
                          - generic [ref=e586]: "# containerd crictl and cni version update should be done"
                          - generic [ref=e587]: "# only if the images are available in the upstream repositories"
                          - generic [ref=e588]: k8s_version=1.30.5
                          - generic [ref=e589]: cni_version=1.3.0
                          - generic [ref=e590]: containerd_version=1.7.13
                          - generic [ref=e591]: crictl_version=1.28.0
                          - generic [ref=e592]: "# Define RHEL subscription credentials(if $image_type=rhel)"
                          - generic [ref=e593]: "# used while image creation to use package manager"
                          - generic [ref=e594]: "# rhel_subscription_user="
                          - generic [ref=e595]: "# rhel_subscription_pass="
                          - generic [ref=e596]: "# Define ISO url(if image is rhel or rockylinux)"
                          - generic [ref=e597]: iso_name=rocky-8-latest-x86_64-dvd.iso
                          - generic [ref=e598]: iso_checksum=<iso-checksum>
                          - generic [ref=e599]: "# Define AWS infra details"
                          - generic [ref=e600]: aws_access_key=
                          - generic [ref=e601]: aws_secret_key=
                          - generic [ref=e602]: "# Define Vmware infra details"
                          - generic [ref=e603]: vcenter_server=<vcenter-server>
                          - generic [ref=e604]: vcenter_user=<vcenter-user>
                          - generic [ref=e605]: vcenter_password=<vcenter-password>
                          - generic [ref=e606]: vcenter_datacenter=<vcenter-datacenter>
                          - generic [ref=e607]: vcenter_datastore=<vcenter-datastore>
                          - generic [ref=e608]: vcenter_network=<vcenter-network>
                          - generic [ref=e609]: vcenter_folder=<vcenter-folder>
                          - generic [ref=e610]: vcenter_cluster=<vcenter-cluster>
                          - generic [ref=e611]: vcenter_resource_pool=<vcenter-resource-pool>
                          - generic [ref=e612]: "# Optional: for OVA based builds"
                          - generic [ref=e613]: vcenter_template=
                          - generic [ref=e614]: "# Define Azure infra details"
                          - generic [ref=e615]: azure_client_id=
                          - generic [ref=e616]: azure_client_secret=
                          - generic [ref=e617]: azure_subscription_id=
                          - generic [ref=e618]: azure_location=
                          - generic [ref=e619]: azure_storage_account=
                          - generic [ref=e620]: azure_resource_group=
                          - generic [ref=e621]: "# Define GCE infra details"
                          - generic [ref=e622]: google_app_creds=
                          - generic [ref=e623]: gcp_project_id=
                          - generic [ref=e624]: "# Airgap Configuration"
                          - generic [ref=e625]: airgap=true
                          - generic [ref=e626]: airgap_ip=<airgap-vm-hostname>
                        - button "Toggle word wrap" [ref=e628] [cursor=pointer]:
                          - img [ref=e629]
                    - generic [ref=e631]:
                      - generic [ref=e632]:
                        - img [ref=e634]
                        - text: tip
                      - paragraph [ref=e637]:
                        - text: To build a FIPS-compliant image, set
                        - code [ref=e638]: image_type
                        - text: to
                        - code [ref=e639]: fips
                        - text: .
                    - paragraph [ref=e640]: Once you are finished making changes, save and exit the file.
                  - listitem [ref=e641]:
                    - paragraph [ref=e642]:
                      - text: (Optional) You can add custom Bash scripts (
                      - code [ref=e643]: .sh
                      - text: files) to run before or after the build process. This feature is available beginning with CAPI Image Builder version 4.6.23. If any scripts are found in the relevant directories, they are copied to an Ansible playbook.
                    - paragraph [ref=e644]:
                      - text: Move any scripts that you want to be executed
                      - emphasis [ref=e645]: before
                      - text: the build process to the
                      - code [ref=e646]: output/custom_scripts/pre
                      - text: directory. Move any scripts that you want to be executed
                      - emphasis [ref=e647]: after
                      - text: the build process to the
                      - code [ref=e648]: output/custom_scripts/post
                      - text: directory. Ensure the scripts are executable.
                    - paragraph [ref=e649]:
                      - text: Below is an example of moving a pre-install script to the appropriate
                      - code [ref=e650]: pre
                      - text: directory and making it executable.
                    - generic [ref=e651]:
                      - generic [ref=e652]: Example of moving a script and modifying permissions
                      - code [ref=e655]:
                        - generic [ref=e656]: mv sample-script.sh output/custom_scripts/pre/sample-script.sh
                        - generic [ref=e657]: chmod +x custom_scripts/pre/sample-script.sh
                  - listitem [ref=e658]:
                    - paragraph [ref=e659]: Load the CAPI Image Builder container image with the command below.
                    - generic [ref=e660]:
                      - tablist [ref=e661]:
                        - tab "Docker" [selected] [ref=e662] [cursor=pointer]
                        - tab "Podman" [ref=e663] [cursor=pointer]
                      - tabpanel [ref=e665]:
                        - generic [ref=e667]:
                          - code [ref=e669]:
                            - generic [ref=e670]: docker load < capi-builder-$CAPI_IMAGE_BUILDER_VERSION.tar
                          - button "Copy code to clipboard" [ref=e672] [cursor=pointer]:
                            - generic [ref=e673]:
                              - img [ref=e674]
                              - img [ref=e676]
                  - listitem [ref=e678]:
                    - paragraph [ref=e679]: Load the Yum container image with the command below. The Yum container is used to serve the packages required by the CAPI Image Builder.
                    - generic [ref=e680]:
                      - tablist [ref=e681]:
                        - tab "Docker" [selected] [ref=e682] [cursor=pointer]
                        - tab "Podman" [ref=e683] [cursor=pointer]
                      - tabpanel [ref=e685]:
                        - generic [ref=e687]:
                          - code [ref=e689]:
                            - generic [ref=e690]: docker load < yum-repo-v1.0.0.tar
                          - button "Copy code to clipboard" [ref=e692] [cursor=pointer]:
                            - generic [ref=e693]:
                              - img [ref=e694]
                              - img [ref=e696]
                  - listitem [ref=e698]:
                    - paragraph [ref=e699]: Confirm that both container images were loaded correctly.
                    - generic [ref=e700]:
                      - tablist [ref=e701]:
                        - tab "Docker" [selected] [ref=e702] [cursor=pointer]
                        - tab "Podman" [ref=e703] [cursor=pointer]
                      - tabpanel [ref=e705]:
                        - generic [ref=e707]:
                          - code [ref=e709]:
                            - generic [ref=e710]: docker images
                          - button "Copy code to clipboard" [ref=e712] [cursor=pointer]:
                            - generic [ref=e713]:
                              - img [ref=e714]
                              - img [ref=e716]
                        - generic [ref=e718]:
                          - generic [ref=e719]: Example output
                          - generic [ref=e720]:
                            - code [ref=e722]:
                              - generic [ref=e723]: REPOSITORY TAG IMAGE ID CREATED SIZE
                              - generic [ref=e724]: us-docker.pkg.dev/palette-images/palette/imagebuilder/capi-builder v4.6.23 2adff15eee2d 7 days ago 2.47 GB
                              - generic [ref=e725]: gcr.io/spectro-images-public/imagebuilder/yum-repo v1.0.0 b03879039936 6 weeks ago 603 MB
                            - button "Toggle word wrap" [ref=e727] [cursor=pointer]:
                              - img [ref=e728]
                  - listitem [ref=e730]:
                    - paragraph [ref=e731]:
                      - text: Start the Yum container and assign its ID to the
                      - code [ref=e732]: BUILD_ID_YUM
                      - text: variable. The following command mounts the
                      - code [ref=e733]: /root/rpmrepo
                      - text: directory on your airgap support VM to the
                      - code [ref=e734]: /var/www/html/rpmrepo
                      - text: directory of the Yum container, runs the container on port 9000 of your VM, and detaches the container's output from the terminal.
                    - generic [ref=e735]:
                      - tablist [ref=e736]:
                        - tab "Docker" [selected] [ref=e737] [cursor=pointer]
                        - tab "Podman" [ref=e738] [cursor=pointer]
                      - tabpanel [ref=e740]:
                        - generic [ref=e742]:
                          - code [ref=e744]:
                            - generic [ref=e745]: BUILD_ID_YUM=$(docker run --volume /root/rpmrepo:/var/www/html/rpmrepo --publish 9000:80 --detach gcr.io/spectro-images-public/imagebuilder/yum-repo:v1.0.0)
                          - generic [ref=e746]:
                            - button "Toggle word wrap" [ref=e747] [cursor=pointer]:
                              - img [ref=e748]
                            - button "Copy code to clipboard" [ref=e750] [cursor=pointer]:
                              - generic [ref=e751]:
                                - img [ref=e752]
                                - img [ref=e754]
                  - listitem [ref=e756]:
                    - paragraph [ref=e757]: Execute the command below to visualize the Yum container logs.
                    - generic [ref=e758]:
                      - tablist [ref=e759]:
                        - tab "Docker" [selected] [ref=e760] [cursor=pointer]
                        - tab "Podman" [ref=e761] [cursor=pointer]
                      - tabpanel [ref=e763]:
                        - generic [ref=e765]:
                          - code [ref=e767]:
                            - generic [ref=e768]: docker logs --follow $BUILD_ID_YUM
                          - button "Copy code to clipboard" [ref=e770] [cursor=pointer]:
                            - generic [ref=e771]:
                              - img [ref=e772]
                              - img [ref=e774]
                        - paragraph [ref=e776]:
                          - text: Monitor the output until a
                          - code [ref=e777]: Pool finished
                          - text: message appears, indicating that the process was completed successfully.
                        - code [ref=e781]:
                          - generic [ref=e782]: "# Output condensed for readability"
                          - generic [ref=e783]: Directory walk started
                          - generic [ref=e784]: Directory walk done - 53 packages
                          - generic [ref=e785]: "Temporary output repo path: /var/www/html/rpmrepo/.repodata/"
                          - generic [ref=e786]: Preparing sqlite DBs
                          - generic [ref=e787]: Pool started (with 5 workers)
                          - generic [ref=e788]: Pool finished
                  - listitem [ref=e789]:
                    - paragraph [ref=e790]: Issue the following command to upload the airgap Kubernetes pack to the airgap registry.
                    - generic [ref=e792]:
                      - code [ref=e794]:
                        - generic [ref=e795]: chmod +x airgap-pack-kubernetes-1.30.5.bin && \
                        - generic [ref=e796]: ./airgap-pack-kubernetes-1.30.5.bin
                      - button "Copy code to clipboard" [ref=e798] [cursor=pointer]:
                        - generic [ref=e799]:
                          - img [ref=e800]
                          - img [ref=e802]
                  - listitem [ref=e804]:
                    - paragraph [ref=e805]:
                      - text: Issue the command below to start the CAPI Image Builder container and assign the container ID to the
                      - code [ref=e806]: BUILD_ID_CAPI
                      - text: variable. This command starts the container on the same network as your airgap support VM, mounts the
                      - code [ref=e807]: /root/output
                      - text: directory of your VM to the
                      - code [ref=e808]: /home/imagebuilder/output
                      - text: directory of the CAPI Image Builder container, and detaches the container's output from the terminal.
                    - paragraph [ref=e809]:
                      - text: The tool will create and configure a VM with Dynamic Host Configuration Protocol (DHCP) in your VMware vSphere environment using the
                      - code [ref=e810]: image_name
                      - text: defined in
                      - code [ref=e811]: imageconfig
                      - text: . For this guide, the VM is named
                      - code [ref=e812]: rocky-8
                      - text: . The tool will then generate a Rocky 8 CAPI image from the VM and save it to the
                      - code [ref=e813]: output
                      - text: directory.
                    - generic [ref=e814]:
                      - tablist [ref=e815]:
                        - tab "Docker" [selected] [ref=e816] [cursor=pointer]
                        - tab "Podman" [ref=e817] [cursor=pointer]
                      - tabpanel [ref=e819]:
                        - generic [ref=e821]:
                          - code [ref=e823]:
                            - generic [ref=e824]: BUILD_ID_CAPI=$(docker run --net=host --volume /root/output:/home/imagebuilder/output --detach us-docker.pkg.dev/palette-images/palette/imagebuilder/capi-builder:$CAPI_IMAGE_BUILDER_VERSION)
                          - generic [ref=e825]:
                            - button "Toggle word wrap" [ref=e826] [cursor=pointer]:
                              - img [ref=e827]
                            - button "Copy code to clipboard" [ref=e829] [cursor=pointer]:
                              - generic [ref=e830]:
                                - img [ref=e831]
                                - img [ref=e833]
                    - paragraph [ref=e835]: If you need the VM to use static IP placement instead of DHCP, follow the steps described below.
                    - group [ref=e836]:
                      - generic "CAPI Image Builder with Static IP Placement" [ref=e837] [cursor=pointer]
                  - listitem [ref=e838]:
                    - paragraph [ref=e839]: Execute the following command to view the CAPI Image Builder container logs and monitor the build progress. If you added any custom scripts in step 11, the output will be displayed in the build log.
                    - generic [ref=e840]:
                      - tablist [ref=e841]:
                        - tab "Docker" [selected] [ref=e842] [cursor=pointer]
                        - tab "Podman" [ref=e843] [cursor=pointer]
                      - tabpanel [ref=e845]:
                        - generic [ref=e847]:
                          - code [ref=e849]:
                            - generic [ref=e850]: docker logs --follow $BUILD_ID_CAPI
                          - button "Copy code to clipboard" [ref=e852] [cursor=pointer]:
                            - generic [ref=e853]:
                              - img [ref=e854]
                              - img [ref=e856]
                    - generic [ref=e858]:
                      - generic [ref=e859]:
                        - img [ref=e861]
                        - text: info
                      - paragraph [ref=e864]: It may take a few minutes for the logs to start being displayed, and the build takes several minutes to complete.
                  - listitem [ref=e865]:
                    - paragraph [ref=e866]:
                      - text: Once the build is complete, the Rocky 8 CAPI image will be downloaded to the
                      - code [ref=e867]: output
                      - text: directory as the
                      - code [ref=e868]: image_name
                      - text: specified in the
                      - code [ref=e869]: imageconfig
                      - text: file. For this example, the image is
                      - code [ref=e870]: rocky-8
                      - text: . Once the image is created, the VM is deleted from VMware vSphere.
                    - paragraph [ref=e871]:
                      - text: Issue the command below to confirm that the build files are present in the
                      - code [ref=e872]: output
                      - text: directory, replacing
                      - code [ref=e873]: rocky-8
                      - text: with your specified
                      - code [ref=e874]: image_name
                      - text: ", if different."
                    - generic [ref=e876]:
                      - code [ref=e878]:
                        - generic [ref=e879]: ls output/rocky-8
                      - button "Copy code to clipboard" [ref=e881] [cursor=pointer]:
                        - generic [ref=e882]:
                          - img [ref=e883]
                          - img [ref=e885]
                    - generic [ref=e887]:
                      - generic [ref=e888]: Example output
                      - generic [ref=e889]:
                        - code [ref=e891]:
                          - generic [ref=e892]: packer-manifest.json rockylinux-8-kube-v1.30.5.mf rockylinux-8-kube-v1.30.5.ovf rocky-8-disk-0.vmdk rockylinux-8-kube-v1.30.5.ova rocky-8.ovf rockylinux-8-kube-v1.30.5.ova.sha256
                        - button "Toggle word wrap" [ref=e894] [cursor=pointer]:
                          - img [ref=e895]
                  - listitem [ref=e897]:
                    - paragraph [ref=e898]:
                      - text: Copy the
                      - code [ref=e899]: rockylinux-8-kube-v1.30.5.ova
                      - text: file to the home directory of the airgap support VM. Replace
                      - code [ref=e900]: <vm-username>
                      - text: with your airgap support VM username.
                    - generic [ref=e902]:
                      - code [ref=e904]:
                        - generic [ref=e905]: cp /root/output/rocky-8/rockylinux-8-kube-v1.30.5.ova /home/<vm-username>/
                      - generic [ref=e906]:
                        - button "Toggle word wrap" [ref=e907] [cursor=pointer]:
                          - img [ref=e908]
                        - button "Copy code to clipboard" [ref=e910] [cursor=pointer]:
                          - generic [ref=e911]:
                            - img [ref=e912]
                            - img [ref=e914]
                    - paragraph [ref=e916]:
                      - text: Next, open a new terminal window on your local machine and use the
                      - code [ref=e917]: scp
                      - text: command to copy the
                      - code [ref=e918]: rockylinux-8-kube-v1.30.5.ova
                      - text: file. Replace
                      - code [ref=e919]: <path-to-private-key>
                      - text: with the path to the private SSH key,
                      - code [ref=e920]: <vm-username>
                      - text: with your airgap support VM username, and
                      - code [ref=e921]: <airgap-vm-hostname>
                      - text: with the IP address or hostname of the airgap support VM.
                    - generic [ref=e923]:
                      - code [ref=e925]:
                        - generic [ref=e926]: scp -i <path-to-private-key> <vm-username>@<airgap-vm-hostname>:/home/<vm-username>/rockylinux-8-kube-v1.30.5.ova .
                      - generic [ref=e927]:
                        - button "Toggle word wrap" [ref=e928] [cursor=pointer]:
                          - img [ref=e929]
                        - button "Copy code to clipboard" [ref=e931] [cursor=pointer]:
                          - generic [ref=e932]:
                            - img [ref=e933]
                            - img [ref=e935]
                  - listitem [ref=e937]:
                    - paragraph [ref=e938]:
                      - text: To make the image available in VMware vSphere, log in to your environment and locate the
                      - code [ref=e939]: vcenter_folder
                      - text: you defined in step 10 of this guide.
                    - generic [ref=e940]:
                      - generic [ref=e941]:
                        - img [ref=e943]
                        - text: tip
                      - paragraph [ref=e946]: You can also use the following steps to make the image available in a VMware vSphere environment that is not connected to the one you used for building the image.
                  - listitem [ref=e947]:
                    - paragraph [ref=e948]:
                      - text: Right-click the folder and select
                      - strong [ref=e949]: Deploy OVF Template
                      - text: to deploy a VM using the Rocky 8 OVA file that was built in step 18 of this guide.
                  - listitem [ref=e950]:
                    - paragraph [ref=e951]:
                      - text: In the
                      - strong [ref=e952]: Deploy OVF Template
                      - text: wizard, select
                      - strong [ref=e953]: Local File > Upload Files
                      - text: ", and choose the OVA file located in the"
                      - code [ref=e954]: output
                      - text: folder on your local machine. This guide uses
                      - code [ref=e955]: rockylinux-8-kube-v1.30.5.ova
                      - text: as an example. Select
                      - strong [ref=e956]: Next
                      - text: to continue.
                  - listitem [ref=e957]:
                    - paragraph [ref=e958]:
                      - text: Assign a name to the virtual machine, such as
                      - code [ref=e959]: rockylinux-8-kube-v1.30.5
                      - text: ", and choose the folder you created previously as the target location. Select"
                      - strong [ref=e960]: Next
                      - text: to proceed.
                  - listitem [ref=e961]:
                    - paragraph [ref=e962]:
                      - text: Choose a compute resource and select
                      - strong [ref=e963]: Next
                      - text: .
                  - listitem [ref=e964]:
                    - paragraph [ref=e965]:
                      - text: Review the VM configuration, accept the license agreements, and select
                      - strong [ref=e966]: Next
                      - text: .
                  - listitem [ref=e967]:
                    - paragraph [ref=e968]:
                      - text: Choose the storage location and network configuration and select
                      - strong [ref=e969]: Next
                      - text: . Then, select
                      - strong [ref=e970]: Finish
                      - text: to deploy the VM.
                    - generic [ref=e971]:
                      - generic [ref=e972]:
                        - img [ref=e974]
                        - text: warning
                      - paragraph [ref=e977]:
                        - text: It takes a while for the VM to deploy, approximately 45 minutes or more, depending on your internet connection. The download of the OVA file takes the majority of the time. You can monitor the progress of this process in VMware vSphere by looking at the
                        - strong [ref=e978]: Recent Tasks
                        - text: tab and filtering the
                        - strong [ref=e979]: Task Name
                        - text: column by
                        - code [ref=e980]: Deploy OVF Template
                        - text: .
                  - listitem [ref=e981]:
                    - paragraph [ref=e982]:
                      - text: Once the VM is created, right-click it and select
                      - strong [ref=e983]: Convert to Template
                      - text: . This will convert the VM into a Rocky 8 image template that you can reference during the cluster profile creation.
                - heading "ValidateDirect link to Validate" [level=3] [ref=e984]:
                  - text: Validate
                  - link "Direct link to Validate" [ref=e985] [cursor=pointer]:
                    - /url: "#validate"
                    - text: "#"
                - list [ref=e986]:
                  - listitem [ref=e987]:
                    - paragraph [ref=e988]:
                      - text: Log in to the VMware vSphere environment and navigate to the
                      - strong [ref=e989]: Inventory
                      - text: view.
                  - listitem [ref=e990]:
                    - paragraph [ref=e991]:
                      - text: Select the
                      - strong [ref=e992]: VMs and Templates
                      - text: tab and verify the custom Rocky 8 image is available.
                - heading "Create Cluster ProfileDirect link to Create Cluster Profile" [level=2] [ref=e993]:
                  - text: Create Cluster Profile
                  - link "Direct link to Create Cluster Profile" [ref=e994] [cursor=pointer]:
                    - /url: "#create-cluster-profile"
                    - text: "#"
                - paragraph [ref=e995]: The Rocky 8 image is now built and available in the VMware vSphere environment. You can use it to create a cluster profile and deploy a VMware vSphere host cluster.
                - list [ref=e996]:
                  - listitem [ref=e997]:
                    - paragraph [ref=e998]: Log in to your airgapped instance of Palette or VerteX.
                  - listitem [ref=e999]:
                    - paragraph [ref=e1000]:
                      - text: From the left main menu, select
                      - strong [ref=e1001]: Profiles > Add Cluster Profile
                      - text: .
                  - listitem [ref=e1002]:
                    - paragraph [ref=e1003]:
                      - text: In the
                      - strong [ref=e1004]: Basic Information
                      - text: section, assign the cluster profile a
                      - strong [ref=e1005]: Name
                      - text: ", brief"
                      - strong [ref=e1006]: Description
                      - text: ", and"
                      - strong [ref=e1007]: Tags
                      - text: . Choose
                      - strong [ref=e1008]: Full
                      - text: for the profile
                      - strong [ref=e1009]: Type
                      - text: and select
                      - strong [ref=e1010]: Next
                      - text: .
                  - listitem [ref=e1011]:
                    - paragraph [ref=e1012]:
                      - text: In the
                      - strong [ref=e1013]: Cloud Type
                      - text: section, choose
                      - strong [ref=e1014]: VMware vSphere
                      - text: and select
                      - strong [ref=e1015]: Next
                      - text: .
                  - listitem [ref=e1016]:
                    - paragraph [ref=e1017]:
                      - text: The
                      - strong [ref=e1018]: Profile Layers
                      - text: section is where you specify the packs that compose the profile. For this guide, use the following packs.
                    - table [ref=e1019]:
                      - rowgroup [ref=e1020]:
                        - row "Pack Name Version Layer" [ref=e1021]:
                          - cell "Pack Name" [ref=e1022]
                          - cell "Version" [ref=e1023]
                          - cell "Layer" [ref=e1024]
                      - rowgroup [ref=e1025]:
                        - row "BYOOS 1.0.0 Operating System" [ref=e1026]:
                          - cell "BYOOS" [ref=e1027]
                          - cell "1.0.0" [ref=e1028]
                          - cell "Operating System" [ref=e1029]
                        - row "Palette eXtended Kubernetes 1.30.5 Kubernetes" [ref=e1030]:
                          - cell "Palette eXtended Kubernetes" [ref=e1031]
                          - cell "1.30.5" [ref=e1032]
                          - cell "Kubernetes" [ref=e1033]
                        - row "Cilium 1.15.3 Network" [ref=e1034]:
                          - cell "Cilium" [ref=e1035]
                          - cell "1.15.3" [ref=e1036]
                          - cell "Network" [ref=e1037]
                        - row "vSphere CSI 3.2.0 Storage" [ref=e1038]:
                          - cell "vSphere CSI" [ref=e1039]
                          - cell "3.2.0" [ref=e1040]
                          - cell "Storage" [ref=e1041]
                    - paragraph [ref=e1042]:
                      - text: Reference the custom Rocky 8 image template path in your VMware vSphere environment when populating the pack details for the
                      - link "BYOOS" [ref=e1043] [cursor=pointer]:
                        - /url: /integrations/packs/?pack=generic-byoi
                      - text: layer.
                    - generic [ref=e1044]:
                      - generic [ref=e1045]: Example YAML configuration
                      - generic [ref=e1046]:
                        - code [ref=e1048]:
                          - generic [ref=e1049]: "pack:"
                          - generic [ref=e1050]: "osImageOverride: \"/Datacenter/vm/sp-docs/rockylinux-8-kube-v1.30.5\""
                          - generic [ref=e1051]: "osName: \"rockylinux\""
                          - generic [ref=e1052]: "osVersion: \"8\""
                        - button "Toggle word wrap" [ref=e1054] [cursor=pointer]:
                          - img [ref=e1055]
                    - paragraph [ref=e1057]:
                      - text: As you fill out the information for each layer, select
                      - strong [ref=e1058]: Next
                      - text: to proceed.
                    - generic [ref=e1059]:
                      - generic [ref=e1060]:
                        - img [ref=e1062]
                        - text: warning
                      - paragraph [ref=e1065]:
                        - text: The Palette eXtended Kubernetes pack version must match the
                        - code [ref=e1066]: k8s_version
                        - text: specified in the
                        - code [ref=e1067]: imageconfig
                        - text: file.
                  - listitem [ref=e1068]:
                    - paragraph [ref=e1069]:
                      - text: Review the profile layers and select
                      - strong [ref=e1070]: Finish Configuration
                      - text: to create the cluster profile.
                - heading "ValidateDirect link to Validate" [level=3] [ref=e1071]:
                  - text: Validate
                  - link "Direct link to Validate" [ref=e1072] [cursor=pointer]:
                    - /url: "#validate-1"
                    - text: "#"
                - list [ref=e1073]:
                  - listitem [ref=e1074]:
                    - paragraph [ref=e1075]: Log in to your airgapped instance of Palette or VerteX.
                  - listitem [ref=e1076]:
                    - paragraph [ref=e1077]:
                      - text: From the left main menu, select
                      - strong [ref=e1078]: Profiles
                      - text: . Verify that your new cluster profile is available.
                - heading "Next StepsDirect link to Next Steps" [level=2] [ref=e1079]:
                  - text: Next Steps
                  - link "Direct link to Next Steps" [ref=e1080] [cursor=pointer]:
                    - /url: "#next-steps"
                    - text: "#"
                - paragraph [ref=e1081]:
                  - text: After you have created an OS image with CAPI Image Builder and have it referenced in a cluster profile, you can deploy a VMware host cluster using the created cluster profile. Refer to the
                  - link "Create and Manage VMware Clusters" [ref=e1082] [cursor=pointer]:
                    - /url: /clusters/data-center/vmware/create-manage-vmware-clusters/
                  - text: guide for instructions on deploying a VMware host cluster.
              - generic [ref=e1083]:
                - generic [ref=e1085]:
                  - text: "Tags:"
                  - list [ref=e1086]:
                    - listitem [ref=e1087]:
                      - link "operating system" [ref=e1088] [cursor=pointer]:
                        - /url: /tags/operating-system/
                    - listitem [ref=e1089]:
                      - link "byoos" [ref=e1090] [cursor=pointer]:
                        - /url: /tags/byoos/
                    - listitem [ref=e1091]:
                      - link "profiles" [ref=e1092] [cursor=pointer]:
                        - /url: /tags/profiles/
                    - listitem [ref=e1093]:
                      - link "pxk" [ref=e1094] [cursor=pointer]:
                        - /url: /tags/pxk/
                    - listitem [ref=e1095]:
                      - link "vmware" [ref=e1096] [cursor=pointer]:
                        - /url: /tags/vmware/
                    - listitem [ref=e1097]:
                      - link "airgap" [ref=e1098] [cursor=pointer]:
                        - /url: /tags/airgap/
                - link "Edit this page" [ref=e1101] [cursor=pointer]:
                  - /url: https://github.com/spectrocloud/librarium/blob/master/docs/docs-content/byoos/capi-image-builder/build-image-vmware/airgap-build/rocky-capi-airgap.md
                  - img [ref=e1102]
                  - text: Edit this page
            - navigation "Docs pages" [ref=e1106]:
              - link "Previous  RHEL and PXK" [ref=e1107] [cursor=pointer]:
                - /url: /byoos/capi-image-builder/build-image-vmware/airgap-build/rhel-capi-airgap/
                - generic [ref=e1108]: Previous
                - generic [ref=e1109]:  RHEL and PXK
              - link "Next Configuration Reference " [ref=e1110] [cursor=pointer]:
                - /url: /byoos/capi-image-builder/config-reference/
                - generic [ref=e1111]: Next
                - generic [ref=e1112]: Configuration Reference 
          - list [ref=e1115]:
            - listitem [ref=e1116]:
              - link "Prerequisites" [ref=e1117] [cursor=pointer]:
                - /url: "#prerequisites"
            - listitem [ref=e1118]:
              - link "Build Custom Image" [ref=e1119] [cursor=pointer]:
                - /url: "#build-custom-image"
              - list [ref=e1120]:
                - listitem [ref=e1121]:
                  - link "Validate" [ref=e1122] [cursor=pointer]:
                    - /url: "#validate"
            - listitem [ref=e1123]:
              - link "Create Cluster Profile" [ref=e1124] [cursor=pointer]:
                - /url: "#create-cluster-profile"
              - list [ref=e1125]:
                - listitem [ref=e1126]:
                  - link "Validate" [ref=e1127] [cursor=pointer]:
                    - /url: "#validate-1"
            - listitem [ref=e1128]:
              - link "Next Steps" [ref=e1129] [cursor=pointer]:
                - /url: "#next-steps"
  - button "Project Logo Ask AI" [ref=e1130] [cursor=pointer]:
    - generic [ref=e1133]:
      - img "Project Logo" [ref=e1134]
      - paragraph [ref=e1135]: Ask AI
```