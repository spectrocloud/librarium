# Page snapshot

```yaml
- generic [active] [ref=e1]:
  - generic [ref=e2]:
    - region "Skip to main content":
      - link "Skip to main content" [ref=e3] [cursor=pointer]:
        - /url: "#__docusaurus_skipToContent_fallback"
    - navigation "Main" [ref=e4]:
      - generic [ref=e5]:
        - generic [ref=e6]:
          - link "Spectro cloud logo" [ref=e7] [cursor=pointer]:
            - /url: /
            - img "Spectro cloud logo" [ref=e9]
          - link "Docs" [ref=e10] [cursor=pointer]:
            - /url: /release-notes/
          - link "Tutorials" [ref=e11] [cursor=pointer]:
            - /url: /tutorials/
          - link "Downloads" [ref=e12] [cursor=pointer]:
            - /url: /downloads/
          - link "API" [ref=e13] [cursor=pointer]:
            - /url: /api/introduction/
          - button "latest" [ref=e15] [cursor=pointer]
        - generic [ref=e16]:
          - link "GitHub repository" [ref=e17] [cursor=pointer]:
            - /url: https://github.com/spectrocloud/librarium
          - button "Switch between dark and light mode (currently system mode)" [ref=e19] [cursor=pointer]:
            - img [ref=e20]
          - button "Search (Ctrl+K)" [ref=e23] [cursor=pointer]:
            - generic [ref=e24]:
              - img [ref=e25]
              - generic [ref=e27]: Search
    - generic [ref=e31]:
      - complementary [ref=e32]:
        - generic [ref=e34]:
          - link "Spectro cloud logo" [ref=e35] [cursor=pointer]:
            - /url: /
            - img "Spectro cloud logo" [ref=e36]
          - navigation "Docs sidebar" [ref=e37]:
            - list [ref=e38]:
              - listitem [ref=e39]:
                - generic [ref=e40]:
                  - link "Release Notes" [ref=e41] [cursor=pointer]:
                    - /url: /release-notes/
                    - img [ref=e43]
                    - text: Release Notes
                  - button "Toggle the collapsible sidebar category 'Release Notes'" [ref=e45] [cursor=pointer]
              - listitem [ref=e46]:
                - generic [ref=e47]:
                  - link "Security Bulletins" [ref=e48] [cursor=pointer]:
                    - /url: /security-bulletins/
                    - img [ref=e50]
                    - text: Security Bulletins
                  - button "Toggle the collapsible sidebar category 'Security Bulletins'" [ref=e52] [cursor=pointer]
              - listitem [ref=e53]:
                - generic [ref=e54]:
                  - link "What is Palette?" [ref=e55] [cursor=pointer]:
                    - /url: /
                    - img [ref=e57]
                    - text: What is Palette?
                  - button "Toggle the collapsible sidebar category 'What is Palette?'" [ref=e59] [cursor=pointer]
              - listitem [ref=e60]:
                - link "Getting Started" [ref=e61] [cursor=pointer]:
                  - /url: /getting-started/
                  - img [ref=e63]
                  - text: Getting Started
              - listitem [ref=e65]:
                - generic [ref=e66]:
                  - link "Architecture" [ref=e67] [cursor=pointer]:
                    - /url: /architecture/
                    - img [ref=e69]
                    - text: Architecture
                  - button "Toggle the collapsible sidebar category 'Architecture'" [ref=e71] [cursor=pointer]
              - listitem [ref=e72]:
                - generic [ref=e73]:
                  - link "Profiles" [ref=e74] [cursor=pointer]:
                    - /url: /profiles/
                    - img [ref=e76]
                    - text: Profiles
                  - button "Toggle the collapsible sidebar category 'Profiles'" [ref=e80] [cursor=pointer]
              - listitem [ref=e81]:
                - generic [ref=e82]:
                  - link "Deployment Modes" [ref=e83] [cursor=pointer]:
                    - /url: /deployment-modes/
                    - img [ref=e85]
                    - text: Deployment Modes
                  - button "Toggle the collapsible sidebar category 'Deployment Modes'" [ref=e87] [cursor=pointer]
              - listitem [ref=e88]:
                - generic [ref=e89]:
                  - link "Clusters" [ref=e90] [cursor=pointer]:
                    - /url: /clusters/
                    - img [ref=e92]
                    - text: Clusters
                  - button "Toggle the collapsible sidebar category 'Clusters'" [ref=e98] [cursor=pointer]
              - listitem [ref=e99]:
                - generic [ref=e100]:
                  - link "Bring Your Own OS (BYOOS)" [expanded] [ref=e101] [cursor=pointer]:
                    - /url: /byoos/
                    - img [ref=e103]
                    - text: Bring Your Own OS (BYOOS)
                  - button "Toggle the collapsible sidebar category 'Bring Your Own OS (BYOOS)'" [ref=e105] [cursor=pointer]
                - list [ref=e106]:
                  - listitem [ref=e107]:
                    - generic [ref=e108]:
                      - link "Create Images with Image Builder" [ref=e109] [cursor=pointer]:
                        - /url: /byoos/image-builder/
                      - button "Toggle the collapsible sidebar category 'Create Images with Image Builder'" [ref=e110] [cursor=pointer]
                  - listitem [ref=e111]:
                    - generic [ref=e112]:
                      - link "CAPI Image Builder" [expanded] [ref=e113] [cursor=pointer]:
                        - /url: /byoos/capi-image-builder/
                      - button "Toggle the collapsible sidebar category 'CAPI Image Builder'" [ref=e114] [cursor=pointer]
                    - list [ref=e115]:
                      - listitem [ref=e116]:
                        - generic [ref=e117]:
                          - link "Build Image for VMware vSphere" [expanded] [ref=e118] [cursor=pointer]:
                            - /url: /byoos/capi-image-builder/build-image-vmware/
                          - button "Toggle the collapsible sidebar category 'Build Image for VMware vSphere'" [ref=e119] [cursor=pointer]
                        - list [ref=e120]:
                          - listitem [ref=e121]:
                            - generic [ref=e122]:
                              - link "Non-Airgap Build" [expanded] [ref=e123] [cursor=pointer]:
                                - /url: /byoos/capi-image-builder/build-image-vmware/non-airgap-build/
                              - button "Toggle the collapsible sidebar category 'Non-Airgap Build'" [ref=e124] [cursor=pointer]
                            - list [ref=e125]:
                              - listitem [ref=e126]:
                                - link "RHEL and PXK" [ref=e127] [cursor=pointer]:
                                  - /url: /byoos/capi-image-builder/build-image-vmware/non-airgap-build/rhel-capi/
                              - listitem [ref=e128]:
                                - link "Rocky and PXK" [ref=e129] [cursor=pointer]:
                                  - /url: /byoos/capi-image-builder/build-image-vmware/non-airgap-build/rocky-capi/
                          - listitem [ref=e130]:
                            - generic [ref=e131]:
                              - link "Airgap Build" [ref=e132] [cursor=pointer]:
                                - /url: /byoos/capi-image-builder/build-image-vmware/airgap-build/
                              - button "Toggle the collapsible sidebar category 'Airgap Build'" [ref=e133] [cursor=pointer]
                      - listitem [ref=e134]:
                        - link "Configuration Reference" [ref=e135] [cursor=pointer]:
                          - /url: /byoos/capi-image-builder/config-reference/
                      - listitem [ref=e136]:
                        - link "Compatibility Matrix" [ref=e137] [cursor=pointer]:
                          - /url: /byoos/capi-image-builder/comp-matrix-capi-builder/
              - listitem [ref=e138]:
                - generic [ref=e139]:
                  - link "Palette Dev Engine" [ref=e140] [cursor=pointer]:
                    - /url: /devx/
                    - img [ref=e142]
                    - text: Palette Dev Engine
                  - button "Toggle the collapsible sidebar category 'Palette Dev Engine'" [ref=e144] [cursor=pointer]
              - listitem [ref=e145]:
                - generic [ref=e146]:
                  - link "Virtual Machine Orchestrator" [ref=e147] [cursor=pointer]:
                    - /url: /vm-management/
                    - img [ref=e149]
                    - text: Virtual Machine Orchestrator
                  - button "Toggle the collapsible sidebar category 'Virtual Machine Orchestrator'" [ref=e151] [cursor=pointer]
              - listitem [ref=e152]:
                - generic [ref=e153]:
                  - link "Workspaces" [ref=e154] [cursor=pointer]:
                    - /url: /workspace/
                    - img [ref=e156]
                    - text: Workspaces
                  - button "Toggle the collapsible sidebar category 'Workspaces'" [ref=e158] [cursor=pointer]
              - listitem [ref=e159]:
                - generic [ref=e160]:
                  - link "Packs List" [ref=e161] [cursor=pointer]:
                    - /url: /integrations/
                    - img [ref=e163]
                    - text: Packs List
                  - button "Toggle the collapsible sidebar category 'Packs List'" [ref=e165] [cursor=pointer]
              - listitem [ref=e166]:
                - generic [ref=e167]:
                  - link "User & Role Management" [ref=e168] [cursor=pointer]:
                    - /url: /user-management/
                    - img [ref=e170]
                    - text: User & Role Management
                  - button "Toggle the collapsible sidebar category 'User & Role Management'" [ref=e172] [cursor=pointer]
              - listitem [ref=e173]:
                - generic [ref=e174]:
                  - link "Registries and Packs" [ref=e175] [cursor=pointer]:
                    - /url: /registries-and-packs/
                    - img [ref=e177]
                    - text: Registries and Packs
                  - button "Toggle the collapsible sidebar category 'Registries and Packs'" [ref=e179] [cursor=pointer]
              - listitem [ref=e180]:
                - generic [ref=e181]:
                  - link "Security" [ref=e182] [cursor=pointer]:
                    - /url: /security/
                    - img [ref=e184]
                    - text: Security
                  - button "Toggle the collapsible sidebar category 'Security'" [ref=e186] [cursor=pointer]
              - listitem [ref=e187]:
                - generic [ref=e188]:
                  - link "Audit Logs" [ref=e189] [cursor=pointer]:
                    - /url: /audit-logs/
                    - img [ref=e191]
                    - text: Audit Logs
                  - button "Toggle the collapsible sidebar category 'Audit Logs'" [ref=e193] [cursor=pointer]
              - listitem [ref=e194]:
                - generic [ref=e195]:
                  - link "Self-Hosted Palette" [ref=e196] [cursor=pointer]:
                    - /url: /enterprise-version/
                    - img [ref=e198]
                    - text: Self-Hosted Palette
                  - button "Toggle the collapsible sidebar category 'Self-Hosted Palette'" [ref=e200] [cursor=pointer]
              - listitem [ref=e201]:
                - generic [ref=e202]:
                  - link "Palette VerteX" [ref=e203] [cursor=pointer]:
                    - /url: /vertex/
                    - img [ref=e205]
                    - text: Palette VerteX
                  - button "Toggle the collapsible sidebar category 'Palette VerteX'" [ref=e207] [cursor=pointer]
              - listitem [ref=e208]:
                - generic [ref=e209]:
                  - link "Tenant Administration" [ref=e210] [cursor=pointer]:
                    - /url: /tenant-settings/
                    - img [ref=e212]
                    - text: Tenant Administration
                  - button "Toggle the collapsible sidebar category 'Tenant Administration'" [ref=e214] [cursor=pointer]
              - listitem [ref=e215]:
                - generic [ref=e216]:
                  - link "Automation" [ref=e217] [cursor=pointer]:
                    - /url: /automation/
                    - img [ref=e219]
                    - text: Automation
                  - button "Toggle the collapsible sidebar category 'Automation'" [ref=e221] [cursor=pointer]
              - listitem [ref=e222]:
                - generic [ref=e223]:
                  - link "Troubleshooting" [ref=e224] [cursor=pointer]:
                    - /url: /troubleshooting/
                    - img [ref=e226]
                    - text: Troubleshooting
                  - button "Toggle the collapsible sidebar category 'Troubleshooting'" [ref=e228] [cursor=pointer]
              - listitem [ref=e229]:
                - link "Glossary" [ref=e230] [cursor=pointer]:
                  - /url: /glossary-all/
                  - img [ref=e232]
                  - text: Glossary
              - listitem [ref=e234]:
                - generic [ref=e235]:
                  - link "Compliance & Legal" [ref=e236] [cursor=pointer]:
                    - /url: /legal-licenses/
                    - img [ref=e238]
                    - text: Compliance & Legal
                  - button "Toggle the collapsible sidebar category 'Compliance & Legal'" [ref=e240] [cursor=pointer]
              - listitem [ref=e241]:
                - button "Privacy Settings" [ref=e242] [cursor=pointer]:
                  - img [ref=e243]
                  - text: Privacy Settings
      - main [ref=e245]:
        - generic [ref=e247]:
          - generic [ref=e249]:
            - article [ref=e250]:
              - navigation "Breadcrumbs" [ref=e251]:
                - list [ref=e252]:
                  - listitem [ref=e253]:
                    - link "Home page" [ref=e254] [cursor=pointer]:
                      - /url: /
                      - img [ref=e255]
                  - listitem [ref=e257]:
                    - link "Bring Your Own OS (BYOOS)" [ref=e258] [cursor=pointer]:
                      - /url: /byoos/
                  - listitem [ref=e259]:
                    - link "CAPI Image Builder" [ref=e260] [cursor=pointer]:
                      - /url: /byoos/capi-image-builder/
                  - listitem [ref=e261]:
                    - link "Build Image for VMware vSphere" [ref=e262] [cursor=pointer]:
                      - /url: /byoos/capi-image-builder/build-image-vmware/
                  - listitem [ref=e263]:
                    - link "Non-Airgap Build" [ref=e264] [cursor=pointer]:
                      - /url: /byoos/capi-image-builder/build-image-vmware/non-airgap-build/
                  - listitem [ref=e265]:
                    - generic [ref=e266]: Rocky and PXK
              - generic [ref=e267]:
                - heading "Rocky and Palette eXtended Kubernetes" [level=1] [ref=e269]
                - paragraph [ref=e270]:
                  - text: This guide teaches you how to use the
                  - link "CAPI Image Builder" [ref=e271] [cursor=pointer]:
                    - /url: /byoos/capi-image-builder/
                  - text: tool to create a custom
                  - link "Rocky Linux" [ref=e272] [cursor=pointer]:
                    - /url: https://rockylinux.org/
                  - text: image with
                  - link "Palette eXtended Kubernetes (PXK)" [ref=e273] [cursor=pointer]:
                    - /url: /integrations/packs/?pack=kubernetes
                  - text: for VMware vSphere and use the image to create a cluster profile.
                - generic [ref=e274]:
                  - generic [ref=e275]:
                    - img [ref=e277]
                    - text: tech preview
                  - generic [ref=e279]: This is a Tech Preview feature and is subject to change. Do not use this feature in production workloads.
                - heading "PrerequisitesDirect link to Prerequisites" [level=2] [ref=e280]:
                  - text: Prerequisites
                  - link "Direct link to Prerequisites" [ref=e281] [cursor=pointer]:
                    - /url: "#prerequisites"
                    - text: "#"
                - list [ref=e282]:
                  - listitem [ref=e283]:
                    - paragraph [ref=e284]: Access to the VMware vSphere environment, including credentials and permission to create virtual machines.
                  - listitem [ref=e285]:
                    - paragraph [ref=e286]: "The machine executing the commands must have the following hardware resources available:"
                    - list [ref=e287]:
                      - listitem [ref=e288]: 4 CPU
                      - listitem [ref=e289]: 8 GB of RAM
                      - listitem [ref=e290]: 50 GB of free disk space
                  - listitem [ref=e291]:
                    - paragraph [ref=e292]: "The following software installed:"
                    - list [ref=e293]:
                      - listitem [ref=e294]:
                        - link "Docker" [ref=e295] [cursor=pointer]:
                          - /url: https://docs.docker.com/engine/install/
                        - text: or
                        - link "Podman" [ref=e296] [cursor=pointer]:
                          - /url: https://podman.io/docs/installation
                      - listitem [ref=e297]:
                        - link "curl" [ref=e298] [cursor=pointer]:
                          - /url: https://curl.se/docs/install.html
                  - listitem [ref=e299]:
                    - paragraph [ref=e300]:
                      - text: (Optional) Any custom Bash scripts (
                      - code [ref=e301]: .sh
                      - text: files) that you want to execute when creating your Rocky image. Custom scripts are supported beginning with CAPI Image Builder version 4.6.23.
                - heading "Build Custom ImageDirect link to Build Custom Image" [level=2] [ref=e302]:
                  - text: Build Custom Image
                  - link "Direct link to Build Custom Image" [ref=e303] [cursor=pointer]:
                    - /url: "#build-custom-image"
                    - text: "#"
                - list [ref=e304]:
                  - listitem [ref=e305]:
                    - paragraph [ref=e306]:
                      - text: Open up a terminal session on your Linux machine and download the CAPI Image Builder image, replacing
                      - code [ref=e307]: <tag>
                      - text: with your desired CAPI Image Builder version. This guide uses version 4.6.23 as an example. Refer to the CAPI Image Builder
                      - link "Downloads" [ref=e308] [cursor=pointer]:
                        - /url: /downloads/capi-image-builder/
                      - text: page for the latest version.
                    - generic [ref=e309]:
                      - tablist [ref=e310]:
                        - tab "Docker" [selected] [ref=e311] [cursor=pointer]
                        - tab "Podman" [ref=e312] [cursor=pointer]
                      - tabpanel [ref=e314]:
                        - generic [ref=e316]:
                          - code [ref=e318]:
                            - generic [ref=e319]: docker pull us-docker.pkg.dev/palette-images/palette/imagebuilder/capi-builder:<tag>
                          - generic [ref=e320]:
                            - button "Toggle word wrap" [ref=e321] [cursor=pointer]:
                              - img [ref=e322]
                            - button "Copy code to clipboard" [ref=e324] [cursor=pointer]:
                              - generic [ref=e325]:
                                - img [ref=e326]
                                - img [ref=e328]
                        - paragraph [ref=e330]: Confirm that the image was downloaded correctly.
                        - generic [ref=e332]:
                          - code [ref=e334]:
                            - generic [ref=e335]: docker images
                          - button "Copy code to clipboard" [ref=e337] [cursor=pointer]:
                            - generic [ref=e338]:
                              - img [ref=e339]
                              - img [ref=e341]
                        - generic [ref=e343]:
                          - generic [ref=e344]: Example output
                          - generic [ref=e345]:
                            - code [ref=e347]:
                              - generic [ref=e348]: REPOSITORY TAG IMAGE ID CREATED SIZE
                              - generic [ref=e349]: us-docker.pkg.dev/palette-images/palette/imagebuilder/capi-builder v4.6.23 2adff15eee2d 7 days ago 2.47 GB
                            - button "Toggle word wrap" [ref=e351] [cursor=pointer]:
                              - img [ref=e352]
                  - listitem [ref=e354]:
                    - paragraph [ref=e355]:
                      - text: Create an
                      - code [ref=e356]: output
                      - text: directory to store the image files and set the required permissions. Replace
                      - code [ref=e357]: <username>
                      - text: with your Linux username.
                    - generic [ref=e359]:
                      - code [ref=e361]:
                        - generic [ref=e362]: mkdir /home/<username>/output
                        - generic [ref=e363]: chmod a+rwx /home/<username>/output
                      - button "Copy code to clipboard" [ref=e365] [cursor=pointer]:
                        - generic [ref=e366]:
                          - img [ref=e367]
                          - img [ref=e369]
                  - listitem [ref=e371]:
                    - paragraph [ref=e372]:
                      - text: Navigate to the
                      - code [ref=e373]: output
                      - text: directory. Replace
                      - code [ref=e374]: <username>
                      - text: with your Linux username.
                    - generic [ref=e376]:
                      - code [ref=e378]:
                        - generic [ref=e379]: cd /home/<username>/output
                      - button "Copy code to clipboard" [ref=e381] [cursor=pointer]:
                        - generic [ref=e382]:
                          - img [ref=e383]
                          - img [ref=e385]
                  - listitem [ref=e387]:
                    - paragraph [ref=e388]:
                      - text: Download the
                      - link "Rocky Linux ISO file" [ref=e389] [cursor=pointer]:
                        - /url: https://download.rockylinux.org/pub/rocky/
                      - text: into the
                      - code [ref=e390]: output
                      - text: directory. Ensure you download a
                      - code [ref=e391]: x86_64-dvd.iso
                      - text: file and not a
                      - code [ref=e392]: x86_64-boot.iso
                      - text: file.
                    - paragraph [ref=e393]:
                      - text: This guide uses Rocky 8 as an example. Refer to the
                      - link "Configuration Reference" [ref=e394] [cursor=pointer]:
                        - /url: /byoos/capi-image-builder/config-reference/
                      - text: page for details on supported operating systems.
                    - generic [ref=e396]:
                      - code [ref=e398]:
                        - generic [ref=e399]: curl https://download.rockylinux.org/pub/rocky/8/isos/x86_64/Rocky-8-latest-x86_64-dvd.iso --output Rocky-8-latest-x86_64-dvd.iso
                      - generic [ref=e400]:
                        - button "Toggle word wrap" [ref=e401] [cursor=pointer]:
                          - img [ref=e402]
                        - button "Copy code to clipboard" [ref=e404] [cursor=pointer]:
                          - generic [ref=e405]:
                            - img [ref=e406]
                            - img [ref=e408]
                  - listitem [ref=e410]:
                    - paragraph [ref=e411]: Calculate the SHA256 checksum for the Rocky ISO you downloaded. The calculation might take a few minutes. Save the output, as you will need it later.
                    - generic [ref=e413]:
                      - code [ref=e415]:
                        - generic [ref=e416]: sha256sum Rocky-8-latest-x86_64-dvd.iso
                      - button "Copy code to clipboard" [ref=e418] [cursor=pointer]:
                        - generic [ref=e419]:
                          - img [ref=e420]
                          - img [ref=e422]
                    - paragraph [ref=e424]: The output should be similar to the sample output displayed below.
                    - generic [ref=e425]:
                      - generic [ref=e426]: Example Rocky SHA
                      - generic [ref=e427]:
                        - code [ref=e429]:
                          - generic [ref=e430]: 642ada8a49dbeca8cca6543b31196019ee3d649a0163b5db0e646c7409364eeb Rocky-8-latest-x86_64-dvd.iso
                        - generic [ref=e431]:
                          - button "Toggle word wrap" [ref=e432] [cursor=pointer]:
                            - img [ref=e433]
                          - button "Copy code to clipboard" [ref=e435] [cursor=pointer]:
                            - generic [ref=e436]:
                              - img [ref=e437]
                              - img [ref=e439]
                  - listitem [ref=e441]:
                    - paragraph [ref=e442]:
                      - text: Download the
                      - code [ref=e443]: imageconfig
                      - text: template file.
                    - generic [ref=e445]:
                      - code [ref=e447]:
                        - generic [ref=e448]: curl https://software.spectrocloud.com/tools/capi-image-builder/imageconfig --output imageconfig
                      - generic [ref=e449]:
                        - button "Toggle word wrap" [ref=e450] [cursor=pointer]:
                          - img [ref=e451]
                        - button "Copy code to clipboard" [ref=e453] [cursor=pointer]:
                          - generic [ref=e454]:
                            - img [ref=e455]
                            - img [ref=e457]
                  - listitem [ref=e459]:
                    - paragraph [ref=e460]:
                      - text: Open the
                      - code [ref=e461]: imageconfig
                      - text: template file in an editor of your choice and fill in the required parameters. For a complete list of parameters, refer to the
                      - link "Configuration Reference" [ref=e462] [cursor=pointer]:
                        - /url: /byoos/capi-image-builder/config-reference/
                      - text: page. Additionally, refer to the
                      - link "Compatibility Matrix" [ref=e463] [cursor=pointer]:
                        - /url: /byoos/capi-image-builder/comp-matrix-capi-builder/
                      - text: for a list of supported Kubernetes versions and their corresponding dependencies.
                    - paragraph [ref=e464]:
                      - text: The
                      - code [ref=e465]: imageconfig
                      - text: file is the file used to personalize the base CAPI image for your cluster, which you can alter to fit your needs. This includes specifying the OS type, Kubernetes version, whether the image should be FIPS compliant, and more.
                    - paragraph [ref=e466]:
                      - text: Use the example configuration below to configure a Rocky 8 CAPI image. Use the SHA256 checksum of the Rocky ISO from step 5 of this guide for
                      - code [ref=e467]: <iso-checksum>
                      - text: . Additionally, replace the VMware-related placeholders with the values from your VMware vSphere environment.
                    - generic [ref=e469]:
                      - code [ref=e471]:
                        - generic [ref=e472]: "# Define the OS type and version here"
                        - generic [ref=e473]: "# os_version=rhel-8 | rhel-9 | rockylinux-8 | rockylinux-9"
                        - generic [ref=e474]: "# image_type=standard | fips"
                        - generic [ref=e475]: os_version=rockylinux-8
                        - generic [ref=e476]: image_type=standard
                        - generic [ref=e477]: "# Define the image name"
                        - generic [ref=e478]: "# image_name=<Final Image Name to create>"
                        - generic [ref=e479]: image_name=rocky-8
                        - generic [ref=e480]: "# Define the Cloud type"
                        - generic [ref=e481]: "# cloud_type=vmware"
                        - generic [ref=e482]: cloud_type=vmware
                        - generic [ref=e483]: "# Define the Component Versions"
                        - generic [ref=e484]: "#"
                        - generic [ref=e485]: "# containerd crictl and cni version update should be done"
                        - generic [ref=e486]: "# only if the images are available in the upstream repositories"
                        - generic [ref=e487]: k8s_version=1.30.4
                        - generic [ref=e488]: cni_version=1.3.0
                        - generic [ref=e489]: containerd_version=1.7.13
                        - generic [ref=e490]: crictl_version=1.28.0
                        - generic [ref=e491]: "# Define RHEL subscription credentials(if $image_type=rhel)"
                        - generic [ref=e492]: "# used while image creation to use package manager"
                        - generic [ref=e493]: "#rhel_subscription-user="
                        - generic [ref=e494]: "#rhel_subscription_pass="
                        - generic [ref=e495]: "# Define ISO url(if image is rhel or rockylinux)"
                        - generic [ref=e496]: iso_name=Rocky-8-latest-x86_64-dvd.iso
                        - generic [ref=e497]: iso_checksum=<iso-checksum>
                        - generic [ref=e498]: "# Define AWS infra details"
                        - generic [ref=e499]: aws_access_key=
                        - generic [ref=e500]: aws_secret_key=
                        - generic [ref=e501]: "# Define Vmware infra details"
                        - generic [ref=e502]: vcenter_server=<vcenter-server>
                        - generic [ref=e503]: vcenter_user=<vcenter-user>
                        - generic [ref=e504]: vcenter_password=<vcenter-password>
                        - generic [ref=e505]: vcenter_datacenter=<vcenter-datacenter>
                        - generic [ref=e506]: vcenter_datastore=<vcenter-datastore>
                        - generic [ref=e507]: vcenter_network=<vcenter-network>
                        - generic [ref=e508]: vcenter_folder=<vcenter-folder>
                        - generic [ref=e509]: vcenter_cluster=<vcenter-cluster>
                        - generic [ref=e510]: vcenter_resource_pool=<vcenter-resource-pool>
                        - generic [ref=e511]: "# Optional: for OVA based builds"
                        - generic [ref=e512]: vcenter_template=
                        - generic [ref=e513]: "# Define Azure infra details"
                        - generic [ref=e514]: azure_client_id=
                        - generic [ref=e515]: azure_client_secret=
                        - generic [ref=e516]: azure_subscription_id=
                        - generic [ref=e517]: azure_location=
                        - generic [ref=e518]: azure_storage_account=
                        - generic [ref=e519]: azure_resource_group=
                        - generic [ref=e520]: "# Define GCE infra details"
                        - generic [ref=e521]: google_app_creds=
                        - generic [ref=e522]: gcp_project_id=
                        - generic [ref=e523]: "# Airgap Configuration"
                        - generic [ref=e524]: airgap=false
                        - generic [ref=e525]: airgap_ip=""
                        - generic [ref=e526]: k8s_rpm_key=
                        - generic [ref=e527]: k8s_rpm_server=
                        - generic [ref=e528]: containerd_url=
                        - generic [ref=e529]: crictl_url=
                        - generic [ref=e530]: k8s_container_reg=
                        - generic [ref=e531]: cert_url=
                      - generic [ref=e532]:
                        - button "Toggle word wrap" [ref=e533] [cursor=pointer]:
                          - img [ref=e534]
                        - button "Copy code to clipboard" [ref=e536] [cursor=pointer]:
                          - generic [ref=e537]:
                            - img [ref=e538]
                            - img [ref=e540]
                    - generic [ref=e542]:
                      - generic [ref=e543]:
                        - img [ref=e545]
                        - text: tip
                      - paragraph [ref=e548]:
                        - text: To build a FIPS-compliant image, set
                        - code [ref=e549]: image_type
                        - text: to
                        - code [ref=e550]: fips
                        - text: .
                    - paragraph [ref=e551]: Once you are finished making changes, save and exit the file.
                  - listitem [ref=e552]:
                    - paragraph [ref=e553]:
                      - text: (Optional) You can add custom Bash scripts (
                      - code [ref=e554]: .sh
                      - text: files) to run before or after the build process. This feature is available beginning with CAPI Image Builder version 4.6.23. If any scripts are found in the relevant directories, they are copied to an Ansible playbook. If you do not want to add custom scripts, skip this step.
                    - group [ref=e555]:
                      - generic "Add Pre- and Post-Install Bash Scripts" [ref=e556] [cursor=pointer]
                  - listitem [ref=e557]:
                    - paragraph [ref=e558]:
                      - text: Issue the command below to start the CAPI Image Builder container and assign the container ID to the
                      - code [ref=e559]: BUILD_ID
                      - text: variable. The tool will create and configure a VM with Dynamic Host Configuration Protocol (DHCP) in your VMware vSphere environment using the
                      - code [ref=e560]: image_name
                      - text: defined in
                      - code [ref=e561]: imageconfig
                      - text: . For this guide, the VM is named
                      - code [ref=e562]: rocky-8
                      - text: . The tool will then generate a Rocky 8 CAPI image from the VM and save it to the
                      - code [ref=e563]: output
                      - text: directory.
                    - paragraph [ref=e564]:
                      - text: Replace
                      - code [ref=e565]: <username>
                      - text: with your Linux username and
                      - code [ref=e566]: <tag>
                      - text: with your CAPI Image Builder version.
                    - generic [ref=e567]:
                      - tablist [ref=e568]:
                        - tab "Docker" [selected] [ref=e569] [cursor=pointer]
                        - tab "Podman" [ref=e570] [cursor=pointer]
                      - tabpanel [ref=e572]:
                        - generic [ref=e574]:
                          - code [ref=e576]:
                            - generic [ref=e577]: BUILD_ID=$(docker run --net=host --volume /home/<username>/output:/home/imagebuilder/output --detach us-docker.pkg.dev/palette-images/palette/imagebuilder/capi-builder:<tag>)
                          - generic [ref=e578]:
                            - button "Toggle word wrap" [ref=e579] [cursor=pointer]:
                              - img [ref=e580]
                            - button "Copy code to clipboard" [ref=e582] [cursor=pointer]:
                              - generic [ref=e583]:
                                - img [ref=e584]
                                - img [ref=e586]
                    - paragraph [ref=e588]: If you need the VM to use static IP placement instead of DHCP, follow the steps described below.
                    - group [ref=e589]:
                      - generic "CAPI Image Builder with Static IP Placement" [ref=e590] [cursor=pointer]
                  - listitem [ref=e591]:
                    - paragraph [ref=e592]: Execute the following command to view the CAPI Image Builder container logs and monitor the build progress. If you added any custom scripts in step 8, the output will be displayed in the build log.
                    - generic [ref=e593]:
                      - tablist [ref=e594]:
                        - tab "Docker" [selected] [ref=e595] [cursor=pointer]
                        - tab "Podman" [ref=e596] [cursor=pointer]
                      - tabpanel [ref=e598]:
                        - generic [ref=e600]:
                          - code [ref=e602]:
                            - generic [ref=e603]: docker logs --follow $BUILD_ID
                          - button "Copy code to clipboard" [ref=e605] [cursor=pointer]:
                            - generic [ref=e606]:
                              - img [ref=e607]
                              - img [ref=e609]
                    - generic [ref=e611]:
                      - generic [ref=e612]:
                        - img [ref=e614]
                        - text: info
                      - paragraph [ref=e617]: It may take a few minutes for the logs to start being displayed, and the build takes several minutes to complete.
                  - listitem [ref=e618]:
                    - paragraph [ref=e619]:
                      - text: Once the build is complete, the Rocky 8 CAPI image will be downloaded to the
                      - code [ref=e620]: output
                      - text: directory as the
                      - code [ref=e621]: image_name
                      - text: specified in the
                      - code [ref=e622]: imageconfig
                      - text: file. For this example, the image is
                      - code [ref=e623]: rocky-8
                      - text: . Once the image is created, the VM is deleted from VMware vSphere.
                    - paragraph [ref=e624]:
                      - text: Issue the command below to confirm that the build files are present in the
                      - code [ref=e625]: output
                      - text: directory, replacing
                      - code [ref=e626]: rocky-8
                      - text: with your specified
                      - code [ref=e627]: image_name
                      - text: ", if different."
                    - generic [ref=e629]:
                      - code [ref=e631]:
                        - generic [ref=e632]: ls rocky-8
                      - button "Copy code to clipboard" [ref=e634] [cursor=pointer]:
                        - generic [ref=e635]:
                          - img [ref=e636]
                          - img [ref=e638]
                    - generic [ref=e640]:
                      - generic [ref=e641]: Example output
                      - generic [ref=e642]:
                        - code [ref=e644]:
                          - generic [ref=e645]: packer-manifest.json rockylinux-8-kube-v1.30.4.mf rockylinux-8-kube-v1.30.4.ovf rocky-8-disk-0.vmdk rockylinux-8-kube-v1.30.4.ova rocky-8.ovf rockylinux-8-kube-v1.30.4.ova.sha256
                        - button "Toggle word wrap" [ref=e647] [cursor=pointer]:
                          - img [ref=e648]
                  - listitem [ref=e650]:
                    - paragraph [ref=e651]:
                      - text: To make the image available in VMware vSphere, log in to your environment and locate the
                      - code [ref=e652]: vcenter_folder
                      - text: defined in the
                      - code [ref=e653]: imageconfig
                      - text: in step 7 of this guide.
                    - generic [ref=e654]:
                      - generic [ref=e655]:
                        - img [ref=e657]
                        - text: tip
                      - paragraph [ref=e660]: You can also use the following steps to make the image available in a VMware vSphere environment that is not connected to the one you used for building the image.
                  - listitem [ref=e661]:
                    - paragraph [ref=e662]:
                      - text: Right-click the folder and select
                      - strong [ref=e663]: Deploy OVF Template
                      - text: to deploy a VM using the Rocky 8 OVA file that was built in step 9 of this guide.
                  - listitem [ref=e664]:
                    - paragraph [ref=e665]:
                      - text: In the
                      - strong [ref=e666]: Deploy OVF Template
                      - text: wizard, select
                      - strong [ref=e667]: Local File > Upload Files
                      - text: ", and choose the OVA file located in the"
                      - code [ref=e668]: output
                      - text: folder on your local machine. This guide uses
                      - code [ref=e669]: rockylinux-8-kube-v1.30.4.ova
                      - text: as an example. Select
                      - strong [ref=e670]: Next
                      - text: to continue.
                  - listitem [ref=e671]:
                    - paragraph [ref=e672]:
                      - text: Assign a name to the virtual machine, such as
                      - code [ref=e673]: rockylinux-8-kube-v1.30.4
                      - text: ", and choose the folder you created previously as the target location. Select"
                      - strong [ref=e674]: Next
                      - text: to proceed.
                  - listitem [ref=e675]:
                    - paragraph [ref=e676]:
                      - text: Choose a compute resource and select
                      - strong [ref=e677]: Next
                      - text: .
                  - listitem [ref=e678]:
                    - paragraph [ref=e679]:
                      - text: Review the VM configuration, accept the license agreements, and select
                      - strong [ref=e680]: Next
                      - text: .
                  - listitem [ref=e681]:
                    - paragraph [ref=e682]:
                      - text: Choose the storage location and network configuration and select
                      - strong [ref=e683]: Next
                      - text: . Then, select
                      - strong [ref=e684]: Finish
                      - text: to deploy the VM.
                    - generic [ref=e685]:
                      - generic [ref=e686]:
                        - img [ref=e688]
                        - text: warning
                      - paragraph [ref=e691]:
                        - text: It takes a while for the VM to deploy, approximately 45 minutes or more, depending on your internet connection. The download of the OVA file takes the majority of the time. You can monitor the progress of this process in VMware vSphere by looking at the
                        - strong [ref=e692]: Recent Tasks
                        - text: tab and filtering the
                        - strong [ref=e693]: Task Name
                        - text: column by
                        - code [ref=e694]: Deploy OVF Template
                        - text: .
                  - listitem [ref=e695]:
                    - paragraph [ref=e696]:
                      - text: Once the VM is created, right-click it and select
                      - strong [ref=e697]: Convert to Template
                      - text: . This will convert the VM into a Rocky 8 image template that you can reference during the cluster profile creation.
                - heading "ValidateDirect link to Validate" [level=3] [ref=e698]:
                  - text: Validate
                  - link "Direct link to Validate" [ref=e699] [cursor=pointer]:
                    - /url: "#validate"
                    - text: "#"
                - list [ref=e700]:
                  - listitem [ref=e701]:
                    - paragraph [ref=e702]:
                      - text: Log in to the VMware vSphere environment and navigate to the
                      - strong [ref=e703]: Inventory
                      - text: view.
                  - listitem [ref=e704]:
                    - paragraph [ref=e705]:
                      - text: Select the
                      - strong [ref=e706]: VMs and Templates
                      - text: tab and verify the custom Rocky 8 image is available.
                - heading "Create Cluster ProfileDirect link to Create Cluster Profile" [level=2] [ref=e707]:
                  - text: Create Cluster Profile
                  - link "Direct link to Create Cluster Profile" [ref=e708] [cursor=pointer]:
                    - /url: "#create-cluster-profile"
                    - text: "#"
                - paragraph [ref=e709]: The Rocky 8 image is now built and available in the VMware vSphere environment. You can use it to create a cluster profile and deploy a VMware host cluster.
                - list [ref=e710]:
                  - listitem [ref=e711]:
                    - paragraph [ref=e712]:
                      - text: Log in to
                      - link "Palette" [ref=e713] [cursor=pointer]:
                        - /url: https://console.spectrocloud.com/
                      - text: .
                  - listitem [ref=e714]:
                    - paragraph [ref=e715]:
                      - text: From the left main menu, select
                      - strong [ref=e716]: Profiles > Add Cluster Profile
                      - text: .
                  - listitem [ref=e717]:
                    - paragraph [ref=e718]:
                      - text: In the
                      - strong [ref=e719]: Basic Information
                      - text: section, assign the cluster profile a
                      - strong [ref=e720]: Name
                      - text: ", brief"
                      - strong [ref=e721]: Description
                      - text: ", and"
                      - strong [ref=e722]: Tags
                      - text: . Choose
                      - strong [ref=e723]: Full
                      - text: for the profile
                      - strong [ref=e724]: Type
                      - text: and select
                      - strong [ref=e725]: Next
                      - text: .
                  - listitem [ref=e726]:
                    - paragraph [ref=e727]:
                      - text: In the
                      - strong [ref=e728]: Cloud Type
                      - text: section, choose
                      - strong [ref=e729]: VMware vSphere
                      - text: and select
                      - strong [ref=e730]: Next
                      - text: .
                  - listitem [ref=e731]:
                    - paragraph [ref=e732]:
                      - text: The
                      - strong [ref=e733]: Profile Layers
                      - text: section is where you specify the packs that compose the profile. For this guide, use the following packs.
                    - table [ref=e734]:
                      - rowgroup [ref=e735]:
                        - row "Pack Name Version Layer" [ref=e736]:
                          - cell "Pack Name" [ref=e737]
                          - cell "Version" [ref=e738]
                          - cell "Layer" [ref=e739]
                      - rowgroup [ref=e740]:
                        - row "BYOOS 1.0.0 Operating System" [ref=e741]:
                          - cell "BYOOS" [ref=e742]
                          - cell "1.0.0" [ref=e743]
                          - cell "Operating System" [ref=e744]
                        - row "Palette eXtended Kubernetes 1.30.4 Kubernetes" [ref=e745]:
                          - cell "Palette eXtended Kubernetes" [ref=e746]
                          - cell "1.30.4" [ref=e747]
                          - cell "Kubernetes" [ref=e748]
                        - row "Cilium 1.15.3 Network" [ref=e749]:
                          - cell "Cilium" [ref=e750]
                          - cell "1.15.3" [ref=e751]
                          - cell "Network" [ref=e752]
                        - row "vSphere CSI 3.2.0 Storage" [ref=e753]:
                          - cell "vSphere CSI" [ref=e754]
                          - cell "3.2.0" [ref=e755]
                          - cell "Storage" [ref=e756]
                    - paragraph [ref=e757]:
                      - text: Reference the custom Rocky 8 image template path in your VMware vSphere environment when populating the pack details for the
                      - link "BYOOS" [ref=e758] [cursor=pointer]:
                        - /url: /integrations/packs/?pack=generic-byoi
                      - text: layer.
                    - generic [ref=e759]:
                      - generic [ref=e760]: Example YAML configuration
                      - generic [ref=e761]:
                        - code [ref=e763]:
                          - generic [ref=e764]: "pack:"
                          - generic [ref=e765]: "osImageOverride: \"/Datacenter/vm/sp-docs/rockylinux-8-kube-v1.30.4\""
                          - generic [ref=e766]: "osName: \"rockylinux\""
                          - generic [ref=e767]: "osVersion: \"8\""
                        - button "Toggle word wrap" [ref=e769] [cursor=pointer]:
                          - img [ref=e770]
                    - paragraph [ref=e772]:
                      - text: As you fill out the information for each layer, select
                      - strong [ref=e773]: Next
                      - text: to proceed.
                    - generic [ref=e774]:
                      - generic [ref=e775]:
                        - img [ref=e777]
                        - text: warning
                      - paragraph [ref=e780]:
                        - text: The Palette eXtended Kubernetes pack version must match the
                        - code [ref=e781]: k8s_version
                        - text: specified in the
                        - code [ref=e782]: imageconfig
                        - text: file.
                  - listitem [ref=e783]:
                    - paragraph [ref=e784]:
                      - text: Review the profile layers and select
                      - strong [ref=e785]: Finish Configuration
                      - text: to create the cluster profile.
                - heading "ValidateDirect link to Validate" [level=3] [ref=e786]:
                  - text: Validate
                  - link "Direct link to Validate" [ref=e787] [cursor=pointer]:
                    - /url: "#validate-1"
                    - text: "#"
                - list [ref=e788]:
                  - listitem [ref=e789]:
                    - paragraph [ref=e790]:
                      - text: Log in to
                      - link "Palette" [ref=e791] [cursor=pointer]:
                        - /url: https://console.spectrocloud.com/
                      - text: .
                  - listitem [ref=e792]:
                    - paragraph [ref=e793]:
                      - text: From the left main menu, select
                      - strong [ref=e794]: Profiles
                      - text: . Verify that your new cluster profile is available.
                - heading "Next StepsDirect link to Next Steps" [level=2] [ref=e795]:
                  - text: Next Steps
                  - link "Direct link to Next Steps" [ref=e796] [cursor=pointer]:
                    - /url: "#next-steps"
                    - text: "#"
                - paragraph [ref=e797]:
                  - text: After you have created an OS image with CAPI Image Builder and have it referenced in a cluster profile, you can deploy a VMware host cluster using the created cluster profile. Refer to the
                  - link "Deploy App Workloads with a PCG" [ref=e798] [cursor=pointer]:
                    - /url: /tutorials/clusters/pcg/deploy-app-pcg/
                  - text: tutorial for instructions on deploying a VMware host cluster.
              - generic [ref=e799]:
                - generic [ref=e801]:
                  - text: "Tags:"
                  - list [ref=e802]:
                    - listitem [ref=e803]:
                      - link "operating system" [ref=e804] [cursor=pointer]:
                        - /url: /tags/operating-system/
                    - listitem [ref=e805]:
                      - link "byoos" [ref=e806] [cursor=pointer]:
                        - /url: /tags/byoos/
                    - listitem [ref=e807]:
                      - link "profiles" [ref=e808] [cursor=pointer]:
                        - /url: /tags/profiles/
                    - listitem [ref=e809]:
                      - link "pxk" [ref=e810] [cursor=pointer]:
                        - /url: /tags/pxk/
                    - listitem [ref=e811]:
                      - link "vmware" [ref=e812] [cursor=pointer]:
                        - /url: /tags/vmware/
                - link "Edit this page" [ref=e815] [cursor=pointer]:
                  - /url: https://github.com/spectrocloud/librarium/blob/master/docs/docs-content/byoos/capi-image-builder/build-image-vmware/non-airgap-build/rocky-capi.md
                  - img [ref=e816]
                  - text: Edit this page
            - navigation "Docs pages" [ref=e820]:
              - link "Previous « RHEL and PXK" [ref=e821] [cursor=pointer]:
                - /url: /byoos/capi-image-builder/build-image-vmware/non-airgap-build/rhel-capi/
                - generic [ref=e822]: Previous
                - generic [ref=e823]: « RHEL and PXK
              - link "Next Airgap Build »" [ref=e824] [cursor=pointer]:
                - /url: /byoos/capi-image-builder/build-image-vmware/airgap-build/
                - generic [ref=e825]: Next
                - generic [ref=e826]: Airgap Build »
          - list [ref=e829]:
            - listitem [ref=e830]:
              - link "Prerequisites" [ref=e831] [cursor=pointer]:
                - /url: "#prerequisites"
            - listitem [ref=e832]:
              - link "Build Custom Image" [ref=e833] [cursor=pointer]:
                - /url: "#build-custom-image"
              - list [ref=e834]:
                - listitem [ref=e835]:
                  - link "Validate" [ref=e836] [cursor=pointer]:
                    - /url: "#validate"
            - listitem [ref=e837]:
              - link "Create Cluster Profile" [ref=e838] [cursor=pointer]:
                - /url: "#create-cluster-profile"
              - list [ref=e839]:
                - listitem [ref=e840]:
                  - link "Validate" [ref=e841] [cursor=pointer]:
                    - /url: "#validate-1"
            - listitem [ref=e842]:
              - link "Next Steps" [ref=e843] [cursor=pointer]:
                - /url: "#next-steps"
  - button "Project Logo Ask AI" [ref=e844] [cursor=pointer]:
    - generic [ref=e847]:
      - img "Project Logo" [ref=e848]
      - paragraph [ref=e849]: Ask AI
```