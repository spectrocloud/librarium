# Page snapshot

```yaml
- generic [active] [ref=e1]:
  - generic [ref=e2]:
    - region "Skip to main content":
      - link "Skip to main content" [ref=e3] [cursor=pointer]:
        - /url: "#__docusaurus_skipToContent_fallback"
    - navigation "Main" [ref=e4]:
      - generic [ref=e5]:
        - generic [ref=e6]:
          - link "Spectro cloud logo" [ref=e7] [cursor=pointer]:
            - /url: /
            - img "Spectro cloud logo" [ref=e9]
          - link "Docs" [ref=e10] [cursor=pointer]:
            - /url: /release-notes/
          - link "Tutorials" [ref=e11] [cursor=pointer]:
            - /url: /tutorials/
          - link "Downloads" [ref=e12] [cursor=pointer]:
            - /url: /downloads/
          - link "API" [ref=e13] [cursor=pointer]:
            - /url: /api/introduction/
          - button "latest" [ref=e15] [cursor=pointer]
        - generic [ref=e16]:
          - link "GitHub repository" [ref=e17] [cursor=pointer]:
            - /url: https://github.com/spectrocloud/librarium
          - button "Switch between dark and light mode (currently system mode)" [ref=e19] [cursor=pointer]:
            - img [ref=e20]
          - button "Search (Ctrl+K)" [ref=e23] [cursor=pointer]:
            - generic [ref=e24]:
              - img [ref=e25]
              - generic [ref=e27]: Search
    - generic [ref=e31]:
      - complementary [ref=e32]:
        - generic [ref=e34]:
          - link "Spectro cloud logo" [ref=e35] [cursor=pointer]:
            - /url: /
            - img "Spectro cloud logo" [ref=e36]
          - navigation "Docs sidebar" [ref=e37]:
            - list [ref=e38]:
              - listitem [ref=e39]:
                - generic [ref=e40]:
                  - link "Release Notes" [ref=e41] [cursor=pointer]:
                    - /url: /release-notes/
                    - img [ref=e43]
                    - text: Release Notes
                  - button "Toggle the collapsible sidebar category 'Release Notes'" [ref=e45] [cursor=pointer]
              - listitem [ref=e46]:
                - generic [ref=e47]:
                  - link "Security Bulletins" [ref=e48] [cursor=pointer]:
                    - /url: /security-bulletins/
                    - img [ref=e50]
                    - text: Security Bulletins
                  - button "Toggle the collapsible sidebar category 'Security Bulletins'" [ref=e52] [cursor=pointer]
              - listitem [ref=e53]:
                - generic [ref=e54]:
                  - link "What is Palette?" [ref=e55] [cursor=pointer]:
                    - /url: /
                    - img [ref=e57]
                    - text: What is Palette?
                  - button "Toggle the collapsible sidebar category 'What is Palette?'" [ref=e59] [cursor=pointer]
              - listitem [ref=e60]:
                - link "Getting Started" [ref=e61] [cursor=pointer]:
                  - /url: /getting-started/
                  - img [ref=e63]
                  - text: Getting Started
              - listitem [ref=e65]:
                - generic [ref=e66]:
                  - link "Architecture" [ref=e67] [cursor=pointer]:
                    - /url: /architecture/
                    - img [ref=e69]
                    - text: Architecture
                  - button "Toggle the collapsible sidebar category 'Architecture'" [ref=e71] [cursor=pointer]
              - listitem [ref=e72]:
                - generic [ref=e73]:
                  - link "Profiles" [ref=e74] [cursor=pointer]:
                    - /url: /profiles/
                    - img [ref=e76]
                    - text: Profiles
                  - button "Toggle the collapsible sidebar category 'Profiles'" [ref=e80] [cursor=pointer]
              - listitem [ref=e81]:
                - generic [ref=e82]:
                  - link "Deployment Modes" [ref=e83] [cursor=pointer]:
                    - /url: /deployment-modes/
                    - img [ref=e85]
                    - text: Deployment Modes
                  - button "Toggle the collapsible sidebar category 'Deployment Modes'" [ref=e87] [cursor=pointer]
              - listitem [ref=e88]:
                - generic [ref=e89]:
                  - link "Clusters" [expanded] [ref=e90] [cursor=pointer]:
                    - /url: /clusters/
                    - img [ref=e92]
                    - text: Clusters
                  - button "Toggle the collapsible sidebar category 'Clusters'" [ref=e98] [cursor=pointer]
                - list [ref=e99]:
                  - listitem [ref=e100]:
                    - generic [ref=e101]:
                      - link "Public Cloud Clusters" [ref=e102] [cursor=pointer]:
                        - /url: /clusters/public-cloud/
                        - img [ref=e104]
                        - text: Public Cloud Clusters
                      - button "Toggle the collapsible sidebar category 'Public Cloud Clusters'" [ref=e106] [cursor=pointer]
                  - listitem [ref=e107]:
                    - generic [ref=e108]:
                      - link "Data Center Clusters" [ref=e109] [cursor=pointer]:
                        - /url: /clusters/data-center/
                        - img [ref=e111]
                        - text: Data Center Clusters
                      - button "Toggle the collapsible sidebar category 'Data Center Clusters'" [ref=e113] [cursor=pointer]
                  - listitem [ref=e114]:
                    - generic [ref=e115]:
                      - link "Edge" [expanded] [ref=e116] [cursor=pointer]:
                        - /url: /clusters/edge/
                        - img [ref=e118]
                        - text: Edge
                      - button "Toggle the collapsible sidebar category 'Edge'" [ref=e120] [cursor=pointer]
                    - list [ref=e121]:
                      - listitem [ref=e122]:
                        - generic [ref=e123]:
                          - link "Architecture" [ref=e124] [cursor=pointer]:
                            - /url: /clusters/edge/architecture/
                          - button "Toggle the collapsible sidebar category 'Architecture'" [ref=e125] [cursor=pointer]
                      - listitem [ref=e126]:
                        - link "Hardware Requirements" [ref=e127] [cursor=pointer]:
                          - /url: /clusters/edge/hardware-requirements/
                      - listitem [ref=e128]:
                        - link "Deployment Lifecycle" [ref=e129] [cursor=pointer]:
                          - /url: /clusters/edge/edge-native-lifecycle/
                      - listitem [ref=e130]:
                        - generic [ref=e131]:
                          - link "Trusted Boot" [ref=e132] [cursor=pointer]:
                            - /url: /clusters/edge/trusted-boot/
                          - button "Toggle the collapsible sidebar category 'Trusted Boot'" [ref=e133] [cursor=pointer]
                      - listitem [ref=e134]:
                        - generic [ref=e135]:
                          - link "Install Configuration" [ref=e136] [cursor=pointer]:
                            - /url: /clusters/edge/edge-configuration/
                          - button "Toggle the collapsible sidebar category 'Install Configuration'" [ref=e137] [cursor=pointer]
                      - listitem [ref=e138]:
                        - generic [ref=e139]:
                          - link "EdgeForge Workflow" [ref=e140] [cursor=pointer]:
                            - /url: /clusters/edge/edgeforge-workflow/
                          - button "Toggle the collapsible sidebar category 'EdgeForge Workflow'" [ref=e141] [cursor=pointer]
                      - listitem [ref=e142]:
                        - generic [ref=e143]:
                          - link "Local UI" [ref=e144] [cursor=pointer]:
                            - /url: /clusters/edge/local-ui/
                          - button "Toggle the collapsible sidebar category 'Local UI'" [ref=e145] [cursor=pointer]
                      - listitem [ref=e146]:
                        - generic [ref=e147]:
                          - link "Deployment" [ref=e148] [cursor=pointer]:
                            - /url: /clusters/edge/site-deployment/
                          - button "Toggle the collapsible sidebar category 'Deployment'" [ref=e149] [cursor=pointer]
                      - listitem [ref=e150]:
                        - generic [ref=e151]:
                          - link "Cluster Management" [ref=e152] [cursor=pointer]:
                            - /url: /clusters/edge/cluster-management/
                          - button "Toggle the collapsible sidebar category 'Cluster Management'" [ref=e153] [cursor=pointer]
                      - listitem [ref=e154]:
                        - generic [ref=e155]:
                          - link "Networking" [ref=e156] [cursor=pointer]:
                            - /url: /clusters/edge/networking/
                          - button "Toggle the collapsible sidebar category 'Networking'" [ref=e157] [cursor=pointer]
                      - listitem [ref=e158]:
                        - generic [ref=e159]:
                          - link "Third Party Integrations" [expanded] [ref=e160] [cursor=pointer]:
                            - /url: /clusters/edge/third-party-integrations/
                          - button "Toggle the collapsible sidebar category 'Third Party Integrations'" [ref=e161] [cursor=pointer]
                        - list [ref=e162]:
                          - listitem [ref=e163]:
                            - link "Use Tailscale to Ensure Remote Host Access" [ref=e164] [cursor=pointer]:
                              - /url: /clusters/edge/third-party-integrations/tailscale/
                  - listitem [ref=e165]:
                    - generic [ref=e166]:
                      - link "Palette Virtual Clusters" [ref=e167] [cursor=pointer]:
                        - /url: /clusters/palette-virtual-clusters/
                        - img [ref=e169]
                        - text: Palette Virtual Clusters
                      - button "Toggle the collapsible sidebar category 'Palette Virtual Clusters'" [ref=e171] [cursor=pointer]
                  - listitem [ref=e172]:
                    - generic [ref=e173]:
                      - link "Imported Clusters" [ref=e174] [cursor=pointer]:
                        - /url: /clusters/imported-clusters/
                        - img [ref=e176]
                        - text: Imported Clusters
                      - button "Toggle the collapsible sidebar category 'Imported Clusters'" [ref=e178] [cursor=pointer]
                  - listitem [ref=e179]:
                    - generic [ref=e180]:
                      - link "Manage Clusters" [ref=e181] [cursor=pointer]:
                        - /url: /clusters/cluster-management/
                        - img [ref=e183]
                        - text: Manage Clusters
                      - button "Toggle the collapsible sidebar category 'Manage Clusters'" [ref=e185] [cursor=pointer]
                  - listitem [ref=e186]:
                    - generic [ref=e187]:
                      - link "Cluster Groups" [ref=e188] [cursor=pointer]:
                        - /url: /clusters/cluster-groups/
                        - img [ref=e190]
                        - text: Cluster Groups
                      - button "Toggle the collapsible sidebar category 'Cluster Groups'" [ref=e192] [cursor=pointer]
                  - listitem [ref=e193]:
                    - generic [ref=e194]:
                      - link "Private Cloud Gateway" [ref=e195] [cursor=pointer]:
                        - /url: /clusters/pcg/
                        - img [ref=e197]
                        - text: Private Cloud Gateway
                      - button "Toggle the collapsible sidebar category 'Private Cloud Gateway'" [ref=e199] [cursor=pointer]
              - listitem [ref=e200]:
                - generic [ref=e201]:
                  - link "Bring Your Own OS (BYOOS)" [ref=e202] [cursor=pointer]:
                    - /url: /byoos/
                    - img [ref=e204]
                    - text: Bring Your Own OS (BYOOS)
                  - button "Toggle the collapsible sidebar category 'Bring Your Own OS (BYOOS)'" [ref=e206] [cursor=pointer]
              - listitem [ref=e207]:
                - generic [ref=e208]:
                  - link "Palette Dev Engine" [ref=e209] [cursor=pointer]:
                    - /url: /devx/
                    - img [ref=e211]
                    - text: Palette Dev Engine
                  - button "Toggle the collapsible sidebar category 'Palette Dev Engine'" [ref=e213] [cursor=pointer]
              - listitem [ref=e214]:
                - generic [ref=e215]:
                  - link "Virtual Machine Orchestrator" [ref=e216] [cursor=pointer]:
                    - /url: /vm-management/
                    - img [ref=e218]
                    - text: Virtual Machine Orchestrator
                  - button "Toggle the collapsible sidebar category 'Virtual Machine Orchestrator'" [ref=e220] [cursor=pointer]
              - listitem [ref=e221]:
                - generic [ref=e222]:
                  - link "Workspaces" [ref=e223] [cursor=pointer]:
                    - /url: /workspace/
                    - img [ref=e225]
                    - text: Workspaces
                  - button "Toggle the collapsible sidebar category 'Workspaces'" [ref=e227] [cursor=pointer]
              - listitem [ref=e228]:
                - generic [ref=e229]:
                  - link "Packs List" [ref=e230] [cursor=pointer]:
                    - /url: /integrations/
                    - img [ref=e232]
                    - text: Packs List
                  - button "Toggle the collapsible sidebar category 'Packs List'" [ref=e234] [cursor=pointer]
              - listitem [ref=e235]:
                - generic [ref=e236]:
                  - link "User & Role Management" [ref=e237] [cursor=pointer]:
                    - /url: /user-management/
                    - img [ref=e239]
                    - text: User & Role Management
                  - button "Toggle the collapsible sidebar category 'User & Role Management'" [ref=e241] [cursor=pointer]
              - listitem [ref=e242]:
                - generic [ref=e243]:
                  - link "Registries and Packs" [ref=e244] [cursor=pointer]:
                    - /url: /registries-and-packs/
                    - img [ref=e246]
                    - text: Registries and Packs
                  - button "Toggle the collapsible sidebar category 'Registries and Packs'" [ref=e248] [cursor=pointer]
              - listitem [ref=e249]:
                - generic [ref=e250]:
                  - link "Security" [ref=e251] [cursor=pointer]:
                    - /url: /security/
                    - img [ref=e253]
                    - text: Security
                  - button "Toggle the collapsible sidebar category 'Security'" [ref=e255] [cursor=pointer]
              - listitem [ref=e256]:
                - generic [ref=e257]:
                  - link "Audit Logs" [ref=e258] [cursor=pointer]:
                    - /url: /audit-logs/
                    - img [ref=e260]
                    - text: Audit Logs
                  - button "Toggle the collapsible sidebar category 'Audit Logs'" [ref=e262] [cursor=pointer]
              - listitem [ref=e263]:
                - generic [ref=e264]:
                  - link "Self-Hosted Palette" [ref=e265] [cursor=pointer]:
                    - /url: /enterprise-version/
                    - img [ref=e267]
                    - text: Self-Hosted Palette
                  - button "Toggle the collapsible sidebar category 'Self-Hosted Palette'" [ref=e269] [cursor=pointer]
              - listitem [ref=e270]:
                - generic [ref=e271]:
                  - link "Palette VerteX" [ref=e272] [cursor=pointer]:
                    - /url: /vertex/
                    - img [ref=e274]
                    - text: Palette VerteX
                  - button "Toggle the collapsible sidebar category 'Palette VerteX'" [ref=e276] [cursor=pointer]
              - listitem [ref=e277]:
                - generic [ref=e278]:
                  - link "Tenant Administration" [ref=e279] [cursor=pointer]:
                    - /url: /tenant-settings/
                    - img [ref=e281]
                    - text: Tenant Administration
                  - button "Toggle the collapsible sidebar category 'Tenant Administration'" [ref=e283] [cursor=pointer]
              - listitem [ref=e284]:
                - generic [ref=e285]:
                  - link "Automation" [ref=e286] [cursor=pointer]:
                    - /url: /automation/
                    - img [ref=e288]
                    - text: Automation
                  - button "Toggle the collapsible sidebar category 'Automation'" [ref=e290] [cursor=pointer]
              - listitem [ref=e291]:
                - generic [ref=e292]:
                  - link "Troubleshooting" [ref=e293] [cursor=pointer]:
                    - /url: /troubleshooting/
                    - img [ref=e295]
                    - text: Troubleshooting
                  - button "Toggle the collapsible sidebar category 'Troubleshooting'" [ref=e297] [cursor=pointer]
              - listitem [ref=e298]:
                - link "Glossary" [ref=e299] [cursor=pointer]:
                  - /url: /glossary-all/
                  - img [ref=e301]
                  - text: Glossary
              - listitem [ref=e303]:
                - generic [ref=e304]:
                  - link "Compliance & Legal" [ref=e305] [cursor=pointer]:
                    - /url: /legal-licenses/
                    - img [ref=e307]
                    - text: Compliance & Legal
                  - button "Toggle the collapsible sidebar category 'Compliance & Legal'" [ref=e309] [cursor=pointer]
              - listitem [ref=e310]:
                - button "Privacy Settings" [ref=e311] [cursor=pointer]:
                  - img [ref=e312]
                  - text: Privacy Settings
      - main [ref=e314]:
        - generic [ref=e316]:
          - generic [ref=e318]:
            - article [ref=e319]:
              - navigation "Breadcrumbs" [ref=e320]:
                - list [ref=e321]:
                  - listitem [ref=e322]:
                    - link "Home page" [ref=e323] [cursor=pointer]:
                      - /url: /
                      - img [ref=e324]
                  - listitem [ref=e326]:
                    - link "Clusters" [ref=e327] [cursor=pointer]:
                      - /url: /clusters/
                  - listitem [ref=e328]:
                    - link "Edge" [ref=e329] [cursor=pointer]:
                      - /url: /clusters/edge/
                  - listitem [ref=e330]:
                    - link "Third Party Integrations" [ref=e331] [cursor=pointer]:
                      - /url: /clusters/edge/third-party-integrations/
                  - listitem [ref=e332]:
                    - generic [ref=e333]: Use Tailscale to Ensure Remote Host Access
              - generic [ref=e334]:
                - heading "Use Tailscale to Ensure Remote Host Access" [level=1] [ref=e336]
                - paragraph [ref=e337]: You can use Tailscale on your Palette Edge hosts to ensure remote access to your Edge hosts that are connected to the internet. Tailscale provides point-to-point, full-mesh VPN networking with high levels of performance and security. With Tailscale installed, you can use always SSH to access your Edge hosts that have internet access, even if your Edge hosts experience problems with Kubernetes.
                - heading "LimitationsDirect link to Limitations" [level=2] [ref=e338]:
                  - text: Limitations
                  - link "Direct link to Limitations" [ref=e339] [cursor=pointer]:
                    - /url: "#limitations"
                    - text: "#"
                - list [ref=e340]:
                  - listitem [ref=e341]:
                    - text: Tailscale magicDNS is not compatible with network overlay in Edge clusters. If your Edge cluster has
                    - link "network overlay" [ref=e342] [cursor=pointer]:
                      - /url: /clusters/edge/networking/vxlan-overlay/
                    - text: enabled, you must disable MagicDNS in Tailscale or ensure you don't use the 100.100.100.100 DNS server that MagicDNS configures.
                - heading "PrerequisitesDirect link to Prerequisites" [level=2] [ref=e343]:
                  - text: Prerequisites
                  - link "Direct link to Prerequisites" [ref=e344] [cursor=pointer]:
                    - /url: "#prerequisites"
                    - text: "#"
                - list [ref=e345]:
                  - listitem [ref=e346]:
                    - paragraph [ref=e347]:
                      - text: A Tailscale account. Visit
                      - link "Tailscale official website" [ref=e348] [cursor=pointer]:
                        - /url: https://login.tailscale.com/start
                      - text: to register a Tailscale account.
                  - listitem [ref=e349]:
                    - paragraph [ref=e350]:
                      - text: A Tailscale authorization key. We recommend you use a reusable, non-ephemeral key that automatically tags the devices with one or more tags. For more information about auth keys, refer to
                      - link "Tailscale documentation" [ref=e351] [cursor=pointer]:
                        - /url: https://tailscale.com/kb/1085/auth-keys
                      - text: .
                  - listitem [ref=e352]:
                    - paragraph [ref=e353]: A host machine with an AMD64 processor architecture. You will use this host machine to build Edge artifacts using CanvOS.
                  - listitem [ref=e354]:
                    - paragraph [ref=e355]: At least one Edge device with an AMD64 processor architecture registered with your Palette account.
                  - listitem [ref=e356]:
                    - paragraph [ref=e357]: Your Edge devices must be able to connect to Tailscale. This usually means the Edge device must have an internet connection.
                  - listitem [ref=e358]:
                    - paragraph [ref=e359]: An external volume that can be flashed with the Edge installer ISO. For example, a USB drive.
                  - listitem [ref=e360]:
                    - paragraph [ref=e361]:
                      - text: This how-to uses the EdgeForge workflow to build artifacts used to provision Edge hosts. Review
                      - link "EdgeForge Workflow" [ref=e362] [cursor=pointer]:
                        - /url: /clusters/edge/edgeforge-workflow/palette-canvos/
                      - text: to become familiar with how to build EdgeForge artifacts.
                - heading "Use Tailscale to Remotely Connect to Your Edge ClusterDirect link to Use Tailscale to Remotely Connect to Your Edge Cluster" [level=2] [ref=e363]:
                  - text: Use Tailscale to Remotely Connect to Your Edge Cluster
                  - link "Direct link to Use Tailscale to Remotely Connect to Your Edge Cluster" [ref=e364] [cursor=pointer]:
                    - /url: "#use-tailscale-to-remotely-connect-to-your-edge-cluster"
                    - text: "#"
                - list [ref=e365]:
                  - listitem [ref=e366]:
                    - paragraph [ref=e367]:
                      - text: Check out the
                      - link "CanvOS" [ref=e368] [cursor=pointer]:
                        - /url: https://github.com/spectrocloud/CanvOS
                      - text: GitHub repository. Change to the
                      - strong [ref=e369]: CanvOS
                      - text: directory and choose a version tag.
                  - listitem [ref=e370]:
                    - paragraph [ref=e371]:
                      - text: Add the following content to the end of the file
                      - code [ref=e372]: Dockerfile
                      - text: "to include the Tailscale package in the Edge OS build:"
                    - generic [ref=e373]:
                      - tablist [ref=e374]:
                        - tab "Ubuntu" [selected] [ref=e375] [cursor=pointer]
                        - tab "RedHat" [ref=e376] [cursor=pointer]
                        - tab "Other" [ref=e377] [cursor=pointer]
                      - tabpanel [ref=e379]:
                        - generic [ref=e381]:
                          - code [ref=e383]:
                            - generic [ref=e384]: RUN curl -fsSL "https://pkgs.tailscale.com/stable/ubuntu/kinetic.noarmor.gpg" | sudo tee /usr/share/keyrings/tailscale-archive-keyring.gpg >/dev/null && \
                            - generic [ref=e385]: curl -fsSL "https://pkgs.tailscale.com/stable/ubuntu/kinetic.tailscale-keyring.list" | sudo tee /etc/apt/sources.list.d/tailscale.list && \
                            - generic [ref=e386]: apt update -y && \
                            - generic [ref=e387]: apt install -y tailscale && \
                            - generic [ref=e388]: apt-get clean && rm -rf /var/lib/apt/lists/*
                          - generic [ref=e389]:
                            - button "Toggle word wrap" [ref=e390] [cursor=pointer]:
                              - img [ref=e391]
                            - button "Copy code to clipboard" [ref=e393] [cursor=pointer]:
                              - generic [ref=e394]:
                                - img [ref=e395]
                                - img [ref=e397]
                    - paragraph [ref=e399]:
                      - text: If you already have commands in your
                      - code [ref=e400]: Dockerfile
                      - text: that install packages, you can either merge these together with the above content, or keep them as separate RUN statements. Note that every RUN statement creates its own image layer and fewer layers are generally better.
                  - listitem [ref=e401]:
                    - paragraph [ref=e402]:
                      - text: Review the
                      - strong [ref=e403]: .arg.template
                      - text: file containing the customizable arguments and create an
                      - strong [ref=e404]: .arg
                      - text: file. Below is a command you can use to create an example
                      - strong [ref=e405]: .arg
                      - text: file. For more information, refer to the
                      - link "Build Edge Artifacts" [ref=e406] [cursor=pointer]:
                        - /url: /clusters/edge/edgeforge-workflow/palette-canvos/
                      - text: guide.
                    - generic [ref=e408]:
                      - code [ref=e410]:
                        - generic [ref=e411]: cat << EOF > .arg
                        - generic [ref=e412]: CUSTOM_TAG=$CUSTOM_TAG
                        - generic [ref=e413]: IMAGE_REGISTRY=ttl.sh
                        - generic [ref=e414]: OS_DISTRIBUTION=ubuntu
                        - generic [ref=e415]: IMAGE_REPO=ubuntu
                        - generic [ref=e416]: OS_VERSION=22
                        - generic [ref=e417]: K8S_DISTRIBUTION=k3s
                        - generic [ref=e418]: ISO_NAME=palette-edge-installer
                        - generic [ref=e419]: ARCH=amd64
                        - generic [ref=e420]: HTTPS_PROXY=
                        - generic [ref=e421]: HTTP_PROXY=
                        - generic [ref=e422]: PROXY_CERT_PATH=
                        - generic [ref=e423]: UPDATE_KERNEL=false
                        - generic [ref=e424]: EOF
                      - button "Copy code to clipboard" [ref=e426] [cursor=pointer]:
                        - generic [ref=e427]:
                          - img [ref=e428]
                          - img [ref=e430]
                  - listitem [ref=e432]:
                    - paragraph [ref=e433]:
                      - text: Issue the command below to save your tenant registration token to an environment variable. Replace
                      - code [ref=e434]: "[your_token_here]"
                      - text: with your actual registration token.
                    - generic [ref=e436]:
                      - code [ref=e438]:
                        - generic [ref=e439]: export token=[your_token_here]
                      - button "Copy code to clipboard" [ref=e441] [cursor=pointer]:
                        - generic [ref=e442]:
                          - img [ref=e443]
                          - img [ref=e445]
                  - listitem [ref=e447]:
                    - paragraph [ref=e448]:
                      - text: Issue the following command to create the
                      - strong [ref=e449]: user-data
                      - text: file. Note that we're adding a bind mount for
                      - code [ref=e450]: /var/lib/tailscale
                      - text: to ensure the state of Tailscale is persisted across node reboots.
                    - generic [ref=e452]:
                      - code [ref=e454]:
                        - generic [ref=e455]: cat << EOF > user-data
                        - generic [ref=e456]: "stylus:"
                        - generic [ref=e457]: "site:"
                        - generic [ref=e458]: "paletteEndpoint: api.spectrocloud.com"
                        - generic [ref=e459]: "edgeHostToken: $token"
                        - generic [ref=e460]: "projectName: Default"
                        - generic [ref=e461]: "name: edge-randomid"
                        - generic [ref=e462]: "install:"
                        - generic [ref=e463]: "poweroff: true"
                        - generic [ref=e464]: "bind_mounts:"
                        - generic [ref=e465]: "- /var/lib/tailscale"
                        - generic [ref=e466]: "users:"
                        - generic [ref=e467]: "- name: kairos"
                        - generic [ref=e468]: "passwd: kairos"
                        - generic [ref=e469]: EOF
                      - button "Copy code to clipboard" [ref=e471] [cursor=pointer]:
                        - generic [ref=e472]:
                          - img [ref=e473]
                          - img [ref=e475]
                  - listitem [ref=e477]:
                    - paragraph [ref=e478]:
                      - text: Next, add a
                      - code [ref=e479]: stages
                      - text: block to the
                      - strong [ref=e480]: user-data
                      - text: file to automatically enable Tailscale and register the Edge device. Replace
                      - code [ref=e481]: $AUTH-KEY
                      - text: "with your authorization key from Tailscale:"
                    - generic [ref=e483]:
                      - code [ref=e485]:
                        - generic [ref=e486]: "stages:"
                        - generic [ref=e487]: "boot.after:"
                        - generic [ref=e488]: "- name: \"Register device with Tailscale\""
                        - generic [ref=e489]: "if: '[ ! -f \"/run/cos/recovery_mode\" ] && ! grep _current-profile /var/lib/tailscale/tailscaled.state'"
                        - generic [ref=e490]: "commands:"
                        - generic [ref=e491]: "- |"
                        - generic [ref=e492]: ID=$(cat /sys/class/dmi/id/product_uuid)
                        - generic [ref=e493]: if [ -f /oem/tailscale/tailscaled.state ]; then
                        - generic [ref=e494]: systemctl stop tailscaled
                        - generic [ref=e495]: cp /oem/tailscale/tailscaled.state /var/lib/tailscale/tailscaled.state
                        - generic [ref=e496]: systemctl start tailscaled
                        - generic [ref=e497]: "tailscale up --ssh --hostname=\"edge-${ID}\""
                        - generic [ref=e498]: else
                        - generic [ref=e499]: "tailscale up --authkey=$AUTH-KEY --ssh --hostname=\"edge-${ID}\""
                        - generic [ref=e500]: mkdir /oem/tailscale
                        - generic [ref=e501]: cp /var/lib/tailscale/tailscaled.state /oem/tailscale/tailscaled.state
                        - generic [ref=e502]: fi
                        - generic [ref=e503]: "- name: \"Enable Tailscale\""
                        - generic [ref=e504]: "if: '[ ! -f \"/run/cos/recovery_mode\" ] && grep _current-profile /var/lib/tailscale/tailscaled.state'"
                        - generic [ref=e505]: "commands:"
                        - generic [ref=e506]: "- |"
                        - generic [ref=e507]: ID=$(cat /sys/class/dmi/id/product_uuid)
                        - generic [ref=e508]: "tailscale up --ssh --hostname=\"edge-${ID}\""
                      - generic [ref=e509]:
                        - button "Toggle word wrap" [ref=e510] [cursor=pointer]:
                          - img [ref=e511]
                        - button "Copy code to clipboard" [ref=e513] [cursor=pointer]:
                          - generic [ref=e514]:
                            - img [ref=e515]
                            - img [ref=e517]
                    - paragraph [ref=e519]:
                      - text: If you already have a
                      - code [ref=e520]: stages
                      - text: block in your user-data file, you must merge the existing block together with the above content. The
                      - code [ref=e521]: stages
                      - text: block is based on Kairos cloud-init stages. For more information on cloud init stages, refer to
                      - link "Cloud Init Stages" [ref=e522] [cursor=pointer]:
                        - /url: /clusters/edge/edge-configuration/cloud-init/
                      - text: .
                    - generic [ref=e523]:
                      - generic [ref=e524]:
                        - img [ref=e526]
                        - text: info
                      - generic [ref=e528]:
                        - paragraph [ref=e529]:
                          - text: In the above
                          - code [ref=e530]: stages
                          - text: block, you are using the device ID of your Edge device that is read from the file
                          - strong [ref=e531]: /sys/class/dmi/id/product_uuid
                          - text: ", as the hostname with which to register your device with Tailscale. For more information about how this ID is generated, refer to"
                          - link "Install Configurations" [ref=e532] [cursor=pointer]:
                            - /url: /clusters/edge/edge-configuration/installer-reference/#device-id-uid-parameters
                          - text: .
                        - paragraph [ref=e533]:
                          - text: If you want to use a different hostname, especially when using the
                          - code [ref=e534]: deviceUIDPaths
                          - text: parameter in the
                          - strong [ref=e535]: user-data
                          - text: ", you can adjust the two"
                          - code [ref=e536]: ID=$(cat /sys/class/dmi/id/product_uuid)
                          - text: lines in the content above to match your custom device naming configuration.
                  - listitem [ref=e537]:
                    - paragraph [ref=e538]: Build the Edge device installation ISO and providers images.
                    - generic [ref=e540]:
                      - code [ref=e542]:
                        - generic [ref=e543]: sudo ./earthly.sh +build-all-images
                      - button "Copy code to clipboard" [ref=e545] [cursor=pointer]:
                        - generic [ref=e546]:
                          - img [ref=e547]
                          - img [ref=e549]
                    - paragraph [ref=e551]: This command may take up to 15-20 minutes to finish depending on the resources of the host machine. Upon completion, the command will display the manifest that you must use in your cluster profile to deploy your cluster.
                    - generic [ref=e553]:
                      - code [ref=e555]:
                        - generic [ref=e556]: ===================== Earthly Build SUCCESS =====================
                        - generic [ref=e557]: Share your logs with an Earthly account (experimental)! Register for one at https://ci.earthly.dev.
                      - generic [ref=e558]:
                        - button "Toggle word wrap" [ref=e559] [cursor=pointer]:
                          - img [ref=e560]
                        - button "Copy code to clipboard" [ref=e562] [cursor=pointer]:
                          - generic [ref=e563]:
                            - img [ref=e564]
                            - img [ref=e566]
                  - listitem [ref=e568]:
                    - paragraph [ref=e569]:
                      - text: Afterward, push the provider images to an image registry. For more information, refer to
                      - link "Build Edge Artifacts" [ref=e570] [cursor=pointer]:
                        - /url: /clusters/edge/edgeforge-workflow/palette-canvos/
                      - text: .
                  - listitem [ref=e571]:
                    - paragraph [ref=e572]:
                      - text: Flash your external volume with the Edge installer ISO image. You can use
                      - link "balena etcher" [ref=e573] [cursor=pointer]:
                        - /url: https://etcher.balena.io/
                      - text: or any other tool of your choice to flash your volume.
                  - listitem [ref=e574]:
                    - paragraph [ref=e575]:
                      - text: Plug the external volume into your Edge device and boot up the device using the volume to install Palette Edge on your Edge host. For more information, refer to
                      - link "Installation" [ref=e576] [cursor=pointer]:
                        - /url: /clusters/edge/site-deployment/stage/
                      - text: .
                  - listitem [ref=e577]:
                    - paragraph [ref=e578]: Remove the volume and boot up your device again to register your Edge host. If the Edge host has internet access, it will start up Tailscale and register your device with Tailscale.
                - heading "ValidateDirect link to Validate" [level=2] [ref=e579]:
                  - text: Validate
                  - link "Direct link to Validate" [ref=e580] [cursor=pointer]:
                    - /url: "#validate"
                    - text: "#"
                - list [ref=e581]:
                  - listitem [ref=e582]:
                    - paragraph [ref=e583]:
                      - text: Log in to
                      - link "Tailscale console" [ref=e584] [cursor=pointer]:
                        - /url: https://login.tailscale.com/admin/machines
                      - text: .
                  - listitem [ref=e585]:
                    - paragraph [ref=e586]:
                      - text: In the
                      - strong [ref=e587]: Machines
                      - text: tab, your Edge device is displayed in the Machines list. You can SSH to your host from any device that is also connected to your Tailscale network. Check out the
                      - link "Tailscale SSH" [ref=e588] [cursor=pointer]:
                        - /url: https://tailscale.com/kb/1193/tailscale-ssh
                      - text: documentation page to learn more about SSH with Tailscale.
                - heading "TroubleshootingDirect link to Troubleshooting" [level=2] [ref=e589]:
                  - text: Troubleshooting
                  - link "Direct link to Troubleshooting" [ref=e590] [cursor=pointer]:
                    - /url: "#troubleshooting"
                    - text: "#"
                - heading "All Traffic Dropped for 100.64.0.0/10 CIDR RangeDirect link to All Traffic Dropped for 100.64.0.0/10 CIDR Range" [level=3] [ref=e591]:
                  - text: All Traffic Dropped for 100.64.0.0/10 CIDR Range
                  - link "Direct link to All Traffic Dropped for 100.64.0.0/10 CIDR Range" [ref=e592] [cursor=pointer]:
                    - /url: "#all-traffic-dropped-for-100640010-cidr-range"
                    - text: "#"
                - paragraph [ref=e593]: "Tailscale uses the 100.64.0.0/10 range of IP addresses for your Tailnets. That means that by default, this address range, or parts of it, cannot be used for any of the following:"
                - list [ref=e594]:
                  - listitem [ref=e595]: Kubernetes cluster pod CIDR
                  - listitem [ref=e596]: Kubernetes cluster service CIDR
                  - listitem [ref=e597]: Palette Edge Overlay network CIDR
                - heading "Debug StepsDirect link to Debug Steps" [level=4] [ref=e598]:
                  - text: Debug Steps
                  - link "Direct link to Debug Steps" [ref=e599] [cursor=pointer]:
                    - /url: "#debug-steps"
                    - text: "#"
                - paragraph [ref=e600]: "If you want to use parts of the 100.64.0.0/10 range for your Kubernetes clusters or your Palette Edge Overlay networks, you must limit the IP address range that your Tailnet uses to a fraction of the 100.64.0.0/10 range. Use the following steps to limit your Tailnet range:"
                - list [ref=e601]:
                  - listitem [ref=e602]:
                    - paragraph [ref=e603]: "First, configure an IP Pool in Tailscale. We have found the following configuration works well to assign addresses in the new range to all nodes:"
                    - generic [ref=e605]:
                      - code [ref=e607]:
                        - generic [ref=e608]: "\"nodeAttrs\": ["
                        - generic [ref=e609]: "{"
                        - generic [ref=e610]: "\"target\": [\"*\"],"
                        - generic [ref=e611]: "\"ipPool\": [\"100.74.0.0/16\"],"
                        - generic [ref=e612]: "},"
                        - generic [ref=e613]: "],"
                      - button "Copy code to clipboard" [ref=e615] [cursor=pointer]:
                        - generic [ref=e616]:
                          - img [ref=e617]
                          - img [ref=e619]
                  - listitem [ref=e621]:
                    - paragraph [ref=e622]: "Next, in the OS pack of your cluster profile, add the following:"
                    - generic [ref=e624]:
                      - code [ref=e626]:
                        - generic [ref=e627]: "stages:"
                        - generic [ref=e628]: "initramfs:"
                        - generic [ref=e629]: "- name: \"Tailscale fix systemD unit service\""
                        - generic [ref=e630]: "files:"
                        - generic [ref=e631]: "- path: /etc/systemd/system/tailscale-iptables-fix.service"
                        - generic [ref=e632]: "permissions: 0644"
                        - generic [ref=e633]: "owner: 0"
                        - generic [ref=e634]: "group: 0"
                        - generic [ref=e635]: "content: |"
                        - generic [ref=e636]: "[Unit]"
                        - generic [ref=e637]: Description=Tailscale iptables fix service
                        - generic [ref=e638]: "[Service]"
                        - generic [ref=e639]: ExecStart=/etc/palette/tailscale-iptables.sh
                        - generic [ref=e640]: "[Install]"
                        - generic [ref=e641]: WantedBy=multi-user.target
                        - generic [ref=e642]: "- name: \"Tailscale fix systemD unit timer\""
                        - generic [ref=e643]: "files:"
                        - generic [ref=e644]: "- path: /etc/systemd/system/tailscale-iptables-fix.timer"
                        - generic [ref=e645]: "permissions: 0644"
                        - generic [ref=e646]: "owner: 0"
                        - generic [ref=e647]: "group: 0"
                        - generic [ref=e648]: "content: |"
                        - generic [ref=e649]: "[Unit]"
                        - generic [ref=e650]: Description=Tailscale iptables fix schedule
                        - generic [ref=e651]: "[Timer]"
                        - generic [ref=e652]: OnBootSec=15
                        - generic [ref=e653]: OnUnitActiveSec=15
                        - generic [ref=e654]: "[Install]"
                        - generic [ref=e655]: WantedBy=timers.target
                        - generic [ref=e656]: "- name: \"Tailscale adjustment script\""
                        - generic [ref=e657]: "files:"
                        - generic [ref=e658]: "- path: /etc/palette/tailscale-iptables.sh"
                        - generic [ref=e659]: "permissions: 0755"
                        - generic [ref=e660]: "owner: 0"
                        - generic [ref=e661]: "group: 0"
                        - generic [ref=e662]: "content: |"
                        - generic [ref=e663]: "#!/bin/sh"
                        - generic [ref=e664]: if iptables -L ts-input | grep DROP | grep 100.64.0.0/10; then
                        - generic [ref=e665]: "RULEFWD=$(iptables -L ts-forward --line-numbers | grep DROP | grep 100.64.0.0/10 | awk '{print $1}')"
                        - generic [ref=e666]: "RULEINP=$(iptables -L ts-input --line-numbers | grep DROP | grep 100.64.0.0/10 | awk '{print $1}')"
                        - generic [ref=e667]: iptables -R ts-forward $RULEFWD -s 100.74.0.0/16 -o tailscale0 -j DROP
                        - generic [ref=e668]: iptables -R ts-input $RULEINP -s 100.74.0.0/16 -o tailscale0 -j DROP
                        - generic [ref=e669]: fi
                        - generic [ref=e670]: "network:"
                        - generic [ref=e671]: "- name: \"Reduce scope of traffic dropped by Tailscale to just the Tailscale ipPool\""
                        - generic [ref=e672]: "commands:"
                        - generic [ref=e673]: "- |"
                        - generic [ref=e674]: systemctl enable tailscale-iptables-fix.service
                        - generic [ref=e675]: systemctl enable tailscale-iptables-fix.timer
                        - generic [ref=e676]: systemctl start tailscale-iptables-fix.timer
                      - generic [ref=e677]:
                        - button "Toggle word wrap" [ref=e678] [cursor=pointer]:
                          - img [ref=e679]
                        - button "Copy code to clipboard" [ref=e681] [cursor=pointer]:
                          - generic [ref=e682]:
                            - img [ref=e683]
                            - img [ref=e685]
                    - paragraph [ref=e687]:
                      - text: This will ensure Tailscale does not drop traffic for IP ranges that it doesn't own. This is due to a known bug in Tailscale. Even though we restricted the IP Pool, Tailscale still puts in
                      - code [ref=e688]: iptables
                      - text: rule on every node that drops unknown traffic from any address in the entire 100.64.0.0/10 range.
              - generic [ref=e689]:
                - generic [ref=e691]:
                  - text: "Tags:"
                  - list [ref=e692]:
                    - listitem [ref=e693]:
                      - link "edge" [ref=e694] [cursor=pointer]:
                        - /url: /tags/edge/
                    - listitem [ref=e695]:
                      - link "integrations" [ref=e696] [cursor=pointer]:
                        - /url: /tags/integrations/
                    - listitem [ref=e697]:
                      - link "tailscale" [ref=e698] [cursor=pointer]:
                        - /url: /tags/tailscale/
                - link "Edit this page" [ref=e701] [cursor=pointer]:
                  - /url: https://github.com/spectrocloud/librarium/blob/master/docs/docs-content/clusters/edge/third-party-integrations/tailscale.md
                  - img [ref=e702]
                  - text: Edit this page
            - navigation "Docs pages" [ref=e706]:
              - link "Previous « Third Party Integrations" [ref=e707] [cursor=pointer]:
                - /url: /clusters/edge/third-party-integrations/
                - generic [ref=e708]: Previous
                - generic [ref=e709]: « Third Party Integrations
              - link "Next Palette Virtual Clusters »" [ref=e710] [cursor=pointer]:
                - /url: /clusters/palette-virtual-clusters/
                - generic [ref=e711]: Next
                - generic [ref=e712]: Palette Virtual Clusters »
          - list [ref=e715]:
            - listitem [ref=e716]:
              - link "Limitations" [ref=e717] [cursor=pointer]:
                - /url: "#limitations"
            - listitem [ref=e718]:
              - link "Prerequisites" [ref=e719] [cursor=pointer]:
                - /url: "#prerequisites"
            - listitem [ref=e720]:
              - link "Use Tailscale to Remotely Connect to Your Edge Cluster" [ref=e721] [cursor=pointer]:
                - /url: "#use-tailscale-to-remotely-connect-to-your-edge-cluster"
            - listitem [ref=e722]:
              - link "Validate" [ref=e723] [cursor=pointer]:
                - /url: "#validate"
            - listitem [ref=e724]:
              - link "Troubleshooting" [ref=e725] [cursor=pointer]:
                - /url: "#troubleshooting"
              - list [ref=e726]:
                - listitem [ref=e727]:
                  - link "All Traffic Dropped for 100.64.0.0/10 CIDR Range" [ref=e728] [cursor=pointer]:
                    - /url: "#all-traffic-dropped-for-100640010-cidr-range"
  - button "Project Logo Ask AI" [ref=e729] [cursor=pointer]:
    - generic [ref=e732]:
      - img "Project Logo" [ref=e733]
      - paragraph [ref=e734]: Ask AI
```