---
partial_category: pcg
partial_name: proxy-certificate-propagation
---

    | **Parameter**                     | **Description**                                                                                                                                                                                                                                                                                                |
   | :-------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **HTTPS Proxy**                   | Leave this blank unless you are using an HTTPS Proxy. This setting will be propagated to all PCG nodes in the cluster, as well as all tenant clusters using the PCG. Example: `https://USERNAME:PASSWORD@PROXYIP:PROXYPORT`.                                                                                                                   |
   | **HTTP Proxy**                    | Leave this blank unless you are using an HTTP Proxy. This setting will be propagated to all PCG nodes in the cluster, as well as all tenant clusters using the PCG. Example: `http://USERNAME:PASSWORD@PROXYIP:PROXYPORT`.                                                                                                                     |
   | **No Proxy**                      | Provide a list of local network CIDR addresses, hostnames, and domain names that should be excluded from being a proxy. This setting will be propagated to all the nodes to bypass the proxy server, as well as all tenant clusters using the PCG. Example for a self-hosted environment: `my.company.com,10.10.0.0/16`.                                     |
   | **Proxy CA Certificate Filepath** | The default is blank. You can provide the file path of a CA certificate on the installer host. If provided, this CA certificate will be copied to each PCG node when deploying the PCG cluster, and the provided path will be used on the PCG cluster nodes. Example: `/usr/local/share/ca-certificates/ca.crt`. <br /><br /> Note that proxy CA certificates are _not_ automatically propagated to tenant clusters using the PCG; these certificates must be added at either the tenant level or cluster profile level in the OS layer.   |
   | **Pod CIDR**                      | Enter the CIDR pool that will be used to assign IP addresses to pods in the PCG cluster. The pod IP addresses should be unique and not overlap with any machine IPs in the environment.                                                                                                                        |
   | **Service IP Range**              | Enter the IP address range that will be used to assign IP addresses to services in the PCG cluster. The service IP addresses should be unique and not overlap with any machine IPs in the environment.                                                                                                         |

    <details>

    <summary>Configure Proxy CA Certificate for Workload Clusters</summary>

    By default, proxy environment variables (`HTTPS_PROXY`, `HTTP_PROXY`, and `NO_PROXY`) configured during PCG installation are propagated to all PCG cluster nodes, as well as the nodes of all tenant workload clusters deployed with the PCG. However, proxy CA certificates are only propagated to PCG cluster nodes; they are not propagated the nodes of tenant workload clusters. 
    
    Proxy CA certificates must be added to workload clusters at the tenant level or cluster profile level in the OS layer. If configured at the tenant level, _all_ workload clusters provisioned from the tenant, with the exception of managed Kubernetes clusters (EKS, AKS, and GKE) and Edge clusters, will have the CA certificate injected into their cluster nodes; if configured at the cluster profile level, only workload clusters deployed using the cluster profile will be injected with the CA certificate.

    To configure your proxy CA certificate for your workload clusters, use one of the following methods.

    <Tabs>

    <TabItem value="tenant" label="Tenant Settings">

    Take the following approach to propagate your proxy server CA certificate to _all_ workload cluster nodes provisioned from the tenant, with the exception of managed Kubernetes clusters (EKS, AKS, and GKE) and Edge clusters.

      1. Log in to [Palette](https://console.spectrocloud.com) as a tenant admin.
   
      2. From the left main menu, select **Tenant Settings**. 
   
      3. From the **Tenant Settings Menu**, below **Platform**, select **Certificates**.
   
      4. Select **Add A New Certificate**.
   
      5. In the **Add Certificate** dialog, enter the **Certificate Name** and **Certificate** value. 
   
      6. **Confirm** your changes.

    </TabItem>

    <TabItem value="cluster-profile" label="Cluster Profile OS Layer">

    Take the following approach to propagate proxy server CA certificates on a per-cluster basis.

      1. Log in to [Palette](https://console.spectrocloud.com).
   
      2. From the left main menu, select **Profiles**.
   
      3. Choose an existing cluster profile or <VersionedLink text="create a new cluster profile" url="/profiles/cluster-profiles/create-cluster-profiles" />. For more information, refer to the <VersionedLink text="cluster profile" url="/profiles/cluster-profiles" /> guide.
   
      4. In the OS layer of your cluster profile, uncomment `kubeadmconfig`, `kubeadmconfig.files`, and `kubeadmconfig.files.content`, and add your CA certificate.
      <br />
            ```yaml hideClipboard title="Example OS layer configuration" 
            kubeadmconfig:
            # preKubeadmCommands:
            # - echo "Executing pre kube admin config commands"
            # - update-ca-certificates
            # - 'systemctl restart containerd; sleep 3'
            # - 'while [ ! -S /var/run/containerd/containerd.sock ]; do echo "Waiting for containerd..."; sleep 1; done'
            # postKubeadmCommands:
            # - echo "Executing post kube admin config commands"
              files:
            # - targetPath: /usr/local/share/ca-certificates/mycom.crt
            #   targetOwner: "root:root"
            #   targetPermissions: "0644"
                content: |
                  -----BEGIN CERTIFICATE-----
                  ***************************
                  -----END CERTIFICATE-----
            ```

      5. Select **Confirm Updates**.

    </TabItem>

    </Tabs>

    </details>