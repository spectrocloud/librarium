---
sidebar_label: "Registry Connect"
title: "Registry Connect"
description: "Registry Connect pack in Palette Edge."
hide_table_of_contents: true
type: "registry"
sidebar_class_name: "hide-from-sidebar"
tags: ["packs", "registry", "edge"]
---

<RedirectPackPage packName="registry-connect" />

### Use External Image Registries

You can use external registries with the Registry Connect pack. The agent reads this pack before it deploys a cluster on edge hosts. When you set registry mapping rules in this pack, it rewrites image references with the mapped images in the pack. 

Modify your pack's `imageReplacementRules` parameter to rewrite container image references to an external registry.

#### Rewrite All Image References

Use the `all` key word to remap all registries to a single remote location.  The following example prepends the value to the original image location. 

```yaml
pack:
  ...
charts:
  registry-connect:
     config:
       ...
       registry:
         imageReplacementRules: |
           "all": "example.registry.com/internal-images"
```

In this location, an image originally located at `us-docker.pkg.dev/palette-images/packs/flannel/0.27.0/cni-plugins:v1.6.2` now points to `example.registry.com/internal-images/us-docker.pkg.dev/palette-images/packs/flannel/0.27.0/cni-plugins:v1.6.2` instead. 

#### Rewrite Image References for Specific Registries

Enter your preferred locations to rewrite image references. This replaces specific source registry prefixes with the specified external registry. 

The following example shows how to rewrite image references to use `example.registry.com/internal-images`.


```yaml
pack:
  namespace: "cluster-{{ .spectro.system.cluster.uid }}"
  content:
    layer: core
    images:
      - image: us-docker.pkg.dev/palette-images/third-party/ubuntu-util:22.04

charts:
  registry-connect:
    config:
      content:
        sync:
          enable: false
      registry:
        imageReplacementRules: |
            "us-east1-docker.pkg.dev/spectro-images/daily": "example.registry.com/internal-images"
            "us-docker.pkg.dev/palette-images": "example.registry.com/internal-images"
            "grc.io/spectro-dev-public": "example.registry.com/internal-images"
            "grc.io/spectro-images-public": "example.registry.com/internal-images"
        credentials:
          - domain: 10.10.10.10
            username: admin # you may provide value with 'username' key or you may use 'usernameRef' to refer
            password: ""
```

In this example, if your image was originally located at `us-docker.pkg.dev/palette-images/packs/flannel/0.27.0/cni-plugins:v1.6.2`, it would now point to `example.registry.com/internal-images/packs/flannel/0.27.0/cni-plugins:v1.6.2` instead. This replaces all instances of the indicated registry location with a new one. 